###############################################################################
#                                                                             #
# IAR C/C++ Compiler V8.10.3.10338/W32 for 8051         25/Aug/2018  23:10:10 #
# Copyright 2004-2011 IAR Systems AB.                                         #
#                                                                             #
#    Core               =  plain                                              #
#    Code model         =  banked                                             #
#    Data model         =  large                                              #
#    Calling convention =  xdata reentrant                                    #
#    Constant location  =  data_rom                                           #
#    Dptr setup         =  1,16                                               #
#    Source file        =  F:\work\iot-hardware\logger\logger\Components\osal #
#                          \common\OSAL_Timers.c                              #
#    Command line       =  -f F:\work\iot-hardware\logger\logger\Projects\zst #
#                          ack\Samples\GenericApp\CC2530DB\..\..\..\Tools\CC2 #
#                          530DB\f8wEndev.cfg (-DCPU32MHZ -DROOT=__near_func  #
#                          -DMAC_CFG_TX_DATA_MAX=3 -DMAC_CFG_TX_MAX=6         #
#                          -DMAC_CFG_RX_MAX=3) -f F:\work\iot-hardware\logger #
#                          \logger\Projects\zstack\Samples\GenericApp\CC2530D #
#                          B\..\..\..\Tools\CC2530DB\f8wConfig.cfg            #
#                          (-DZIGBEEPRO -DSECURE=0 -DZG_SECURE_DYNAMIC=0      #
#                          -DREFLECTOR -DDEFAULT_CHANLIST=0x00000800          #
#                          -DZDAPP_CONFIG_PAN_ID=0xFFFF                       #
#                          -DNWK_START_DELAY=100 -DEXTENDED_JOINING_RANDOM_MA #
#                          SK=0x007F -DBEACON_REQUEST_DELAY=100               #
#                          -DBEACON_REQ_DELAY_MASK=0x00FF                     #
#                          -DLINK_STATUS_JITTER_MASK=0x007F                   #
#                          -DROUTE_EXPIRY_TIME=30 -DAPSC_ACK_WAIT_DURATION_PO #
#                          LLED=3000 -DNWK_INDIRECT_MSG_TIMEOUT=7             #
#                          -DMAX_RREQ_ENTRIES=8 -DAPSC_MAX_FRAME_RETRIES=3    #
#                          -DNWK_MAX_DATA_RETRIES=2                           #
#                          -DMAX_POLL_FAILURE_RETRIES=2 -DMAX_BCAST=9         #
#                          -DAPS_MAX_GROUPS=16 -DMAX_RTG_ENTRIES=40           #
#                          -DNWK_MAX_BINDING_ENTRIES=4                        #
#                          -DMAX_BINDING_CLUSTER_IDS=4 "-DDEFAULT_KEY={0x01,  #
#                          0x03, 0x05, 0x07, 0x09, 0x0B, 0x0D, 0x0F, 0x00,    #
#                          0x02, 0x04, 0x06, 0x08, 0x0A, 0x0C, 0x0D}"         #
#                          -DMAC_MAX_FRAME_SIZE=116                           #
#                          -DZDNWKMGR_MIN_TRANSMISSIONS=20 "-DCONST=const     #
#                          __code" -DGENERIC=__generic                        #
#                          -DRFD_RCVC_ALWAYS_ON=FALSE -DPOLL_RATE=1000        #
#                          -DQUEUED_POLL_RATE=100 -DRESPONSE_POLL_RATE=100)   #
#                          -DREJOIN_POLL_RATE=440 F:\work\iot-hardware\logger #
#                          \logger\Components\osal\common\OSAL_Timers.c -D    #
#                          NWK_AUTO_POLL -D ZTOOL_P1 -D MT_TASK -D            #
#                          MT_SYS_FUNC -D MT_ZDO_FUNC -D LCD_SUPPORTED=DEBUG  #
#                          -D xPOWER_SAVING -lC F:\work\iot-hardware\logger\l #
#                          ogger\Projects\zstack\Samples\GenericApp\CC2530DB\ #
#                          EndDeviceEB\List\ -lA F:\work\iot-hardware\logger\ #
#                          logger\Projects\zstack\Samples\GenericApp\CC2530DB #
#                          \EndDeviceEB\List\ --diag_suppress Pe001,Pa010 -o  #
#                          F:\work\iot-hardware\logger\logger\Projects\zstack #
#                          \Samples\GenericApp\CC2530DB\EndDeviceEB\Obj\ -e   #
#                          --no_cse --no_unroll --no_inline --no_code_motion  #
#                          --no_tbaa --debug --core=plain --dptr=16,1         #
#                          --data_model=large --code_model=banked             #
#                          --calling_convention=xdata_reentrant               #
#                          --place_constants=data_rom --nr_virtual_regs 16    #
#                          -I F:\work\iot-hardware\logger\logger\Projects\zst #
#                          ack\Samples\GenericApp\CC2530DB\ -I                #
#                          F:\work\iot-hardware\logger\logger\Projects\zstack #
#                          \Samples\GenericApp\CC2530DB\..\Source\ -I         #
#                          F:\work\iot-hardware\logger\logger\Projects\zstack #
#                          \Samples\GenericApp\CC2530DB\..\..\..\ZMain\TI2530 #
#                          DB\ -I F:\work\iot-hardware\logger\logger\Projects #
#                          \zstack\Samples\GenericApp\CC2530DB\..\..\..\..\.. #
#                          \Components\hal\include\ -I                        #
#                          F:\work\iot-hardware\logger\logger\Projects\zstack #
#                          \Samples\GenericApp\CC2530DB\..\..\..\..\..\Compon #
#                          ents\hal\target\CC2530EB\ -I                       #
#                          F:\work\iot-hardware\logger\logger\Projects\zstack #
#                          \Samples\GenericApp\CC2530DB\..\..\..\..\..\Compon #
#                          ents\mac\include\ -I F:\work\iot-hardware\logger\l #
#                          ogger\Projects\zstack\Samples\GenericApp\CC2530DB\ #
#                          ..\..\..\..\..\Components\mac\high_level\ -I       #
#                          F:\work\iot-hardware\logger\logger\Projects\zstack #
#                          \Samples\GenericApp\CC2530DB\..\..\..\..\..\Compon #
#                          ents\mac\low_level\srf04\ -I                       #
#                          F:\work\iot-hardware\logger\logger\Projects\zstack #
#                          \Samples\GenericApp\CC2530DB\..\..\..\..\..\Compon #
#                          ents\mac\low_level\srf04\single_chip\ -I           #
#                          F:\work\iot-hardware\logger\logger\Projects\zstack #
#                          \Samples\GenericApp\CC2530DB\..\..\..\..\..\Compon #
#                          ents\mt\ -I F:\work\iot-hardware\logger\logger\Pro #
#                          jects\zstack\Samples\GenericApp\CC2530DB\..\..\..\ #
#                          ..\..\Components\osal\include\ -I                  #
#                          F:\work\iot-hardware\logger\logger\Projects\zstack #
#                          \Samples\GenericApp\CC2530DB\..\..\..\..\..\Compon #
#                          ents\services\saddr\ -I F:\work\iot-hardware\logge #
#                          r\logger\Projects\zstack\Samples\GenericApp\CC2530 #
#                          DB\..\..\..\..\..\Components\services\sdata\ -I    #
#                          F:\work\iot-hardware\logger\logger\Projects\zstack #
#                          \Samples\GenericApp\CC2530DB\..\..\..\..\..\Compon #
#                          ents\stack\af\ -I F:\work\iot-hardware\logger\logg #
#                          er\Projects\zstack\Samples\GenericApp\CC2530DB\..\ #
#                          ..\..\..\..\Components\stack\nwk\ -I               #
#                          F:\work\iot-hardware\logger\logger\Projects\zstack #
#                          \Samples\GenericApp\CC2530DB\..\..\..\..\..\Compon #
#                          ents\stack\sapi\ -I F:\work\iot-hardware\logger\lo #
#                          gger\Projects\zstack\Samples\GenericApp\CC2530DB\. #
#                          .\..\..\..\..\Components\stack\sec\ -I             #
#                          F:\work\iot-hardware\logger\logger\Projects\zstack #
#                          \Samples\GenericApp\CC2530DB\..\..\..\..\..\Compon #
#                          ents\stack\sys\ -I F:\work\iot-hardware\logger\log #
#                          ger\Projects\zstack\Samples\GenericApp\CC2530DB\.. #
#                          \..\..\..\..\Components\stack\zdo\ -I              #
#                          F:\work\iot-hardware\logger\logger\Projects\zstack #
#                          \Samples\GenericApp\CC2530DB\..\..\..\..\..\Compon #
#                          ents\zmac\ -I F:\work\iot-hardware\logger\logger\P #
#                          rojects\zstack\Samples\GenericApp\CC2530DB\..\..\. #
#                          .\..\..\Components\zmac\f8w\ -Ol                   #
#                          --require_prototypes                               #
#    List file          =  F:\work\iot-hardware\logger\logger\Projects\zstack #
#                          \Samples\GenericApp\CC2530DB\EndDeviceEB\List\OSAL #
#                          _Timers.lst                                        #
#    Object file        =  F:\work\iot-hardware\logger\logger\Projects\zstack #
#                          \Samples\GenericApp\CC2530DB\EndDeviceEB\Obj\OSAL_ #
#                          Timers.r51                                         #
#                                                                             #
#                                                                             #
###############################################################################

F:\work\iot-hardware\logger\logger\Components\osal\common\OSAL_Timers.c
      1          /**************************************************************************************************
      2            Filename:       OSAL_Timers.c
      3            Revised:        $Date: 2010-09-17 16:25:30 -0700 (Fri, 17 Sep 2010) $
      4            Revision:       $Revision: 23835 $
      5          
      6            Description:    OSAL Timer definition and manipulation functions.
      7          
      8          
      9            Copyright 2004-2009 Texas Instruments Incorporated. All rights reserved.
     10          
     11            IMPORTANT: Your use of this Software is limited to those specific rights
     12            granted under the terms of a software license agreement between the user
     13            who downloaded the software, his/her employer (which must be your employer)
     14            and Texas Instruments Incorporated (the "License").  You may not use this
     15            Software unless you agree to abide by the terms of the License. The License
     16            limits your use, and you acknowledge, that the Software may not be modified,
     17            copied or distributed unless embedded on a Texas Instruments microcontroller
     18            or used solely and exclusively in conjunction with a Texas Instruments radio
     19            frequency transceiver, which is integrated into your product.  Other than for
     20            the foregoing purpose, you may not use, reproduce, copy, prepare derivative
     21            works of, modify, distribute, perform, display or sell this Software and/or
     22            its documentation for any purpose.
     23          
     24            YOU FURTHER ACKNOWLEDGE AND AGREE THAT THE SOFTWARE AND DOCUMENTATION ARE
     25            PROVIDED “AS IS” WITHOUT WARRANTY OF ANY KIND, EITHER EXPRESS OR IMPLIED,
     26            INCLUDING WITHOUT LIMITATION, ANY WARRANTY OF MERCHANTABILITY, TITLE,
     27            NON-INFRINGEMENT AND FITNESS FOR A PARTICULAR PURPOSE. IN NO EVENT SHALL
     28            TEXAS INSTRUMENTS OR ITS LICENSORS BE LIABLE OR OBLIGATED UNDER CONTRACT,
     29            NEGLIGENCE, STRICT LIABILITY, CONTRIBUTION, BREACH OF WARRANTY, OR OTHER
     30            LEGAL EQUITABLE THEORY ANY DIRECT OR INDIRECT DAMAGES OR EXPENSES
     31            INCLUDING BUT NOT LIMITED TO ANY INCIDENTAL, SPECIAL, INDIRECT, PUNITIVE
     32            OR CONSEQUENTIAL DAMAGES, LOST PROFITS OR LOST DATA, COST OF PROCUREMENT
     33            OF SUBSTITUTE GOODS, TECHNOLOGY, SERVICES, OR ANY CLAIMS BY THIRD PARTIES
     34            (INCLUDING BUT NOT LIMITED TO ANY DEFENSE THEREOF), OR OTHER SIMILAR COSTS.
     35          
     36            Should you have any questions regarding your right to use this Software,
     37            contact Texas Instruments Incorporated at www.TI.com.
     38          **************************************************************************************************/
     39          
     40          /*********************************************************************
     41           * INCLUDES
     42           */
     43          
     44          #include "comdef.h"
     45          #include "OnBoard.h"

   \                                 In  segment SFR_AN, at 0xa8
   \   union <unnamed> volatile __sfr _A_IEN0
   \                     _A_IEN0:
   \   000000                DS 1
     46          #include "OSAL.h"
     47          #include "OSAL_Timers.h"
     48          #include "hal_timer.h"
     49          
     50          /*********************************************************************
     51           * MACROS
     52           */
     53          
     54          /*********************************************************************
     55           * CONSTANTS
     56           */
     57          
     58          /*********************************************************************
     59           * TYPEDEFS
     60           */
     61          
     62          typedef struct
     63          {
     64            void   *next;
     65            uint16 timeout;
     66            uint16 event_flag;
     67            uint8  task_id;
     68            uint16 reloadTimeout;
     69          } osalTimerRec_t;
     70          
     71          /*********************************************************************
     72           * GLOBAL VARIABLES
     73           */
     74          

   \                                 In  segment XDATA_Z, align 1, keep-with-next
     75          osalTimerRec_t *timerHead;
   \                     timerHead:
   \   000000                DS 2
   \   000002                REQUIRE __INIT_XDATA_Z
     76          
     77          /*********************************************************************
     78           * EXTERNAL VARIABLES
     79           */
     80          
     81          /*********************************************************************
     82           * EXTERNAL FUNCTIONS
     83           */
     84          
     85          /*********************************************************************
     86           * LOCAL VARIABLES
     87           */
     88          // Milliseconds since last reboot

   \                                 In  segment XDATA_Z, align 1, keep-with-next
     89          static uint32 osal_systemClock;
   \                     osal_systemClock:
   \   000000                DS 4
   \   000004                REQUIRE __INIT_XDATA_Z
     90          
     91          /*********************************************************************
     92           * LOCAL FUNCTION PROTOTYPES
     93           */
     94          osalTimerRec_t  *osalAddTimer( uint8 task_id, uint16 event_flag, uint16 timeout );
     95          osalTimerRec_t *osalFindTimer( uint8 task_id, uint16 event_flag );
     96          void osalDeleteTimer( osalTimerRec_t *rmTimer );
     97          
     98          /*********************************************************************
     99           * FUNCTIONS
    100           *********************************************************************/
    101          
    102          /*********************************************************************
    103           * @fn      osalTimerInit
    104           *
    105           * @brief   Initialization for the OSAL Timer System.
    106           *
    107           * @param   none
    108           *
    109           * @return
    110           */

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    111          void osalTimerInit( void )
   \                     osalTimerInit:
    112          {
   \   000000   C082         PUSH    DPL
   \   000002   C083         PUSH    DPH
   \   000004                ; Saved register size: 2
   \   000004                ; Auto size: 0
    113            osal_systemClock = 0;
   \   000004   90....       MOV     DPTR,#__Constant_0
   \   000007   12....       LCALL   ?XLOAD_R2345
   \   00000A   90....       MOV     DPTR,#osal_systemClock
   \   00000D   12....       LCALL   ?XSTORE_R2345
    114          }
   \   000010   D083         POP     DPH
   \   000012   D082         POP     DPL
   \   000014   02....       LJMP    ?BRET
    115          
    116          /*********************************************************************
    117           * @fn      osalAddTimer
    118           *
    119           * @brief   Add a timer to the timer list.
    120           *          Ints must be disabled.
    121           *
    122           * @param   task_id
    123           * @param   event_flag
    124           * @param   timeout
    125           *
    126           * @return  osalTimerRec_t * - pointer to newly created timer
    127           */

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    128          osalTimerRec_t * osalAddTimer( uint8 task_id, uint16 event_flag, uint16 timeout )
   \                     osalAddTimer:
    129          {
   \   000000   74F2         MOV     A,#-0xe
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 14
   \   000005                ; Auto size: 0
   \   000005   89..         MOV     ?V0 + 2,R1
   \   000007   EA           MOV     A,R2
   \   000008   FE           MOV     R6,A
   \   000009   EB           MOV     A,R3
   \   00000A   FF           MOV     R7,A
   \   00000B   8C..         MOV     ?V0 + 0,R4
   \   00000D   8D..         MOV     ?V0 + 1,R5
    130            osalTimerRec_t *newTimer;
    131            osalTimerRec_t *srchTimer;
    132          
    133            // Look for an existing timer first
    134            newTimer = osalFindTimer( task_id, event_flag );
   \   00000F                ; Setup parameters for call to function osalFindTimer
   \   00000F   EE           MOV     A,R6
   \   000010   FA           MOV     R2,A
   \   000011   EF           MOV     A,R7
   \   000012   FB           MOV     R3,A
   \   000013   A9..         MOV     R1,?V0 + 2
   \   000015   12....       LCALL   ??osalFindTimer?relay
   \   000018   8A..         MOV     ?V0 + 4,R2
   \   00001A   8B..         MOV     ?V0 + 5,R3
   \   00001C   AA..         MOV     R2,?V0 + 4
   \   00001E   AB..         MOV     R3,?V0 + 5
    135            if ( newTimer )
   \   000020   EA           MOV     A,R2
   \   000021   4B           ORL     A,R3
   \   000022   6010         JZ      ??osalAddTimer_0
    136            {
    137              // Timer is found - update it.
    138              newTimer->timeout = timeout;
   \   000024   8A82         MOV     DPL,R2
   \   000026   8B83         MOV     DPH,R3
   \   000028   A3           INC     DPTR
   \   000029   A3           INC     DPTR
   \   00002A   E5..         MOV     A,?V0 + 0
   \   00002C   F0           MOVX    @DPTR,A
   \   00002D   A3           INC     DPTR
   \   00002E   E5..         MOV     A,?V0 + 1
   \   000030   F0           MOVX    @DPTR,A
    139          
    140              return ( newTimer );
   \   000031   02....       LJMP    ??osalAddTimer_1 & 0xFFFF
    141            }
    142            else
    143            {
    144              // New Timer
    145              newTimer = osal_mem_alloc( sizeof( osalTimerRec_t ) );
   \                     ??osalAddTimer_0:
   \   000034                ; Setup parameters for call to function osal_mem_alloc
   \   000034   7A09         MOV     R2,#0x9
   \   000036   7B00         MOV     R3,#0x0
   \   000038   12....       LCALL   ??osal_mem_alloc?relay
   \   00003B   8A..         MOV     ?V0 + 4,R2
   \   00003D   8B..         MOV     ?V0 + 5,R3
   \   00003F   AA..         MOV     R2,?V0 + 4
   \   000041   AB..         MOV     R3,?V0 + 5
    146          
    147              if ( newTimer )
   \   000043   EA           MOV     A,R2
   \   000044   4B           ORL     A,R3
   \   000045   7003         JNZ     $+5
   \   000047   02....       LJMP    ??osalAddTimer_2 & 0xFFFF
    148              {
    149                // Fill in new timer
    150                newTimer->task_id = task_id;
   \   00004A   E5..         MOV     A,?V0 + 2
   \   00004C   8A82         MOV     DPL,R2
   \   00004E   8B83         MOV     DPH,R3
   \   000050   A3           INC     DPTR
   \   000051   A3           INC     DPTR
   \   000052   A3           INC     DPTR
   \   000053   A3           INC     DPTR
   \   000054   A3           INC     DPTR
   \   000055   A3           INC     DPTR
   \   000056   E5..         MOV     A,?V0 + 2
   \   000058   F0           MOVX    @DPTR,A
    151                newTimer->event_flag = event_flag;
   \   000059   8A82         MOV     DPL,R2
   \   00005B   8B83         MOV     DPH,R3
   \   00005D   A3           INC     DPTR
   \   00005E   A3           INC     DPTR
   \   00005F   A3           INC     DPTR
   \   000060   A3           INC     DPTR
   \   000061   EE           MOV     A,R6
   \   000062   F0           MOVX    @DPTR,A
   \   000063   A3           INC     DPTR
   \   000064   EF           MOV     A,R7
   \   000065   F0           MOVX    @DPTR,A
    152                newTimer->timeout = timeout;
   \   000066   8A82         MOV     DPL,R2
   \   000068   8B83         MOV     DPH,R3
   \   00006A   A3           INC     DPTR
   \   00006B   A3           INC     DPTR
   \   00006C   E5..         MOV     A,?V0 + 0
   \   00006E   F0           MOVX    @DPTR,A
   \   00006F   A3           INC     DPTR
   \   000070   E5..         MOV     A,?V0 + 1
   \   000072   F0           MOVX    @DPTR,A
    153                newTimer->next = (void *)NULL;
   \   000073   8A82         MOV     DPL,R2
   \   000075   8B83         MOV     DPH,R3
   \   000077   7400         MOV     A,#0x0
   \   000079   F0           MOVX    @DPTR,A
   \   00007A   A3           INC     DPTR
   \   00007B   7400         MOV     A,#0x0
   \   00007D   F0           MOVX    @DPTR,A
    154                newTimer->reloadTimeout = 0;
   \   00007E   8A82         MOV     DPL,R2
   \   000080   8B83         MOV     DPH,R3
   \   000082   A3           INC     DPTR
   \   000083   A3           INC     DPTR
   \   000084   A3           INC     DPTR
   \   000085   A3           INC     DPTR
   \   000086   A3           INC     DPTR
   \   000087   A3           INC     DPTR
   \   000088   A3           INC     DPTR
   \   000089   7400         MOV     A,#0x0
   \   00008B   F0           MOVX    @DPTR,A
   \   00008C   A3           INC     DPTR
   \   00008D   7400         MOV     A,#0x0
   \   00008F   F0           MOVX    @DPTR,A
    155          
    156                // Does the timer list already exist
    157                if ( timerHead == NULL )
   \   000090   90....       MOV     DPTR,#timerHead
   \   000093   E0           MOVX    A,@DPTR
   \   000094   F8           MOV     R0,A
   \   000095   A3           INC     DPTR
   \   000096   E0           MOVX    A,@DPTR
   \   000097   F9           MOV     R1,A
   \   000098   E8           MOV     A,R0
   \   000099   49           ORL     A,R1
   \   00009A   700A         JNZ     ??osalAddTimer_3
    158                {
    159                  // Start task list
    160                  timerHead = newTimer;
   \   00009C   90....       MOV     DPTR,#timerHead
   \   00009F   EA           MOV     A,R2
   \   0000A0   F0           MOVX    @DPTR,A
   \   0000A1   A3           INC     DPTR
   \   0000A2   EB           MOV     A,R3
   \   0000A3   F0           MOVX    @DPTR,A
   \   0000A4   802F         SJMP    ??osalAddTimer_1
    161                }
    162                else
    163                {
    164                  // Add it to the end of the timer list
    165                  srchTimer = timerHead;
   \                     ??osalAddTimer_3:
   \   0000A6   90....       MOV     DPTR,#timerHead
   \   0000A9   E0           MOVX    A,@DPTR
   \   0000AA   F8           MOV     R0,A
   \   0000AB   A3           INC     DPTR
   \   0000AC   E0           MOVX    A,@DPTR
   \   0000AD   F9           MOV     R1,A
   \   0000AE   8009         SJMP    ??osalAddTimer_4
    166          
    167                  // Stop at the last record
    168                  while ( srchTimer->next )
    169                    srchTimer = srchTimer->next;
   \                     ??osalAddTimer_5:
   \   0000B0   8882         MOV     DPL,R0
   \   0000B2   8983         MOV     DPH,R1
   \   0000B4   E0           MOVX    A,@DPTR
   \   0000B5   F8           MOV     R0,A
   \   0000B6   A3           INC     DPTR
   \   0000B7   E0           MOVX    A,@DPTR
   \   0000B8   F9           MOV     R1,A
   \                     ??osalAddTimer_4:
   \   0000B9   8882         MOV     DPL,R0
   \   0000BB   8983         MOV     DPH,R1
   \   0000BD   E0           MOVX    A,@DPTR
   \   0000BE   FC           MOV     R4,A
   \   0000BF   A3           INC     DPTR
   \   0000C0   E0           MOVX    A,@DPTR
   \   0000C1   FD           MOV     R5,A
   \   0000C2   EC           MOV     A,R4
   \   0000C3   4D           ORL     A,R5
   \   0000C4   70EA         JNZ     ??osalAddTimer_5
    170          
    171                  // Add to the list
    172                  srchTimer->next = newTimer;
   \   0000C6   8882         MOV     DPL,R0
   \   0000C8   8983         MOV     DPH,R1
   \   0000CA   EA           MOV     A,R2
   \   0000CB   F0           MOVX    @DPTR,A
   \   0000CC   A3           INC     DPTR
   \   0000CD   EB           MOV     A,R3
   \   0000CE   F0           MOVX    @DPTR,A
    173                }
    174          
    175                return ( newTimer );
   \   0000CF   8004         SJMP    ??osalAddTimer_1
    176              }
    177              else
    178                return ( (osalTimerRec_t *)NULL );
   \                     ??osalAddTimer_2:
   \   0000D1   7A00         MOV     R2,#0x0
   \   0000D3   7B00         MOV     R3,#0x0
   \                     ??osalAddTimer_1:
   \   0000D5   7F06         MOV     R7,#0x6
   \   0000D7   02....       LJMP    ?BANKED_LEAVE_XDATA
    179            }
    180          }
    181          
    182          /*********************************************************************
    183           * @fn      osalFindTimer
    184           *
    185           * @brief   Find a timer in a timer list.
    186           *          Ints must be disabled.
    187           *
    188           * @param   task_id
    189           * @param   event_flag
    190           *
    191           * @return  osalTimerRec_t *
    192           */

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    193          osalTimerRec_t *osalFindTimer( uint8 task_id, uint16 event_flag )
   \                     osalFindTimer:
    194          {
   \   000000   C082         PUSH    DPL
   \   000002   C083         PUSH    DPH
   \   000004                ; Saved register size: 2
   \   000004                ; Auto size: 0
    195            osalTimerRec_t *srchTimer;
    196          
    197            // Head of the timer list
    198            srchTimer = timerHead;
   \   000004   90....       MOV     DPTR,#timerHead
   \   000007   E0           MOVX    A,@DPTR
   \   000008   FC           MOV     R4,A
   \   000009   A3           INC     DPTR
   \   00000A   E0           MOVX    A,@DPTR
   \   00000B   FD           MOV     R5,A
   \   00000C   8009         SJMP    ??osalFindTimer_0
    199          
    200            // Stop when found or at the end
    201            while ( srchTimer )
    202            {
    203              if ( srchTimer->event_flag == event_flag &&
    204                   srchTimer->task_id == task_id )
    205                break;
    206          
    207              // Not this one, check another
    208              srchTimer = srchTimer->next;
   \                     ??osalFindTimer_1:
   \   00000E   8C82         MOV     DPL,R4
   \   000010   8D83         MOV     DPH,R5
   \   000012   E0           MOVX    A,@DPTR
   \   000013   FC           MOV     R4,A
   \   000014   A3           INC     DPTR
   \   000015   E0           MOVX    A,@DPTR
   \   000016   FD           MOV     R5,A
   \                     ??osalFindTimer_0:
   \   000017   EC           MOV     A,R4
   \   000018   4D           ORL     A,R5
   \   000019   601F         JZ      ??osalFindTimer_2
   \   00001B   8C82         MOV     DPL,R4
   \   00001D   8D83         MOV     DPH,R5
   \   00001F   A3           INC     DPTR
   \   000020   A3           INC     DPTR
   \   000021   A3           INC     DPTR
   \   000022   A3           INC     DPTR
   \   000023   E0           MOVX    A,@DPTR
   \   000024   6A           XRL     A,R2
   \   000025   7003         JNZ     ??osalFindTimer_3
   \   000027   A3           INC     DPTR
   \   000028   E0           MOVX    A,@DPTR
   \   000029   6B           XRL     A,R3
   \                     ??osalFindTimer_3:
   \   00002A   70E2         JNZ     ??osalFindTimer_1
   \   00002C   8C82         MOV     DPL,R4
   \   00002E   8D83         MOV     DPH,R5
   \   000030   A3           INC     DPTR
   \   000031   A3           INC     DPTR
   \   000032   A3           INC     DPTR
   \   000033   A3           INC     DPTR
   \   000034   A3           INC     DPTR
   \   000035   A3           INC     DPTR
   \   000036   E0           MOVX    A,@DPTR
   \   000037   69           XRL     A,R1
   \   000038   70D4         JNZ     ??osalFindTimer_1
    209            }
    210          
    211            return ( srchTimer );
   \                     ??osalFindTimer_2:
   \   00003A   EC           MOV     A,R4
   \   00003B   FA           MOV     R2,A
   \   00003C   ED           MOV     A,R5
   \   00003D   FB           MOV     R3,A
   \   00003E   D083         POP     DPH
   \   000040   D082         POP     DPL
   \   000042   02....       LJMP    ?BRET
    212          }
    213          
    214          /*********************************************************************
    215           * @fn      osalDeleteTimer
    216           *
    217           * @brief   Delete a timer from a timer list.
    218           *
    219           * @param   table
    220           * @param   rmTimer
    221           *
    222           * @return  none
    223           */

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    224          void osalDeleteTimer( osalTimerRec_t *rmTimer )
   \                     osalDeleteTimer:
    225          {
   \   000000   C082         PUSH    DPL
   \   000002   C083         PUSH    DPH
   \   000004                ; Saved register size: 2
   \   000004                ; Auto size: 0
    226            // Does the timer list really exist
    227            if ( rmTimer )
   \   000004   EA           MOV     A,R2
   \   000005   4B           ORL     A,R3
   \   000006   600F         JZ      ??osalDeleteTimer_0
    228            {
    229              // Clear the event flag and osalTimerUpdate() will delete 
    230              // the timer from the list.
    231              rmTimer->event_flag = 0;
   \   000008   8A82         MOV     DPL,R2
   \   00000A   8B83         MOV     DPH,R3
   \   00000C   A3           INC     DPTR
   \   00000D   A3           INC     DPTR
   \   00000E   A3           INC     DPTR
   \   00000F   A3           INC     DPTR
   \   000010   7400         MOV     A,#0x0
   \   000012   F0           MOVX    @DPTR,A
   \   000013   A3           INC     DPTR
   \   000014   7400         MOV     A,#0x0
   \   000016   F0           MOVX    @DPTR,A
    232            }
    233          }
   \                     ??osalDeleteTimer_0:
   \   000017   D083         POP     DPH
   \   000019   D082         POP     DPL
   \   00001B   02....       LJMP    ?BRET
    234          
    235          /*********************************************************************
    236           * @fn      osal_start_timerEx
    237           *
    238           * @brief
    239           *
    240           *   This function is called to start a timer to expire in n mSecs.
    241           *   When the timer expires, the calling task will get the specified event.
    242           *
    243           * @param   uint8 taskID - task id to set timer for
    244           * @param   uint16 event_id - event to be notified with
    245           * @param   UNINT16 timeout_value - in milliseconds.
    246           *
    247           * @return  SUCCESS, or NO_TIMER_AVAIL.
    248           */

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    249          uint8 osal_start_timerEx( uint8 taskID, uint16 event_id, uint16 timeout_value )
   \                     osal_start_timerEx:
    250          {
   \   000000   74F6         MOV     A,#-0xa
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 10
   \   000005                ; Auto size: 0
   \   000005   E9           MOV     A,R1
   \   000006   FE           MOV     R6,A
    251            halIntState_t intState;
    252            osalTimerRec_t *newTimer;
    253          
    254            HAL_ENTER_CRITICAL_SECTION( intState );  // Hold off interrupts.
   \   000007   A2AF         MOV     C,0xa8.7
   \   000009   E4           CLR     A
   \   00000A   33           RLC     A
   \   00000B   FF           MOV     R7,A
   \   00000C   C2AF         CLR     0xa8.7
    255          
    256            // Add timer
    257            newTimer = osalAddTimer( taskID, event_id, timeout_value );
   \   00000E                ; Setup parameters for call to function osalAddTimer
   \   00000E   EE           MOV     A,R6
   \   00000F   F9           MOV     R1,A
   \   000010   12....       LCALL   ??osalAddTimer?relay
   \   000013   8A..         MOV     ?V0 + 0,R2
   \   000015   8B..         MOV     ?V0 + 1,R3
   \   000017   A8..         MOV     R0,?V0 + 0
   \   000019   A9..         MOV     R1,?V0 + 1
    258          
    259            HAL_EXIT_CRITICAL_SECTION( intState );   // Re-enable interrupts.
   \   00001B   EF           MOV     A,R7
   \   00001C   A2E0         MOV     C,0xE0 /* A   */.0
   \   00001E   92AF         MOV     0xa8.7,C
    260          
    261            return ( (newTimer != NULL) ? SUCCESS : NO_TIMER_AVAIL );
   \   000020   E5..         MOV     A,?V0 + 0
   \   000022   49           ORL     A,R1
   \   000023   6004         JZ      ??osal_start_timerEx_0
   \   000025   7900         MOV     R1,#0x0
   \   000027   8002         SJMP    ??osal_start_timerEx_1
   \                     ??osal_start_timerEx_0:
   \   000029   7908         MOV     R1,#0x8
   \                     ??osal_start_timerEx_1:
   \   00002B   7F02         MOV     R7,#0x2
   \   00002D   02....       LJMP    ?BANKED_LEAVE_XDATA
   \   000030                REQUIRE _A_IEN0
    262          }
    263          
    264          /*********************************************************************
    265           * @fn      osal_start_reload_timer
    266           *
    267           * @brief
    268           *
    269           *   This function is called to start a timer to expire in n mSecs.
    270           *   When the timer expires, the calling task will get the specified event
    271           *   and the timer will be reloaded with the timeout value.
    272           *
    273           * @param   uint8 taskID - task id to set timer for
    274           * @param   uint16 event_id - event to be notified with
    275           * @param   UNINT16 timeout_value - in milliseconds.
    276           *
    277           * @return  SUCCESS, or NO_TIMER_AVAIL.
    278           */

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    279          uint8 osal_start_reload_timer( uint8 taskID, uint16 event_id, uint16 timeout_value )
   \                     osal_start_reload_timer:
    280          {
   \   000000   74F4         MOV     A,#-0xc
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 12
   \   000005                ; Auto size: 0
   \   000005   89..         MOV     ?V0 + 0,R1
   \   000007   EC           MOV     A,R4
   \   000008   FE           MOV     R6,A
   \   000009   ED           MOV     A,R5
   \   00000A   FF           MOV     R7,A
    281            halIntState_t intState;
    282            osalTimerRec_t *newTimer;
    283          
    284            HAL_ENTER_CRITICAL_SECTION( intState );  // Hold off interrupts.
   \   00000B   A2AF         MOV     C,0xa8.7
   \   00000D   E4           CLR     A
   \   00000E   33           RLC     A
   \   00000F   F5..         MOV     ?V0 + 1,A
   \   000011   C2AF         CLR     0xa8.7
    285          
    286            // Add timer
    287            newTimer = osalAddTimer( taskID, event_id, timeout_value );
   \   000013                ; Setup parameters for call to function osalAddTimer
   \   000013   EE           MOV     A,R6
   \   000014   FC           MOV     R4,A
   \   000015   EF           MOV     A,R7
   \   000016   FD           MOV     R5,A
   \   000017   A9..         MOV     R1,?V0 + 0
   \   000019   12....       LCALL   ??osalAddTimer?relay
   \   00001C   8A..         MOV     ?V0 + 2,R2
   \   00001E   8B..         MOV     ?V0 + 3,R3
   \   000020   A8..         MOV     R0,?V0 + 2
   \   000022   A9..         MOV     R1,?V0 + 3
    288            if ( newTimer )
   \   000024   E8           MOV     A,R0
   \   000025   49           ORL     A,R1
   \   000026   6010         JZ      ??osal_start_reload_timer_0
    289            {
    290              // Load the reload timeout value
    291              newTimer->reloadTimeout = timeout_value;
   \   000028   8882         MOV     DPL,R0
   \   00002A   8983         MOV     DPH,R1
   \   00002C   A3           INC     DPTR
   \   00002D   A3           INC     DPTR
   \   00002E   A3           INC     DPTR
   \   00002F   A3           INC     DPTR
   \   000030   A3           INC     DPTR
   \   000031   A3           INC     DPTR
   \   000032   A3           INC     DPTR
   \   000033   EE           MOV     A,R6
   \   000034   F0           MOVX    @DPTR,A
   \   000035   A3           INC     DPTR
   \   000036   EF           MOV     A,R7
   \   000037   F0           MOVX    @DPTR,A
    292            }
    293          
    294            HAL_EXIT_CRITICAL_SECTION( intState );   // Re-enable interrupts.
   \                     ??osal_start_reload_timer_0:
   \   000038   E5..         MOV     A,?V0 + 1
   \   00003A   A2E0         MOV     C,0xE0 /* A   */.0
   \   00003C   92AF         MOV     0xa8.7,C
    295          
    296            return ( (newTimer != NULL) ? SUCCESS : NO_TIMER_AVAIL );
   \   00003E   E8           MOV     A,R0
   \   00003F   49           ORL     A,R1
   \   000040   6004         JZ      ??osal_start_reload_timer_1
   \   000042   7900         MOV     R1,#0x0
   \   000044   8002         SJMP    ??osal_start_reload_timer_2
   \                     ??osal_start_reload_timer_1:
   \   000046   7908         MOV     R1,#0x8
   \                     ??osal_start_reload_timer_2:
   \   000048   7F04         MOV     R7,#0x4
   \   00004A   02....       LJMP    ?BANKED_LEAVE_XDATA
   \   00004D                REQUIRE _A_IEN0
    297          }
    298          
    299          /*********************************************************************
    300           * @fn      osal_stop_timerEx
    301           *
    302           * @brief
    303           *
    304           *   This function is called to stop a timer that has already been started.
    305           *   If ZSUCCESS, the function will cancel the timer and prevent the event
    306           *   associated with the timer from being set for the calling task.
    307           *
    308           * @param   uint8 task_id - task id of timer to stop
    309           * @param   uint16 event_id - identifier of the timer that is to be stopped
    310           *
    311           * @return  SUCCESS or INVALID_EVENT_ID
    312           */

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    313          uint8 osal_stop_timerEx( uint8 task_id, uint16 event_id )
   \                     osal_stop_timerEx:
    314          {
   \   000000   74F4         MOV     A,#-0xc
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 12
   \   000005                ; Auto size: 0
   \   000005   89..         MOV     ?V0 + 0,R1
    315            halIntState_t intState;
    316            osalTimerRec_t *foundTimer;
    317          
    318            HAL_ENTER_CRITICAL_SECTION( intState );  // Hold off interrupts.
   \   000007   A2AF         MOV     C,0xa8.7
   \   000009   E4           CLR     A
   \   00000A   33           RLC     A
   \   00000B   F5..         MOV     ?V0 + 1,A
   \   00000D   C2AF         CLR     0xa8.7
    319          
    320            // Find the timer to stop
    321            foundTimer = osalFindTimer( task_id, event_id );
   \   00000F                ; Setup parameters for call to function osalFindTimer
   \   00000F   A9..         MOV     R1,?V0 + 0
   \   000011   12....       LCALL   ??osalFindTimer?relay
   \   000014   8A..         MOV     ?V0 + 2,R2
   \   000016   8B..         MOV     ?V0 + 3,R3
   \   000018   AE..         MOV     R6,?V0 + 2
   \   00001A   AF..         MOV     R7,?V0 + 3
    322            if ( foundTimer )
   \   00001C   EE           MOV     A,R6
   \   00001D   4F           ORL     A,R7
   \   00001E   6007         JZ      ??osal_stop_timerEx_0
    323            {
    324              osalDeleteTimer( foundTimer );
   \   000020                ; Setup parameters for call to function osalDeleteTimer
   \   000020   EE           MOV     A,R6
   \   000021   FA           MOV     R2,A
   \   000022   EF           MOV     A,R7
   \   000023   FB           MOV     R3,A
   \   000024   12....       LCALL   ??osalDeleteTimer?relay
    325            }
    326          
    327            HAL_EXIT_CRITICAL_SECTION( intState );   // Re-enable interrupts.
   \                     ??osal_stop_timerEx_0:
   \   000027   E5..         MOV     A,?V0 + 1
   \   000029   A2E0         MOV     C,0xE0 /* A   */.0
   \   00002B   92AF         MOV     0xa8.7,C
    328          
    329            return ( (foundTimer != NULL) ? SUCCESS : INVALID_EVENT_ID );
   \   00002D   EE           MOV     A,R6
   \   00002E   4F           ORL     A,R7
   \   00002F   6004         JZ      ??osal_stop_timerEx_1
   \   000031   7900         MOV     R1,#0x0
   \   000033   8002         SJMP    ??osal_stop_timerEx_2
   \                     ??osal_stop_timerEx_1:
   \   000035   7906         MOV     R1,#0x6
   \                     ??osal_stop_timerEx_2:
   \   000037   7F04         MOV     R7,#0x4
   \   000039   02....       LJMP    ?BANKED_LEAVE_XDATA
   \   00003C                REQUIRE _A_IEN0
    330          }
    331          
    332          /*********************************************************************
    333           * @fn      osal_get_timeoutEx
    334           *
    335           * @brief
    336           *
    337           * @param   uint8 task_id - task id of timer to check
    338           * @param   uint16 event_id - identifier of timer to be checked
    339           *
    340           * @return  Return the timer's tick count if found, zero otherwise.
    341           */

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    342          uint16 osal_get_timeoutEx( uint8 task_id, uint16 event_id )
   \                     osal_get_timeoutEx:
    343          {
   \   000000   74F4         MOV     A,#-0xc
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 12
   \   000005                ; Auto size: 0
   \   000005   89..         MOV     ?V0 + 0,R1
    344            halIntState_t intState;
    345            uint16 rtrn = 0;
   \   000007   7E00         MOV     R6,#0x0
   \   000009   7F00         MOV     R7,#0x0
    346            osalTimerRec_t *tmr;
    347          
    348            HAL_ENTER_CRITICAL_SECTION( intState );  // Hold off interrupts.
   \   00000B   A2AF         MOV     C,0xa8.7
   \   00000D   E4           CLR     A
   \   00000E   33           RLC     A
   \   00000F   F5..         MOV     ?V0 + 1,A
   \   000011   C2AF         CLR     0xa8.7
    349          
    350            tmr = osalFindTimer( task_id, event_id );
   \   000013                ; Setup parameters for call to function osalFindTimer
   \   000013   A9..         MOV     R1,?V0 + 0
   \   000015   12....       LCALL   ??osalFindTimer?relay
   \   000018   8A..         MOV     ?V0 + 2,R2
   \   00001A   8B..         MOV     ?V0 + 3,R3
   \   00001C   85..82       MOV     DPL,?V0 + 2
   \   00001F   85..83       MOV     DPH,?V0 + 3
    351          
    352            if ( tmr )
   \   000022   E582         MOV     A,DPL
   \   000024   4583         ORL     A,DPH
   \   000026   6007         JZ      ??osal_get_timeoutEx_0
    353            {
    354              rtrn = tmr->timeout;
   \   000028   A3           INC     DPTR
   \   000029   A3           INC     DPTR
   \   00002A   E0           MOVX    A,@DPTR
   \   00002B   FE           MOV     R6,A
   \   00002C   A3           INC     DPTR
   \   00002D   E0           MOVX    A,@DPTR
   \   00002E   FF           MOV     R7,A
    355            }
    356          
    357            HAL_EXIT_CRITICAL_SECTION( intState );   // Re-enable interrupts.
   \                     ??osal_get_timeoutEx_0:
   \   00002F   E5..         MOV     A,?V0 + 1
   \   000031   A2E0         MOV     C,0xE0 /* A   */.0
   \   000033   92AF         MOV     0xa8.7,C
    358          
    359            return rtrn;
   \   000035   EE           MOV     A,R6
   \   000036   FA           MOV     R2,A
   \   000037   EF           MOV     A,R7
   \   000038   FB           MOV     R3,A
   \   000039   7F04         MOV     R7,#0x4
   \   00003B   02....       LJMP    ?BANKED_LEAVE_XDATA
   \   00003E                REQUIRE _A_IEN0
    360          }
    361          
    362          /*********************************************************************
    363           * @fn      osal_timer_num_active
    364           *
    365           * @brief
    366           *
    367           *   This function counts the number of active timers.
    368           *
    369           * @return  uint8 - number of timers
    370           */

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    371          uint8 osal_timer_num_active( void )
   \                     osal_timer_num_active:
    372          {
   \   000000   C082         PUSH    DPL
   \   000002   C083         PUSH    DPH
   \   000004                ; Saved register size: 2
   \   000004                ; Auto size: 0
    373            halIntState_t intState;
    374            uint8 num_timers = 0;
   \   000004   7900         MOV     R1,#0x0
    375            osalTimerRec_t *srchTimer;
    376          
    377            HAL_ENTER_CRITICAL_SECTION( intState );  // Hold off interrupts.
   \   000006   A2AF         MOV     C,0xa8.7
   \   000008   E4           CLR     A
   \   000009   33           RLC     A
   \   00000A   F8           MOV     R0,A
   \   00000B   C2AF         CLR     0xa8.7
    378          
    379            // Head of the timer list
    380            srchTimer = timerHead;
   \   00000D   90....       MOV     DPTR,#timerHead
   \   000010   E0           MOVX    A,@DPTR
   \   000011   FA           MOV     R2,A
   \   000012   A3           INC     DPTR
   \   000013   E0           MOVX    A,@DPTR
   \   000014   FB           MOV     R3,A
   \   000015   8A82         MOV     DPL,R2
   \   000017   8B83         MOV     DPH,R3
   \   000019   800A         SJMP    ??osal_timer_num_active_0
    381          
    382            // Count timers in the list
    383            while ( srchTimer != NULL )
    384            {
    385              num_timers++;
   \                     ??osal_timer_num_active_1:
   \   00001B   09           INC     R1
    386              srchTimer = srchTimer->next;
   \   00001C   E0           MOVX    A,@DPTR
   \   00001D   FA           MOV     R2,A
   \   00001E   A3           INC     DPTR
   \   00001F   E0           MOVX    A,@DPTR
   \   000020   FB           MOV     R3,A
   \   000021   8A82         MOV     DPL,R2
   \   000023   8B83         MOV     DPH,R3
    387            }
   \                     ??osal_timer_num_active_0:
   \   000025   E582         MOV     A,DPL
   \   000027   4583         ORL     A,DPH
   \   000029   70F0         JNZ     ??osal_timer_num_active_1
    388          
    389            HAL_EXIT_CRITICAL_SECTION( intState );   // Re-enable interrupts.
   \   00002B   E8           MOV     A,R0
   \   00002C   A2E0         MOV     C,0xE0 /* A   */.0
   \   00002E   92AF         MOV     0xa8.7,C
    390          
    391            return num_timers;
   \   000030   D083         POP     DPH
   \   000032   D082         POP     DPL
   \   000034   02....       LJMP    ?BRET
   \   000037                REQUIRE _A_IEN0
    392          }
    393          
    394          /*********************************************************************
    395           * @fn      osalTimerUpdate
    396           *
    397           * @brief   Update the timer structures for a timer tick.
    398           *
    399           * @param   none
    400           *
    401           * @return  none
    402           *********************************************************************/

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    403          void osalTimerUpdate( uint16 updateTime )
   \                     osalTimerUpdate:
    404          {
   \   000000   74EC         MOV     A,#-0x14
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 20
   \   000005                ; Auto size: 0
   \   000005   8A..         MOV     ?V0 + 2,R2
   \   000007   8B..         MOV     ?V0 + 3,R3
    405            halIntState_t intState;
    406            osalTimerRec_t *srchTimer;
    407            osalTimerRec_t *prevTimer;
    408          
    409            HAL_ENTER_CRITICAL_SECTION( intState );  // Hold off interrupts.
   \   000009   A2AF         MOV     C,0xa8.7
   \   00000B   E4           CLR     A
   \   00000C   33           RLC     A
   \   00000D   F5..         MOV     ?V0 + 6,A
   \   00000F   C2AF         CLR     0xa8.7
    410            // Update the system time
    411            osal_systemClock += updateTime;
   \   000011   85....       MOV     ?V0 + 8,?V0 + 2
   \   000014   85....       MOV     ?V0 + 9,?V0 + 3
   \   000017   E4           CLR     A
   \   000018   F5..         MOV     ?V0 + 10,A
   \   00001A   F5..         MOV     ?V0 + 11,A
   \   00001C   90....       MOV     DPTR,#osal_systemClock
   \   00001F   78..         MOV     R0,#?V0 + 8
   \   000021   12....       LCALL   ?L_ADD_TO_X
    412            HAL_EXIT_CRITICAL_SECTION( intState );   // Re-enable interrupts.
   \   000024   E5..         MOV     A,?V0 + 6
   \   000026   A2E0         MOV     C,0xE0 /* A   */.0
   \   000028   92AF         MOV     0xa8.7,C
    413          
    414            // Look for open timer slot
    415            if ( timerHead != NULL )
   \   00002A   90....       MOV     DPTR,#timerHead
   \   00002D   E0           MOVX    A,@DPTR
   \   00002E   F8           MOV     R0,A
   \   00002F   A3           INC     DPTR
   \   000030   E0           MOVX    A,@DPTR
   \   000031   F9           MOV     R1,A
   \   000032   E8           MOV     A,R0
   \   000033   49           ORL     A,R1
   \   000034   7003         JNZ     $+5
   \   000036   02....       LJMP    ??osalTimerUpdate_0 & 0xFFFF
    416            {
    417              // Add it to the end of the timer list
    418              srchTimer = timerHead;
   \   000039   90....       MOV     DPTR,#timerHead
   \   00003C   E0           MOVX    A,@DPTR
   \   00003D   F5..         MOV     ?V0 + 4,A
   \   00003F   A3           INC     DPTR
   \   000040   E0           MOVX    A,@DPTR
   \   000041   F5..         MOV     ?V0 + 5,A
    419              prevTimer = (void *)NULL;
   \   000043   75..00       MOV     ?V0 + 0,#0x0
   \   000046   75..00       MOV     ?V0 + 1,#0x0
   \   000049   8052         SJMP    ??osalTimerUpdate_1
    420          
    421              // Look for open timer slot
    422              while ( srchTimer )
    423              {
    424                osalTimerRec_t *freeTimer = NULL;
    425               
    426                HAL_ENTER_CRITICAL_SECTION( intState );  // Hold off interrupts.
    427                
    428                if (srchTimer->timeout <= updateTime)
    429                {
    430                  srchTimer->timeout = 0;
    431                }
    432                else
    433                {
    434                  srchTimer->timeout = srchTimer->timeout - updateTime;
    435                }
    436                
    437                // Check for reloading
    438                if ( (srchTimer->timeout == 0) && (srchTimer->reloadTimeout) && (srchTimer->event_flag) )
    439                {
    440                  // Notify the task of a timeout
    441                  osal_set_event( srchTimer->task_id, srchTimer->event_flag );
    442                  
    443                  // Reload the timer timeout value
    444                  srchTimer->timeout = srchTimer->reloadTimeout;
    445                }
    446                
    447                // When timeout or delete (event_flag == 0)
    448                if ( srchTimer->timeout == 0 || srchTimer->event_flag == 0 )
    449                {
    450                  // Take out of list
    451                  if ( prevTimer == NULL )
    452                    timerHead = srchTimer->next;
    453                  else
    454                    prevTimer->next = srchTimer->next;
    455          
    456                  // Setup to free memory
    457                  freeTimer = srchTimer;
    458          
    459                  // Next
    460                  srchTimer = srchTimer->next;
    461                }
    462                else
    463                {
    464                  // Get next
    465                  prevTimer = srchTimer;
   \                     ??osalTimerUpdate_2:
   \   00004B   A8..         MOV     R0,?V0 + 4
   \   00004D   A9..         MOV     R1,?V0 + 5
   \   00004F   88..         MOV     ?V0 + 0,R0
   \   000051   89..         MOV     ?V0 + 1,R1
    466                  srchTimer = srchTimer->next;
   \   000053   85..82       MOV     DPL,?V0 + 4
   \   000056   85..83       MOV     DPH,?V0 + 5
   \   000059   E0           MOVX    A,@DPTR
   \   00005A   F5..         MOV     ?V0 + 4,A
   \   00005C   A3           INC     DPTR
   \   00005D   E0           MOVX    A,@DPTR
   \   00005E   F5..         MOV     ?V0 + 5,A
    467                }
    468                
    469                HAL_EXIT_CRITICAL_SECTION( intState );   // Re-enable interrupts.
   \                     ??osalTimerUpdate_3:
   \   000060   E5..         MOV     A,?V0 + 6
   \   000062   A2E0         MOV     C,0xE0 /* A   */.0
   \   000064   92AF         MOV     0xa8.7,C
    470                
    471                if ( freeTimer )
   \   000066   EE           MOV     A,R6
   \   000067   4F           ORL     A,R7
   \   000068   6033         JZ      ??osalTimerUpdate_1
    472                {
    473                  if ( freeTimer->timeout == 0 )
   \   00006A   8E82         MOV     DPL,R6
   \   00006C   8F83         MOV     DPH,R7
   \   00006E   A3           INC     DPTR
   \   00006F   A3           INC     DPTR
   \   000070   E0           MOVX    A,@DPTR
   \   000071   F8           MOV     R0,A
   \   000072   A3           INC     DPTR
   \   000073   E0           MOVX    A,@DPTR
   \   000074   F9           MOV     R1,A
   \   000075   E8           MOV     A,R0
   \   000076   49           ORL     A,R1
   \   000077   701D         JNZ     ??osalTimerUpdate_4
    474                  {
    475                    osal_set_event( freeTimer->task_id, freeTimer->event_flag );
   \   000079                ; Setup parameters for call to function osal_set_event
   \   000079   8E82         MOV     DPL,R6
   \   00007B   8F83         MOV     DPH,R7
   \   00007D   A3           INC     DPTR
   \   00007E   A3           INC     DPTR
   \   00007F   A3           INC     DPTR
   \   000080   A3           INC     DPTR
   \   000081   E0           MOVX    A,@DPTR
   \   000082   FA           MOV     R2,A
   \   000083   A3           INC     DPTR
   \   000084   E0           MOVX    A,@DPTR
   \   000085   FB           MOV     R3,A
   \   000086   8E82         MOV     DPL,R6
   \   000088   8F83         MOV     DPH,R7
   \   00008A   A3           INC     DPTR
   \   00008B   A3           INC     DPTR
   \   00008C   A3           INC     DPTR
   \   00008D   A3           INC     DPTR
   \   00008E   A3           INC     DPTR
   \   00008F   A3           INC     DPTR
   \   000090   E0           MOVX    A,@DPTR
   \   000091   F9           MOV     R1,A
   \   000092   12....       LCALL   ??osal_set_event?relay
   \   000095   E9           MOV     A,R1
    476                  }
    477                  osal_mem_free( freeTimer );
   \                     ??osalTimerUpdate_4:
   \   000096                ; Setup parameters for call to function osal_mem_free
   \   000096   EE           MOV     A,R6
   \   000097   FA           MOV     R2,A
   \   000098   EF           MOV     A,R7
   \   000099   FB           MOV     R3,A
   \   00009A   12....       LCALL   ??osal_mem_free?relay
    478                }
   \                     ??osalTimerUpdate_1:
   \   00009D   E5..         MOV     A,?V0 + 4
   \   00009F   45..         ORL     A,?V0 + 5
   \   0000A1   7003         JNZ     $+5
   \   0000A3   02....       LJMP    ??osalTimerUpdate_0 & 0xFFFF
   \   0000A6   7E00         MOV     R6,#0x0
   \   0000A8   7F00         MOV     R7,#0x0
   \   0000AA   A2AF         MOV     C,0xa8.7
   \   0000AC   E4           CLR     A
   \   0000AD   33           RLC     A
   \   0000AE   F5..         MOV     ?V0 + 6,A
   \   0000B0   C2AF         CLR     0xa8.7
   \   0000B2   85..82       MOV     DPL,?V0 + 4
   \   0000B5   85..83       MOV     DPH,?V0 + 5
   \   0000B8   A3           INC     DPTR
   \   0000B9   A3           INC     DPTR
   \   0000BA   E0           MOVX    A,@DPTR
   \   0000BB   F8           MOV     R0,A
   \   0000BC   A3           INC     DPTR
   \   0000BD   E0           MOVX    A,@DPTR
   \   0000BE   F9           MOV     R1,A
   \   0000BF   C3           CLR     C
   \   0000C0   E5..         MOV     A,?V0 + 2
   \   0000C2   98           SUBB    A,R0
   \   0000C3   E5..         MOV     A,?V0 + 3
   \   0000C5   99           SUBB    A,R1
   \   0000C6   4011         JC      ??osalTimerUpdate_5
   \   0000C8   85..82       MOV     DPL,?V0 + 4
   \   0000CB   85..83       MOV     DPH,?V0 + 5
   \   0000CE   A3           INC     DPTR
   \   0000CF   A3           INC     DPTR
   \   0000D0   7400         MOV     A,#0x0
   \   0000D2   F0           MOVX    @DPTR,A
   \   0000D3   A3           INC     DPTR
   \   0000D4   7400         MOV     A,#0x0
   \   0000D6   F0           MOVX    @DPTR,A
   \   0000D7   8012         SJMP    ??osalTimerUpdate_6
   \                     ??osalTimerUpdate_5:
   \   0000D9   85..82       MOV     DPL,?V0 + 4
   \   0000DC   85..83       MOV     DPH,?V0 + 5
   \   0000DF   A3           INC     DPTR
   \   0000E0   A3           INC     DPTR
   \   0000E1   C3           CLR     C
   \   0000E2   E0           MOVX    A,@DPTR
   \   0000E3   95..         SUBB    A,?V0 + 2
   \   0000E5   F0           MOVX    @DPTR,A
   \   0000E6   A3           INC     DPTR
   \   0000E7   E0           MOVX    A,@DPTR
   \   0000E8   95..         SUBB    A,?V0 + 3
   \   0000EA   F0           MOVX    @DPTR,A
   \                     ??osalTimerUpdate_6:
   \   0000EB   85..82       MOV     DPL,?V0 + 4
   \   0000EE   85..83       MOV     DPH,?V0 + 5
   \   0000F1   A3           INC     DPTR
   \   0000F2   A3           INC     DPTR
   \   0000F3   E0           MOVX    A,@DPTR
   \   0000F4   F8           MOV     R0,A
   \   0000F5   A3           INC     DPTR
   \   0000F6   E0           MOVX    A,@DPTR
   \   0000F7   F9           MOV     R1,A
   \   0000F8   E8           MOV     A,R0
   \   0000F9   49           ORL     A,R1
   \   0000FA   7069         JNZ     ??osalTimerUpdate_7
   \   0000FC   85..82       MOV     DPL,?V0 + 4
   \   0000FF   85..83       MOV     DPH,?V0 + 5
   \   000102   A3           INC     DPTR
   \   000103   A3           INC     DPTR
   \   000104   A3           INC     DPTR
   \   000105   A3           INC     DPTR
   \   000106   A3           INC     DPTR
   \   000107   A3           INC     DPTR
   \   000108   A3           INC     DPTR
   \   000109   E0           MOVX    A,@DPTR
   \   00010A   F8           MOV     R0,A
   \   00010B   A3           INC     DPTR
   \   00010C   E0           MOVX    A,@DPTR
   \   00010D   F9           MOV     R1,A
   \   00010E   E8           MOV     A,R0
   \   00010F   49           ORL     A,R1
   \   000110   6053         JZ      ??osalTimerUpdate_7
   \   000112   85..82       MOV     DPL,?V0 + 4
   \   000115   85..83       MOV     DPH,?V0 + 5
   \   000118   A3           INC     DPTR
   \   000119   A3           INC     DPTR
   \   00011A   A3           INC     DPTR
   \   00011B   A3           INC     DPTR
   \   00011C   E0           MOVX    A,@DPTR
   \   00011D   F8           MOV     R0,A
   \   00011E   A3           INC     DPTR
   \   00011F   E0           MOVX    A,@DPTR
   \   000120   F9           MOV     R1,A
   \   000121   E8           MOV     A,R0
   \   000122   49           ORL     A,R1
   \   000123   6040         JZ      ??osalTimerUpdate_7
   \   000125                ; Setup parameters for call to function osal_set_event
   \   000125   85..82       MOV     DPL,?V0 + 4
   \   000128   85..83       MOV     DPH,?V0 + 5
   \   00012B   A3           INC     DPTR
   \   00012C   A3           INC     DPTR
   \   00012D   A3           INC     DPTR
   \   00012E   A3           INC     DPTR
   \   00012F   E0           MOVX    A,@DPTR
   \   000130   FA           MOV     R2,A
   \   000131   A3           INC     DPTR
   \   000132   E0           MOVX    A,@DPTR
   \   000133   FB           MOV     R3,A
   \   000134   85..82       MOV     DPL,?V0 + 4
   \   000137   85..83       MOV     DPH,?V0 + 5
   \   00013A   A3           INC     DPTR
   \   00013B   A3           INC     DPTR
   \   00013C   A3           INC     DPTR
   \   00013D   A3           INC     DPTR
   \   00013E   A3           INC     DPTR
   \   00013F   A3           INC     DPTR
   \   000140   E0           MOVX    A,@DPTR
   \   000141   F9           MOV     R1,A
   \   000142   12....       LCALL   ??osal_set_event?relay
   \   000145   E9           MOV     A,R1
   \   000146   85..82       MOV     DPL,?V0 + 4
   \   000149   85..83       MOV     DPH,?V0 + 5
   \   00014C   A3           INC     DPTR
   \   00014D   A3           INC     DPTR
   \   00014E   A3           INC     DPTR
   \   00014F   A3           INC     DPTR
   \   000150   A3           INC     DPTR
   \   000151   A3           INC     DPTR
   \   000152   A3           INC     DPTR
   \   000153   E0           MOVX    A,@DPTR
   \   000154   F8           MOV     R0,A
   \   000155   A3           INC     DPTR
   \   000156   E0           MOVX    A,@DPTR
   \   000157   F9           MOV     R1,A
   \   000158   85..82       MOV     DPL,?V0 + 4
   \   00015B   85..83       MOV     DPH,?V0 + 5
   \   00015E   A3           INC     DPTR
   \   00015F   A3           INC     DPTR
   \   000160   E8           MOV     A,R0
   \   000161   F0           MOVX    @DPTR,A
   \   000162   A3           INC     DPTR
   \   000163   E9           MOV     A,R1
   \   000164   F0           MOVX    @DPTR,A
   \                     ??osalTimerUpdate_7:
   \   000165   85..82       MOV     DPL,?V0 + 4
   \   000168   85..83       MOV     DPH,?V0 + 5
   \   00016B   A3           INC     DPTR
   \   00016C   A3           INC     DPTR
   \   00016D   E0           MOVX    A,@DPTR
   \   00016E   F8           MOV     R0,A
   \   00016F   A3           INC     DPTR
   \   000170   E0           MOVX    A,@DPTR
   \   000171   F9           MOV     R1,A
   \   000172   E8           MOV     A,R0
   \   000173   49           ORL     A,R1
   \   000174   6016         JZ      ??osalTimerUpdate_8
   \   000176   85..82       MOV     DPL,?V0 + 4
   \   000179   85..83       MOV     DPH,?V0 + 5
   \   00017C   A3           INC     DPTR
   \   00017D   A3           INC     DPTR
   \   00017E   A3           INC     DPTR
   \   00017F   A3           INC     DPTR
   \   000180   E0           MOVX    A,@DPTR
   \   000181   F8           MOV     R0,A
   \   000182   A3           INC     DPTR
   \   000183   E0           MOVX    A,@DPTR
   \   000184   F9           MOV     R1,A
   \   000185   E8           MOV     A,R0
   \   000186   49           ORL     A,R1
   \   000187   6003         JZ      $+5
   \   000189   02....       LJMP    ??osalTimerUpdate_2 & 0xFFFF
   \                     ??osalTimerUpdate_8:
   \   00018C   E5..         MOV     A,?V0 + 0
   \   00018E   45..         ORL     A,?V0 + 1
   \   000190   7015         JNZ     ??osalTimerUpdate_9
   \   000192   85..82       MOV     DPL,?V0 + 4
   \   000195   85..83       MOV     DPH,?V0 + 5
   \   000198   E0           MOVX    A,@DPTR
   \   000199   F8           MOV     R0,A
   \   00019A   A3           INC     DPTR
   \   00019B   E0           MOVX    A,@DPTR
   \   00019C   F9           MOV     R1,A
   \   00019D   90....       MOV     DPTR,#timerHead
   \   0001A0   E8           MOV     A,R0
   \   0001A1   F0           MOVX    @DPTR,A
   \   0001A2   A3           INC     DPTR
   \   0001A3   E9           MOV     A,R1
   \   0001A4   F0           MOVX    @DPTR,A
   \   0001A5   8016         SJMP    ??osalTimerUpdate_10
   \                     ??osalTimerUpdate_9:
   \   0001A7   85..82       MOV     DPL,?V0 + 4
   \   0001AA   85..83       MOV     DPH,?V0 + 5
   \   0001AD   E0           MOVX    A,@DPTR
   \   0001AE   F8           MOV     R0,A
   \   0001AF   A3           INC     DPTR
   \   0001B0   E0           MOVX    A,@DPTR
   \   0001B1   F9           MOV     R1,A
   \   0001B2   85..82       MOV     DPL,?V0 + 0
   \   0001B5   85..83       MOV     DPH,?V0 + 1
   \   0001B8   E8           MOV     A,R0
   \   0001B9   F0           MOVX    @DPTR,A
   \   0001BA   A3           INC     DPTR
   \   0001BB   E9           MOV     A,R1
   \   0001BC   F0           MOVX    @DPTR,A
   \                     ??osalTimerUpdate_10:
   \   0001BD   AE..         MOV     R6,?V0 + 4
   \   0001BF   AF..         MOV     R7,?V0 + 5
   \   0001C1   85..82       MOV     DPL,?V0 + 4
   \   0001C4   85..83       MOV     DPH,?V0 + 5
   \   0001C7   E0           MOVX    A,@DPTR
   \   0001C8   F5..         MOV     ?V0 + 4,A
   \   0001CA   A3           INC     DPTR
   \   0001CB   E0           MOVX    A,@DPTR
   \   0001CC   F5..         MOV     ?V0 + 5,A
   \   0001CE   02....       LJMP    ??osalTimerUpdate_3 & 0xFFFF
    479              }
    480            }
    481          }
   \                     ??osalTimerUpdate_0:
   \   0001D1   7F0C         MOV     R7,#0xc
   \   0001D3   02....       LJMP    ?BANKED_LEAVE_XDATA
   \   0001D6                REQUIRE _A_IEN0
    482          
    483          #ifdef POWER_SAVING
    484          /*********************************************************************
    485           * @fn      osal_adjust_timers
    486           *
    487           * @brief   Update the timer structures for elapsed ticks.
    488           *
    489           * @param   none
    490           *
    491           * @return  none
    492           *********************************************************************/
    493          void osal_adjust_timers( void )
    494          {
    495            uint16 eTime;
    496          
    497            if ( timerHead != NULL )
    498            {
    499              // Compute elapsed time (msec)
    500              eTime = TimerElapsed() /  TICK_COUNT;
    501          
    502              if ( eTime )
    503                osalTimerUpdate( eTime );
    504            }
    505          }
    506          
    507          /*********************************************************************
    508           * @fn      osal_next_timeout
    509           *
    510           * @brief
    511           *
    512           *   Search timer table to return the lowest timeout value. If the
    513           *   timer list is empty, then the returned timeout will be zero.
    514           *
    515           * @param   none
    516           *
    517           * @return  none
    518           *********************************************************************/
    519          uint16 osal_next_timeout( void )
    520          {
    521            uint16 nextTimeout;
    522            osalTimerRec_t *srchTimer;
    523          
    524            if ( timerHead != NULL )
    525            {
    526              // Head of the timer list
    527              srchTimer = timerHead;
    528              nextTimeout = OSAL_TIMERS_MAX_TIMEOUT;
    529          
    530              // Look for the next timeout timer
    531              while ( srchTimer != NULL )
    532              {
    533                if (srchTimer->timeout < nextTimeout)
    534                {
    535                  nextTimeout = srchTimer->timeout;
    536                }
    537                // Check next timer
    538                srchTimer = srchTimer->next;
    539              }
    540            }
    541            else
    542            {
    543              // No timers
    544              nextTimeout = 0;
    545            }
    546          
    547            return ( nextTimeout );
    548          }
    549          #endif // POWER_SAVING
    550          
    551          /*********************************************************************
    552           * @fn      osal_GetSystemClock()
    553           *
    554           * @brief   Read the local system clock.
    555           *
    556           * @param   none
    557           *
    558           * @return  local clock in milliseconds
    559           */

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    560          uint32 osal_GetSystemClock( void )
   \                     osal_GetSystemClock:
    561          {
   \   000000   C082         PUSH    DPL
   \   000002   C083         PUSH    DPH
   \   000004                ; Saved register size: 2
   \   000004                ; Auto size: 0
    562            return ( osal_systemClock );
   \   000004   90....       MOV     DPTR,#osal_systemClock
   \   000007   12....       LCALL   ?XLOAD_R2345
   \   00000A   D083         POP     DPH
   \   00000C   D082         POP     DPL
   \   00000E   02....       LJMP    ?BRET
    563          }

   \                                 In  segment XDATA_ROM_C, align 1
   \                     __Constant_0:
   \   000000   00000000     DD 0

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??osalTimerInit?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    osalTimerInit

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??osalAddTimer?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    osalAddTimer

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??osalFindTimer?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    osalFindTimer

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??osalDeleteTimer?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    osalDeleteTimer

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??osal_start_timerEx?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    osal_start_timerEx

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??osal_start_reload_timer?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    osal_start_reload_timer

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??osal_stop_timerEx?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    osal_stop_timerEx

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??osal_get_timeoutEx?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    osal_get_timeoutEx

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??osal_timer_num_active?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    osal_timer_num_active

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??osalTimerUpdate?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    osalTimerUpdate

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??osal_GetSystemClock?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    osal_GetSystemClock
    564          
    565          /*********************************************************************
    566          *********************************************************************/

   Maximum stack usage in bytes:

     Function                ISTACK PSTACK XSTACK
     --------                ------ ------ ------
     osalAddTimer                1      0     26
       -> osalFindTimer          0      0     28
       -> osal_mem_alloc         0      0     28
     osalDeleteTimer             2      0     12
     osalFindTimer               2      0     14
     osalTimerInit               2      0      0
     osalTimerUpdate             0      0     20
       -> osal_set_event         0      0     40
       -> osal_mem_free          0      0     40
       -> osal_set_event         0      0     40
     osal_GetSystemClock         2      0      0
     osal_get_timeoutEx          0      0     12
       -> osalFindTimer          0      0     24
     osal_start_reload_timer     0      0     12
       -> osalAddTimer           0      0     24
     osal_start_timerEx          0      0     10
       -> osalAddTimer           0      0     20
     osal_stop_timerEx           0      0     12
       -> osalFindTimer          0      0     24
       -> osalDeleteTimer        0      0     24
     osal_timer_num_active       2      0      0


   Segment part sizes:

     Function/Label                  Bytes
     --------------                  -----
     _A_IEN0                            1
     timerHead                          2
     osal_systemClock                   4
     osalTimerInit                     23
     osalAddTimer                     218
     osalFindTimer                     69
     osalDeleteTimer                   30
     osal_start_timerEx                48
     osal_start_reload_timer           77
     osal_stop_timerEx                 60
     osal_get_timeoutEx                62
     osal_timer_num_active             55
     osalTimerUpdate                  470
     osal_GetSystemClock               17
     __Constant_0                       4
     ??osalTimerInit?relay              6
     ??osalAddTimer?relay               6
     ??osalFindTimer?relay              6
     ??osalDeleteTimer?relay            6
     ??osal_start_timerEx?relay         6
     ??osal_start_reload_timer?relay    6
     ??osal_stop_timerEx?relay          6
     ??osal_get_timeoutEx?relay         6
     ??osal_timer_num_active?relay      6
     ??osalTimerUpdate?relay            6
     ??osal_GetSystemClock?relay        6

 
 1 129 bytes in segment BANKED_CODE
    66 bytes in segment BANK_RELAYS
     1 byte  in segment SFR_AN
     4 bytes in segment XDATA_ROM_C
     6 bytes in segment XDATA_Z
 
 1 195 bytes of CODE  memory
     0 bytes of CONST memory (+ 4 bytes shared)
     0 bytes of DATA  memory (+ 1 byte  shared)
     6 bytes of XDATA memory

Errors: none
Warnings: none
