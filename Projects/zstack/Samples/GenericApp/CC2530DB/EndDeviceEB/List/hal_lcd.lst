###############################################################################
#                                                                             #
# IAR C/C++ Compiler V8.10.3.10338/W32 for 8051         25/Aug/2018  23:10:07 #
# Copyright 2004-2011 IAR Systems AB.                                         #
#                                                                             #
#    Core               =  plain                                              #
#    Code model         =  banked                                             #
#    Data model         =  large                                              #
#    Calling convention =  xdata reentrant                                    #
#    Constant location  =  data_rom                                           #
#    Dptr setup         =  1,16                                               #
#    Source file        =  F:\work\iot-hardware\logger\logger\Components\hal\ #
#                          target\CC2530EB\hal_lcd.c                          #
#    Command line       =  -f F:\work\iot-hardware\logger\logger\Projects\zst #
#                          ack\Samples\GenericApp\CC2530DB\..\..\..\Tools\CC2 #
#                          530DB\f8wEndev.cfg (-DCPU32MHZ -DROOT=__near_func  #
#                          -DMAC_CFG_TX_DATA_MAX=3 -DMAC_CFG_TX_MAX=6         #
#                          -DMAC_CFG_RX_MAX=3) -f F:\work\iot-hardware\logger #
#                          \logger\Projects\zstack\Samples\GenericApp\CC2530D #
#                          B\..\..\..\Tools\CC2530DB\f8wConfig.cfg            #
#                          (-DZIGBEEPRO -DSECURE=0 -DZG_SECURE_DYNAMIC=0      #
#                          -DREFLECTOR -DDEFAULT_CHANLIST=0x00000800          #
#                          -DZDAPP_CONFIG_PAN_ID=0xFFFF                       #
#                          -DNWK_START_DELAY=100 -DEXTENDED_JOINING_RANDOM_MA #
#                          SK=0x007F -DBEACON_REQUEST_DELAY=100               #
#                          -DBEACON_REQ_DELAY_MASK=0x00FF                     #
#                          -DLINK_STATUS_JITTER_MASK=0x007F                   #
#                          -DROUTE_EXPIRY_TIME=30 -DAPSC_ACK_WAIT_DURATION_PO #
#                          LLED=3000 -DNWK_INDIRECT_MSG_TIMEOUT=7             #
#                          -DMAX_RREQ_ENTRIES=8 -DAPSC_MAX_FRAME_RETRIES=3    #
#                          -DNWK_MAX_DATA_RETRIES=2                           #
#                          -DMAX_POLL_FAILURE_RETRIES=2 -DMAX_BCAST=9         #
#                          -DAPS_MAX_GROUPS=16 -DMAX_RTG_ENTRIES=40           #
#                          -DNWK_MAX_BINDING_ENTRIES=4                        #
#                          -DMAX_BINDING_CLUSTER_IDS=4 "-DDEFAULT_KEY={0x01,  #
#                          0x03, 0x05, 0x07, 0x09, 0x0B, 0x0D, 0x0F, 0x00,    #
#                          0x02, 0x04, 0x06, 0x08, 0x0A, 0x0C, 0x0D}"         #
#                          -DMAC_MAX_FRAME_SIZE=116                           #
#                          -DZDNWKMGR_MIN_TRANSMISSIONS=20 "-DCONST=const     #
#                          __code" -DGENERIC=__generic                        #
#                          -DRFD_RCVC_ALWAYS_ON=FALSE -DPOLL_RATE=1000        #
#                          -DQUEUED_POLL_RATE=100 -DRESPONSE_POLL_RATE=100)   #
#                          -DREJOIN_POLL_RATE=440 F:\work\iot-hardware\logger #
#                          \logger\Components\hal\target\CC2530EB\hal_lcd.c   #
#                          -D NWK_AUTO_POLL -D ZTOOL_P1 -D MT_TASK -D         #
#                          MT_SYS_FUNC -D MT_ZDO_FUNC -D LCD_SUPPORTED=DEBUG  #
#                          -D xPOWER_SAVING -lC F:\work\iot-hardware\logger\l #
#                          ogger\Projects\zstack\Samples\GenericApp\CC2530DB\ #
#                          EndDeviceEB\List\ -lA F:\work\iot-hardware\logger\ #
#                          logger\Projects\zstack\Samples\GenericApp\CC2530DB #
#                          \EndDeviceEB\List\ --diag_suppress Pe001,Pa010 -o  #
#                          F:\work\iot-hardware\logger\logger\Projects\zstack #
#                          \Samples\GenericApp\CC2530DB\EndDeviceEB\Obj\ -e   #
#                          --no_cse --no_unroll --no_inline --no_code_motion  #
#                          --no_tbaa --debug --core=plain --dptr=16,1         #
#                          --data_model=large --code_model=banked             #
#                          --calling_convention=xdata_reentrant               #
#                          --place_constants=data_rom --nr_virtual_regs 16    #
#                          -I F:\work\iot-hardware\logger\logger\Projects\zst #
#                          ack\Samples\GenericApp\CC2530DB\ -I                #
#                          F:\work\iot-hardware\logger\logger\Projects\zstack #
#                          \Samples\GenericApp\CC2530DB\..\Source\ -I         #
#                          F:\work\iot-hardware\logger\logger\Projects\zstack #
#                          \Samples\GenericApp\CC2530DB\..\..\..\ZMain\TI2530 #
#                          DB\ -I F:\work\iot-hardware\logger\logger\Projects #
#                          \zstack\Samples\GenericApp\CC2530DB\..\..\..\..\.. #
#                          \Components\hal\include\ -I                        #
#                          F:\work\iot-hardware\logger\logger\Projects\zstack #
#                          \Samples\GenericApp\CC2530DB\..\..\..\..\..\Compon #
#                          ents\hal\target\CC2530EB\ -I                       #
#                          F:\work\iot-hardware\logger\logger\Projects\zstack #
#                          \Samples\GenericApp\CC2530DB\..\..\..\..\..\Compon #
#                          ents\mac\include\ -I F:\work\iot-hardware\logger\l #
#                          ogger\Projects\zstack\Samples\GenericApp\CC2530DB\ #
#                          ..\..\..\..\..\Components\mac\high_level\ -I       #
#                          F:\work\iot-hardware\logger\logger\Projects\zstack #
#                          \Samples\GenericApp\CC2530DB\..\..\..\..\..\Compon #
#                          ents\mac\low_level\srf04\ -I                       #
#                          F:\work\iot-hardware\logger\logger\Projects\zstack #
#                          \Samples\GenericApp\CC2530DB\..\..\..\..\..\Compon #
#                          ents\mac\low_level\srf04\single_chip\ -I           #
#                          F:\work\iot-hardware\logger\logger\Projects\zstack #
#                          \Samples\GenericApp\CC2530DB\..\..\..\..\..\Compon #
#                          ents\mt\ -I F:\work\iot-hardware\logger\logger\Pro #
#                          jects\zstack\Samples\GenericApp\CC2530DB\..\..\..\ #
#                          ..\..\Components\osal\include\ -I                  #
#                          F:\work\iot-hardware\logger\logger\Projects\zstack #
#                          \Samples\GenericApp\CC2530DB\..\..\..\..\..\Compon #
#                          ents\services\saddr\ -I F:\work\iot-hardware\logge #
#                          r\logger\Projects\zstack\Samples\GenericApp\CC2530 #
#                          DB\..\..\..\..\..\Components\services\sdata\ -I    #
#                          F:\work\iot-hardware\logger\logger\Projects\zstack #
#                          \Samples\GenericApp\CC2530DB\..\..\..\..\..\Compon #
#                          ents\stack\af\ -I F:\work\iot-hardware\logger\logg #
#                          er\Projects\zstack\Samples\GenericApp\CC2530DB\..\ #
#                          ..\..\..\..\Components\stack\nwk\ -I               #
#                          F:\work\iot-hardware\logger\logger\Projects\zstack #
#                          \Samples\GenericApp\CC2530DB\..\..\..\..\..\Compon #
#                          ents\stack\sapi\ -I F:\work\iot-hardware\logger\lo #
#                          gger\Projects\zstack\Samples\GenericApp\CC2530DB\. #
#                          .\..\..\..\..\Components\stack\sec\ -I             #
#                          F:\work\iot-hardware\logger\logger\Projects\zstack #
#                          \Samples\GenericApp\CC2530DB\..\..\..\..\..\Compon #
#                          ents\stack\sys\ -I F:\work\iot-hardware\logger\log #
#                          ger\Projects\zstack\Samples\GenericApp\CC2530DB\.. #
#                          \..\..\..\..\Components\stack\zdo\ -I              #
#                          F:\work\iot-hardware\logger\logger\Projects\zstack #
#                          \Samples\GenericApp\CC2530DB\..\..\..\..\..\Compon #
#                          ents\zmac\ -I F:\work\iot-hardware\logger\logger\P #
#                          rojects\zstack\Samples\GenericApp\CC2530DB\..\..\. #
#                          .\..\..\Components\zmac\f8w\ -Ol                   #
#                          --require_prototypes                               #
#    List file          =  F:\work\iot-hardware\logger\logger\Projects\zstack #
#                          \Samples\GenericApp\CC2530DB\EndDeviceEB\List\hal_ #
#                          lcd.lst                                            #
#    Object file        =  F:\work\iot-hardware\logger\logger\Projects\zstack #
#                          \Samples\GenericApp\CC2530DB\EndDeviceEB\Obj\hal_l #
#                          cd.r51                                             #
#                                                                             #
#                                                                             #
###############################################################################

F:\work\iot-hardware\logger\logger\Components\hal\target\CC2530EB\hal_lcd.c
      1          /**************************************************************************************************
      2            Filename:       hal_lcd.c
      3            Revised:        $Date: 2012-08-03 14:28:46 -0700 (Fri, 03 Aug 2012) $
      4            Revision:       $Revision: 31092 $
      5          
      6            Description:    This file contains the interface to the HAL LCD Service.
      7          
      8          
      9            Copyright 2007 - 2010 Texas Instruments Incorporated. All rights reserved.
     10          
     11            IMPORTANT: Your use of this Software is limited to those specific rights
     12            granted under the terms of a software license agreement between the user
     13            who downloaded the software, his/her employer (which must be your employer)
     14            and Texas Instruments Incorporated (the "License").  You may not use this
     15            Software unless you agree to abide by the terms of the License. The License
     16            limits your use, and you acknowledge, that the Software may not be modified,
     17            copied or distributed unless embedded on a Texas Instruments microcontroller
     18            or used solely and exclusively in conjunction with a Texas Instruments radio
     19            frequency transceiver, which is integrated into your product.  Other than for
     20            the foregoing purpose, you may not use, reproduce, copy, prepare derivative
     21            works of, modify, distribute, perform, display or sell this Software and/or
     22            its documentation for any purpose.
     23          
     24            YOU FURTHER ACKNOWLEDGE AND AGREE THAT THE SOFTWARE AND DOCUMENTATION ARE
     25            PROVIDED AS IS?WITHOUT WARRANTY OF ANY KIND, EITHER EXPRESS OR IMPLIED,
     26            INCLUDING WITHOUT LIMITATION, ANY WARRANTY OF MERCHANTABILITY, TITLE,
     27            NON-INFRINGEMENT AND FITNESS FOR A PARTICULAR PURPOSE. IN NO EVENT SHALL
     28            TEXAS INSTRUMENTS OR ITS LICENSORS BE LIABLE OR OBLIGATED UNDER CONTRACT,
     29            NEGLIGENCE, STRICT LIABILITY, CONTRIBUTION, BREACH OF WARRANTY, OR OTHER
     30            LEGAL EQUITABLE THEORY ANY DIRECT OR INDIRECT DAMAGES OR EXPENSES
     31            INCLUDING BUT NOT LIMITED TO ANY INCIDENTAL, SPECIAL, INDIRECT, PUNITIVE
     32            OR CONSEQUENTIAL DAMAGES, LOST PROFITS OR LOST DATA, COST OF PROCUREMENT
     33            OF SUBSTITUTE GOODS, TECHNOLOGY, SERVICES, OR ANY CLAIMS BY THIRD PARTIES
     34            (INCLUDING BUT NOT LIMITED TO ANY DEFENSE THEREOF), OR OTHER SIMILAR COSTS.
     35          
     36            Should you have any questions regarding your right to use this Software,
     37            contact Texas Instruments Incorporated at www.TI.com.
     38          **************************************************************************************************/
     39          
     40          /**************************************************************************************************
     41           *                                           INCLUDES
     42           **************************************************************************************************/
     43          #include "hal_types.h"
     44          #include "hal_lcd.h"

   \                                 In  segment SFR_AN, at 0x80
   \   union <unnamed> volatile __sfr _A_P0
   \                     _A_P0:
   \   000000                DS 1

   \                                 In  segment SFR_AN, at 0x90
   \   union <unnamed> volatile __sfr _A_P1
   \                     _A_P1:
   \   000000                DS 1

   \                                 In  segment SFR_AN, at 0xf3
   \   unsigned char volatile __sfr P0SEL
   \                     P0SEL:
   \   000000                DS 1

   \                                 In  segment SFR_AN, at 0xf4
   \   unsigned char volatile __sfr P1SEL
   \                     P1SEL:
   \   000000                DS 1

   \                                 In  segment SFR_AN, at 0xfd
   \   unsigned char volatile __sfr P0DIR
   \                     P0DIR:
   \   000000                DS 1

   \                                 In  segment SFR_AN, at 0xfe
   \   unsigned char volatile __sfr P1DIR
   \                     P1DIR:
   \   000000                DS 1
     45          #include "OSAL.h"
     46          #include "OnBoard.h"
     47          #include "hal_assert.h"
     48          
     49          //下面一行是我加的
     50          __code const uint8 ascii_table_5x7[][5];
     51          
     52          #if defined (ZTOOL_P1) || defined (ZTOOL_P2)
     53            #include "DebugTrace.h"
     54          #endif
     55          
     56          /**************************************************************************************************
     57           *                                          CONSTANTS
     58           **************************************************************************************************/
     59          /*
     60            LCD pins
     61          
     62            //control
     63            P0.0 - LCD_MODE
     64            P1.1 - LCD_FLASH_RESET
     65            P1.2 - LCD_CS
     66          
     67            //spi
     68            P1.5 - CLK
     69            P1.6 - MOSI
     70            P1.7 - MISO
     71          */
     72          
     73          /* LCD Max Chars and Buffer */
     74          #define HAL_LCD_MAX_CHARS   16
     75          #define HAL_LCD_MAX_BUFF    25
     76          
     77          /* LCD Control lines */
     78          #define HAL_LCD_MODE_PORT 0
     79          #define HAL_LCD_MODE_PIN  0
     80          
     81          #define HAL_LCD_RESET_PORT 1
     82          #define HAL_LCD_RESET_PIN  1
     83          
     84          #define HAL_LCD_CS_PORT 1
     85          #define HAL_LCD_CS_PIN  2
     86          
     87          /* LCD SPI lines */
     88          #define HAL_LCD_CLK_PORT 1
     89          #define HAL_LCD_CLK_PIN  5
     90          
     91          #define HAL_LCD_MOSI_PORT 1
     92          #define HAL_LCD_MOSI_PIN  6
     93          
     94          #define HAL_LCD_MISO_PORT 1
     95          #define HAL_LCD_MISO_PIN  7
     96          
     97          /* SPI settings */
     98          #define HAL_SPI_CLOCK_POL_LO       0x00
     99          #define HAL_SPI_CLOCK_PHA_0        0x00
    100          #define HAL_SPI_TRANSFER_MSB_FIRST 0x20
    101          
    102          /* LCD lines */
    103          #define LCD_MAX_LINE_COUNT              8
    104          
    105          /* Defines for HW LCD */
    106          
    107          /* Set power save mode */
    108          #define OSC_OFF                         0x00
    109          #define OSC_ON                          0x01
    110          #define POWER_SAVE_OFF                  0x00
    111          #define POWER_SAVE_ON                   0x02
    112          #define SET_POWER_SAVE_MODE(options)    HalLcd_HW_Control(0x0C | (options))
    113          
    114          /* Function Set */
    115          #define CGROM                           0x00
    116          #define CGRAM                           0x01
    117          #define COM_FORWARD                     0x00
    118          #define COM_BACKWARD                    0x02
    119          #define TWO_LINE                        0x00
    120          #define THREE_LINE                      0x04
    121          #define FUNCTION_SET(options)           HalLcd_HW_Control(0x10 | (options))
    122          
    123          /* Set Display Start Line */
    124          #define LINE1                           0x00
    125          #define LINE2                           0x01
    126          #define LINE3                           0x02
    127          #define LINE4                           0x03
    128          #define SET_DISPLAY_START_LINE(line)    HalLcd_HW_Control(0x18 | (line))
    129          
    130          /* Bias control */
    131          #define BIAS_1_5                        0x00
    132          #define BIAS_1_4                        0x01
    133          #define SET_BIAS_CTRL(bias)             HalLcd_HW_Control(0x1C | (bias))
    134          
    135          /* Power control */
    136          #define VOLTAGE_DIVIDER_OFF             0x00
    137          #define VOLTAGE_DIVIDER_ON              0x01
    138          #define CONVERTER_AND_REG_OFF           0x00
    139          #define CONVERTER_AND_REG_ON            0x04
    140          #define SET_POWER_CTRL(options)         HalLcd_HW_Control(0x20 | (options))
    141          
    142          // Set display control
    143          #define DISPLAY_CTRL_ON                 0x01
    144          #define DISPLAY_CTRL_OFF                0x00
    145          #define DISPLAY_CTRL_BLINK_ON           0x02
    146          #define DISPLAY_CTRL_BLINK_OFF          0x00
    147          #define DISPLAY_CTRL_CURSOR_ON          0x04
    148          #define DISPLAY_CTRL_CURSOR_OFF         0x00
    149          #define SET_DISPLAY_CTRL(options)       HalLcd_HW_Control(0x28 | (options))
    150          
    151          /* Set DD/ CGRAM address */
    152          #define SET_DDRAM_ADDR(charIndex)       HalLcd_HW_Control(0x80 | (charIndex))
    153          #define SET_GCRAM_CHAR(specIndex)       HalLcd_HW_Control(0xC0 | (specIndex))
    154          
    155          /* Set ICONRAM address */
    156          #define CONTRAST_CTRL_REGISTER          0x10
    157          #define SET_ICONRAM_ADDR(addr)          HalLcd_HW_Control(0x40 | (addr))
    158          
    159          /* Set double height */
    160          #define LINE_1_AND_2                    0x01
    161          #define LINE_2_AND_3                    0x02
    162          #define NORMAL_DISPLAY                  0x00
    163          #define SET_DOUBLE_HEIGHT(options)      HalLcd_HW_Control(0x08 | (options))
    164          
    165          /**************************************************************************************************
    166           *                                           MACROS
    167           **************************************************************************************************/
    168          
    169          #define HAL_IO_SET(port, pin, val)        HAL_IO_SET_PREP(port, pin, val)
    170          #define HAL_IO_SET_PREP(port, pin, val)   st( P##port##_##pin## = val; )
    171          
    172          #define HAL_CONFIG_IO_OUTPUT(port, pin, val)      HAL_CONFIG_IO_OUTPUT_PREP(port, pin, val)
    173          #define HAL_CONFIG_IO_OUTPUT_PREP(port, pin, val) st( P##port##SEL &= ~BV(pin); \
    174                                                                P##port##_##pin## = val; \
    175                                                                P##port##DIR |= BV(pin); )
    176          
    177          #define HAL_CONFIG_IO_PERIPHERAL(port, pin)      HAL_CONFIG_IO_PERIPHERAL_PREP(port, pin)
    178          #define HAL_CONFIG_IO_PERIPHERAL_PREP(port, pin) st( P##port##SEL |= BV(pin); )
    179          
    180          
    181          
    182          /* SPI interface control */
    183          #define LCD_SPI_BEGIN()     HAL_IO_SET(HAL_LCD_CS_PORT,  HAL_LCD_CS_PIN,  0); /* chip select */
    184          #define LCD_SPI_END()                                                         \
    185          {                                                                             \
    186            asm("NOP");                                                                 \
    187            asm("NOP");                                                                 \
    188            asm("NOP");                                                                 \
    189            asm("NOP");                                                                 \
    190            HAL_IO_SET(HAL_LCD_CS_PORT,  HAL_LCD_CS_PIN,  1); /* chip select */         \
    191          }
    192          /* clear the received and transmit byte status, write tx data to buffer, wait till transmit done */
    193          #define LCD_SPI_TX(x)                   { U1CSR &= ~(BV(2) | BV(1)); U1DBUF = x; while( !(U1CSR & BV(1)) ); }
    194          #define LCD_SPI_WAIT_RXRDY()            { while(!(U1CSR & BV(1))); }
    195          
    196          
    197          /* Control macros */
    198          #define LCD_DO_WRITE()        HAL_IO_SET(HAL_LCD_MODE_PORT,  HAL_LCD_MODE_PIN,  1);
    199          #define LCD_DO_CONTROL()      HAL_IO_SET(HAL_LCD_MODE_PORT,  HAL_LCD_MODE_PIN,  0);
    200          
    201          #define LCD_ACTIVATE_RESET()  HAL_IO_SET(HAL_LCD_RESET_PORT, HAL_LCD_RESET_PIN, 0);
    202          #define LCD_RELEASE_RESET()   HAL_IO_SET(HAL_LCD_RESET_PORT, HAL_LCD_RESET_PIN, 1);
    203          
    204          
    205          /**************************************************************************************************
    206           *                                       GLOBAL VARIABLES
    207           **************************************************************************************************/
    208          #if (HAL_LCD == TRUE)

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    209          static uint8 *Lcd_Line1;
   \                     Lcd_Line1:
   \   000000                DS 2
   \   000002                REQUIRE __INIT_XDATA_Z
    210          #endif //LCD
    211          
    212          /**************************************************************************************************
    213           *                                       FUNCTIONS - API
    214           **************************************************************************************************/
    215          #if (HAL_LCD == TRUE)
    216          void HalLcd_HW_Init(void);
    217          void HalLcd_HW_WaitUs(uint16 i);
    218          void HalLcd_HW_Clear(void);
    219          void HalLcd_HW_ClearAllSpecChars(void);
    220          void HalLcd_HW_Control(uint8 cmd);
    221          void HalLcd_HW_Write(uint8 data);
    222          void HalLcd_HW_SetContrast(uint8 value);
    223          void HalLcd_HW_WriteChar(uint8 line, uint8 col, char text);
    224          void HalLcd_HW_WriteLine(uint8 line, const char *pText);
    225          
    226          void set_ddram_line_col(uint8 line,uint8 col);
    227          void DisplayByte_5x7(uint8 page,uint8 column,char text);
    228          #endif //LCD
    229          
    230          /**************************************************************************************************
    231           * @fn      HalLcdInit
    232           *
    233           * @brief   Initilize LCD Service
    234           *
    235           * @param   None
    236           *
    237           * @return  None
    238           **************************************************************************************************/

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    239          void HalLcdInit(void)
   \                     HalLcdInit:
    240          {
   \   000000   C082         PUSH    DPL
   \   000002   C083         PUSH    DPH
   \   000004                ; Saved register size: 2
   \   000004                ; Auto size: 0
    241          #if (HAL_LCD == TRUE)
    242            Lcd_Line1 = NULL;
   \   000004   90....       MOV     DPTR,#Lcd_Line1
   \   000007   7400         MOV     A,#0x0
   \   000009   F0           MOVX    @DPTR,A
   \   00000A   A3           INC     DPTR
   \   00000B   7400         MOV     A,#0x0
   \   00000D   F0           MOVX    @DPTR,A
    243            HalLcd_HW_Init();
   \   00000E                ; Setup parameters for call to function HalLcd_HW_Init
   \   00000E   12....       LCALL   ??HalLcd_HW_Init?relay
    244          #endif
    245          }
   \   000011   D083         POP     DPH
   \   000013   D082         POP     DPL
   \   000015   02....       LJMP    ?BRET
    246          
    247          /*************************************************************************************************
    248           *                    LCD EMULATION FUNCTIONS
    249           *
    250           * Some evaluation boards are equipped with Liquid Crystal Displays
    251           * (LCD) which may be used to display diagnostic information. These
    252           * functions provide LCD emulation, sending the diagnostic strings
    253           * to Z-Tool via the RS232 serial port. These functions are enabled
    254           * when the "LCD_SUPPORTED" compiler flag is placed in the makefile.
    255           *
    256           * Most applications update both lines (1 and 2) of the LCD whenever
    257           * text is posted to the device. This emulator assumes that line 1 is
    258           * updated first (saved locally) and the formatting and send operation
    259           * is triggered by receipt of line 2. Nothing will be transmitted if
    260           * only line 1 is updated.
    261           *
    262           *************************************************************************************************/
    263          
    264          
    265          /**************************************************************************************************
    266           * @fn      HalLcdWriteString
    267           *
    268           * @brief   Write a string to the LCD
    269           *
    270           * @param   str    - pointer to the string that will be displayed
    271           *          option - display options
    272           *
    273           * @return  None
    274           **************************************************************************************************/

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    275          void HalLcdWriteString ( char *str, uint8 option)
   \                     HalLcdWriteString:
    276          {
   \   000000   74EE         MOV     A,#-0x12
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 18
   \   000005                ; Auto size: 0
   \   000005   8A..         MOV     ?V0 + 8,R2
   \   000007   8B..         MOV     ?V0 + 9,R3
   \   000009   89..         MOV     ?V0 + 2,R1
    277          #if (HAL_LCD == TRUE)
    278          
    279            uint8 strLen = 0;
   \   00000B   75..00       MOV     ?V0 + 1,#0x0
    280            uint8 totalLen = 0;
   \   00000E   75..00       MOV     ?V0 + 4,#0x0
    281            uint8 *buf;
    282            uint8 tmpLen;
    283          
    284            if ( Lcd_Line1 == NULL )
   \   000011   90....       MOV     DPTR,#Lcd_Line1
   \   000014   E0           MOVX    A,@DPTR
   \   000015   F8           MOV     R0,A
   \   000016   A3           INC     DPTR
   \   000017   E0           MOVX    A,@DPTR
   \   000018   F9           MOV     R1,A
   \   000019   E8           MOV     A,R0
   \   00001A   49           ORL     A,R1
   \   00001B   7018         JNZ     ??HalLcdWriteString_0
    285            {
    286              Lcd_Line1 = osal_mem_alloc( HAL_LCD_MAX_CHARS+1 );
   \   00001D                ; Setup parameters for call to function osal_mem_alloc
   \   00001D   7A11         MOV     R2,#0x11
   \   00001F   7B00         MOV     R3,#0x0
   \   000021   12....       LCALL   ??osal_mem_alloc?relay
   \   000024   90....       MOV     DPTR,#Lcd_Line1
   \   000027   EA           MOV     A,R2
   \   000028   F0           MOVX    @DPTR,A
   \   000029   A3           INC     DPTR
   \   00002A   EB           MOV     A,R3
   \   00002B   F0           MOVX    @DPTR,A
    287              HalLcdWriteString( "Texas Instruments", 1 );
   \   00002C                ; Setup parameters for call to function HalLcdWriteString
   \   00002C   7901         MOV     R1,#0x1
   \   00002E   7A..         MOV     R2,#`?<Constant "Texas Instruments">` & 0xff
   \   000030   7B..         MOV     R3,#(`?<Constant "Texas Instruments">` >> 8) & 0xff
   \   000032   12....       LCALL   ??HalLcdWriteString?relay
    288            }
    289          
    290            strLen = (uint8)osal_strlen( (char*)str );
   \                     ??HalLcdWriteString_0:
   \   000035                ; Setup parameters for call to function osal_strlen
   \   000035   AA..         MOV     R2,?V0 + 8
   \   000037   AB..         MOV     R3,?V0 + 9
   \   000039   12....       LCALL   ??osal_strlen?relay
   \   00003C   EA           MOV     A,R2
   \   00003D   F5..         MOV     ?V0 + 1,A
    291          
    292            /* Check boundries */
    293            if ( strLen > HAL_LCD_MAX_CHARS )
   \   00003F   E5..         MOV     A,?V0 + 1
   \   000041   C3           CLR     C
   \   000042   9411         SUBB    A,#0x11
   \   000044   4003         JC      ??HalLcdWriteString_1
    294              strLen = HAL_LCD_MAX_CHARS;
   \   000046   75..10       MOV     ?V0 + 1,#0x10
    295          
    296            if ( option == HAL_LCD_LINE_1 )
   \                     ??HalLcdWriteString_1:
   \   000049   7401         MOV     A,#0x1
   \   00004B   65..         XRL     A,?V0 + 2
   \   00004D   7044         JNZ     ??HalLcdWriteString_2
    297            {
    298              /* Line 1 gets saved for later */
    299              osal_memcpy( Lcd_Line1, str, strLen );
   \   00004F                ; Setup parameters for call to function osal_memcpy
   \   00004F   85....       MOV     ?V0 + 4,?V0 + 8
   \   000052   85....       MOV     ?V0 + 5,?V0 + 9
   \   000055   75..00       MOV     ?V0 + 6,#0x0
   \   000058   78..         MOV     R0,#?V0 + 4
   \   00005A   12....       LCALL   ?PUSH_XSTACK_I_THREE
   \   00005D   85....       MOV     ?V0 + 0,?V0 + 1
   \   000060   85....       MOV     ?V0 + 4,?V0 + 0
   \   000063   75..00       MOV     ?V0 + 5,#0x0
   \   000066   AC..         MOV     R4,?V0 + 4
   \   000068   AD..         MOV     R5,?V0 + 5
   \   00006A   90....       MOV     DPTR,#Lcd_Line1
   \   00006D   E0           MOVX    A,@DPTR
   \   00006E   FA           MOV     R2,A
   \   00006F   A3           INC     DPTR
   \   000070   E0           MOVX    A,@DPTR
   \   000071   FB           MOV     R3,A
   \   000072   12....       LCALL   ??osal_memcpy?relay
   \   000075   7403         MOV     A,#0x3
   \   000077   12....       LCALL   ?DEALLOC_XSTACK8
    300              Lcd_Line1[strLen] = '\0';
   \   00007A   E5..         MOV     A,?V0 + 1
   \   00007C   A8..         MOV     R0,?V0 + 1
   \   00007E   7900         MOV     R1,#0x0
   \   000080   90....       MOV     DPTR,#Lcd_Line1
   \   000083   E0           MOVX    A,@DPTR
   \   000084   28           ADD     A,R0
   \   000085   FA           MOV     R2,A
   \   000086   A3           INC     DPTR
   \   000087   E0           MOVX    A,@DPTR
   \   000088   39           ADDC    A,R1
   \   000089   8A82         MOV     DPL,R2
   \   00008B   F583         MOV     DPH,A
   \   00008D   7400         MOV     A,#0x0
   \   00008F   F0           MOVX    @DPTR,A
   \   000090   02....       LJMP    ??HalLcdWriteString_3 & 0xFFFF
    301            }
    302            else
    303            {
    304              /* Line 2 triggers action */
    305              tmpLen = (uint8)osal_strlen( (char*)Lcd_Line1 );
   \                     ??HalLcdWriteString_2:
   \   000093                ; Setup parameters for call to function osal_strlen
   \   000093   90....       MOV     DPTR,#Lcd_Line1
   \   000096   E0           MOVX    A,@DPTR
   \   000097   FA           MOV     R2,A
   \   000098   A3           INC     DPTR
   \   000099   E0           MOVX    A,@DPTR
   \   00009A   FB           MOV     R3,A
   \   00009B   12....       LCALL   ??osal_strlen?relay
   \   00009E   EA           MOV     A,R2
   \   00009F   F5..         MOV     ?V0 + 0,A
    306              totalLen =  tmpLen + 1 + strLen + 1;
   \   0000A1   E5..         MOV     A,?V0 + 0
   \   0000A3   25..         ADD     A,?V0 + 1
   \   0000A5   2402         ADD     A,#0x2
   \   0000A7   F5..         MOV     ?V0 + 4,A
    307              buf = osal_mem_alloc( totalLen );
   \   0000A9                ; Setup parameters for call to function osal_mem_alloc
   \   0000A9   75..00       MOV     ?V0 + 5,#0x0
   \   0000AC   AA..         MOV     R2,?V0 + 4
   \   0000AE   AB..         MOV     R3,?V0 + 5
   \   0000B0   12....       LCALL   ??osal_mem_alloc?relay
   \   0000B3   8A..         MOV     ?V0 + 4,R2
   \   0000B5   8B..         MOV     ?V0 + 5,R3
   \   0000B7   AE..         MOV     R6,?V0 + 4
   \   0000B9   AF..         MOV     R7,?V0 + 5
    308              if ( buf != NULL )
   \   0000BB   EE           MOV     A,R6
   \   0000BC   4F           ORL     A,R7
   \   0000BD   7003         JNZ     $+5
   \   0000BF   02....       LJMP    ??HalLcdWriteString_3 & 0xFFFF
    309              {
    310                /* Concatenate strings */
    311                osal_memcpy( buf, Lcd_Line1, tmpLen );
   \   0000C2                ; Setup parameters for call to function osal_memcpy
   \   0000C2   90....       MOV     DPTR,#Lcd_Line1
   \   0000C5   E0           MOVX    A,@DPTR
   \   0000C6   F5..         MOV     ?V0 + 4,A
   \   0000C8   A3           INC     DPTR
   \   0000C9   E0           MOVX    A,@DPTR
   \   0000CA   F5..         MOV     ?V0 + 5,A
   \   0000CC   75..00       MOV     ?V0 + 6,#0x0
   \   0000CF   78..         MOV     R0,#?V0 + 4
   \   0000D1   12....       LCALL   ?PUSH_XSTACK_I_THREE
   \   0000D4   85....       MOV     ?V0 + 4,?V0 + 0
   \   0000D7   75..00       MOV     ?V0 + 5,#0x0
   \   0000DA   AC..         MOV     R4,?V0 + 4
   \   0000DC   AD..         MOV     R5,?V0 + 5
   \   0000DE   EE           MOV     A,R6
   \   0000DF   FA           MOV     R2,A
   \   0000E0   EF           MOV     A,R7
   \   0000E1   FB           MOV     R3,A
   \   0000E2   12....       LCALL   ??osal_memcpy?relay
   \   0000E5   7403         MOV     A,#0x3
   \   0000E7   12....       LCALL   ?DEALLOC_XSTACK8
    312                buf[tmpLen++] = ' ';
   \   0000EA   85....       MOV     ?V0 + 4,?V0 + 0
   \   0000ED   75..00       MOV     ?V0 + 5,#0x0
   \   0000F0   EE           MOV     A,R6
   \   0000F1   25..         ADD     A,?V0 + 4
   \   0000F3   F582         MOV     DPL,A
   \   0000F5   EF           MOV     A,R7
   \   0000F6   35..         ADDC    A,?V0 + 5
   \   0000F8   F583         MOV     DPH,A
   \   0000FA   7420         MOV     A,#0x20
   \   0000FC   F0           MOVX    @DPTR,A
   \   0000FD   05..         INC     ?V0 + 0
    313                osal_memcpy( &buf[tmpLen], str, strLen );
   \   0000FF                ; Setup parameters for call to function osal_memcpy
   \   0000FF   85....       MOV     ?V0 + 4,?V0 + 8
   \   000102   85....       MOV     ?V0 + 5,?V0 + 9
   \   000105   75..00       MOV     ?V0 + 6,#0x0
   \   000108   78..         MOV     R0,#?V0 + 4
   \   00010A   12....       LCALL   ?PUSH_XSTACK_I_THREE
   \   00010D   85....       MOV     ?V0 + 4,?V0 + 1
   \   000110   75..00       MOV     ?V0 + 5,#0x0
   \   000113   AC..         MOV     R4,?V0 + 4
   \   000115   AD..         MOV     R5,?V0 + 5
   \   000117   85....       MOV     ?V0 + 4,?V0 + 0
   \   00011A   75..00       MOV     ?V0 + 5,#0x0
   \   00011D   EE           MOV     A,R6
   \   00011E   25..         ADD     A,?V0 + 4
   \   000120   FA           MOV     R2,A
   \   000121   EF           MOV     A,R7
   \   000122   35..         ADDC    A,?V0 + 5
   \   000124   FB           MOV     R3,A
   \   000125   12....       LCALL   ??osal_memcpy?relay
   \   000128   7403         MOV     A,#0x3
   \   00012A   12....       LCALL   ?DEALLOC_XSTACK8
    314                buf[tmpLen+strLen] = '\0';
   \   00012D   85....       MOV     ?V0 + 4,?V0 + 0
   \   000130   75..00       MOV     ?V0 + 5,#0x0
   \   000133   85....       MOV     ?V0 + 0,?V0 + 1
   \   000136   75..00       MOV     ?V0 + 1,#0x0
   \   000139   E5..         MOV     A,?V0 + 4
   \   00013B   25..         ADD     A,?V0 + 0
   \   00013D   F8           MOV     R0,A
   \   00013E   E5..         MOV     A,?V0 + 5
   \   000140   35..         ADDC    A,?V0 + 1
   \   000142   F9           MOV     R1,A
   \   000143   EE           MOV     A,R6
   \   000144   28           ADD     A,R0
   \   000145   F582         MOV     DPL,A
   \   000147   EF           MOV     A,R7
   \   000148   39           ADDC    A,R1
   \   000149   F583         MOV     DPH,A
   \   00014B   7400         MOV     A,#0x0
   \   00014D   F0           MOVX    @DPTR,A
    315          
    316                /* Send it out */
    317          #if defined (ZTOOL_P1) || defined (ZTOOL_P2)
    318          
    319          #if defined(SERIAL_DEBUG_SUPPORTED)
    320                debug_str( (uint8*)buf );
   \   00014E                ; Setup parameters for call to function debug_str
   \   00014E   EE           MOV     A,R6
   \   00014F   FA           MOV     R2,A
   \   000150   EF           MOV     A,R7
   \   000151   FB           MOV     R3,A
   \   000152   12....       LCALL   ??debug_str?relay
    321          #endif //LCD_SUPPORTED
    322          
    323          #endif //ZTOOL_P1
    324          
    325                /* Free mem */
    326                osal_mem_free( buf );
   \   000155                ; Setup parameters for call to function osal_mem_free
   \   000155   EE           MOV     A,R6
   \   000156   FA           MOV     R2,A
   \   000157   EF           MOV     A,R7
   \   000158   FB           MOV     R3,A
   \   000159   12....       LCALL   ??osal_mem_free?relay
    327              }
    328            }
    329          
    330            /* Display the string */
    331            HalLcd_HW_WriteLine (option, str);
   \                     ??HalLcdWriteString_3:
   \   00015C                ; Setup parameters for call to function HalLcd_HW_WriteLine
   \   00015C   AA..         MOV     R2,?V0 + 8
   \   00015E   AB..         MOV     R3,?V0 + 9
   \   000160   A9..         MOV     R1,?V0 + 2
   \   000162   12....       LCALL   ??HalLcd_HW_WriteLine?relay
    332          
    333          #endif //HAL_LCD
    334          
    335          }
   \   000165   7F0A         MOV     R7,#0xa
   \   000167   02....       LJMP    ?BANKED_LEAVE_XDATA
    336          
    337          /**************************************************************************************************
    338           * @fn      HalLcdWriteValue
    339           *
    340           * @brief   Write a value to the LCD
    341           *
    342           * @param   value  - value that will be displayed
    343           *          radix  - 8, 10, 16
    344           *          option - display options
    345           *
    346           * @return  None
    347           **************************************************************************************************/

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    348          void HalLcdWriteValue ( uint32 value, const uint8 radix, uint8 option)
   \                     HalLcdWriteValue:
    349          {
   \   000000   74F0         MOV     A,#-0x10
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 16
   \   000005                ; Auto size: 25
   \   000005   74E7         MOV     A,#-0x19
   \   000007   12....       LCALL   ?ALLOC_XSTACK8
   \   00000A   8A..         MOV     ?V0 + 4,R2
   \   00000C   8B..         MOV     ?V0 + 5,R3
   \   00000E   8C..         MOV     ?V0 + 6,R4
   \   000010   8D..         MOV     ?V0 + 7,R5
   \   000012   E9           MOV     A,R1
   \   000013   FF           MOV     R7,A
   \   000014   7429         MOV     A,#0x29
   \   000016   12....       LCALL   ?XSTACK_DISP0_8
   \   000019   E0           MOVX    A,@DPTR
   \   00001A   FE           MOV     R6,A
    350          #if (HAL_LCD == TRUE)
    351            uint8 buf[HAL_LCD_MAX_BUFF];
    352          
    353            _ltoa( value, &buf[0], radix );
   \   00001B                ; Setup parameters for call to function _ltoa
   \   00001B   85..82       MOV     DPL,?XSP + 0
   \   00001E   85..83       MOV     DPH,?XSP + 1
   \   000021   8582..       MOV     ?V0 + 0,DPL
   \   000024   8583..       MOV     ?V0 + 1,DPH
   \   000027   78..         MOV     R0,#?V0 + 0
   \   000029   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   00002C   EF           MOV     A,R7
   \   00002D   F9           MOV     R1,A
   \   00002E   AA..         MOV     R2,?V0 + 4
   \   000030   AB..         MOV     R3,?V0 + 5
   \   000032   AC..         MOV     R4,?V0 + 6
   \   000034   AD..         MOV     R5,?V0 + 7
   \   000036   12....       LCALL   ??_ltoa?relay
   \   000039   7402         MOV     A,#0x2
   \   00003B   12....       LCALL   ?DEALLOC_XSTACK8
    354            HalLcdWriteString( (char*)buf, option );
   \   00003E                ; Setup parameters for call to function HalLcdWriteString
   \   00003E   EE           MOV     A,R6
   \   00003F   F9           MOV     R1,A
   \   000040   85..82       MOV     DPL,?XSP + 0
   \   000043   85..83       MOV     DPH,?XSP + 1
   \   000046   AA82         MOV     R2,DPL
   \   000048   AB83         MOV     R3,DPH
   \   00004A   12....       LCALL   ??HalLcdWriteString?relay
    355          #endif
    356          }
   \   00004D   7419         MOV     A,#0x19
   \   00004F   12....       LCALL   ?DEALLOC_XSTACK8
   \   000052   7F08         MOV     R7,#0x8
   \   000054   02....       LJMP    ?BANKED_LEAVE_XDATA
    357          
    358          /**************************************************************************************************
    359           * @fn      HalLcdWriteScreen
    360           *
    361           * @brief   Write a value to the LCD
    362           *
    363           * @param   line1  - string that will be displayed on line 1
    364           *          line2  - string that will be displayed on line 2
    365           *
    366           * @return  None
    367           **************************************************************************************************/

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    368          void HalLcdWriteScreen( char *line1, char *line2 )
   \                     HalLcdWriteScreen:
    369          {
   \   000000   74F7         MOV     A,#-0x9
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 9
   \   000005                ; Auto size: 0
   \   000005   EC           MOV     A,R4
   \   000006   FE           MOV     R6,A
   \   000007   ED           MOV     A,R5
   \   000008   FF           MOV     R7,A
    370          #if (HAL_LCD == TRUE)
    371            HalLcdWriteString( line1, 1 );
   \   000009                ; Setup parameters for call to function HalLcdWriteString
   \   000009   7901         MOV     R1,#0x1
   \   00000B   12....       LCALL   ??HalLcdWriteString?relay
    372            HalLcdWriteString( line2, 2 );
   \   00000E                ; Setup parameters for call to function HalLcdWriteString
   \   00000E   7902         MOV     R1,#0x2
   \   000010   EE           MOV     A,R6
   \   000011   FA           MOV     R2,A
   \   000012   EF           MOV     A,R7
   \   000013   FB           MOV     R3,A
   \   000014   12....       LCALL   ??HalLcdWriteString?relay
    373          #endif
    374          }
   \   000017   7F01         MOV     R7,#0x1
   \   000019   02....       LJMP    ?BANKED_LEAVE_XDATA
    375          
    376          /**************************************************************************************************
    377           * @fn      HalLcdWriteStringValue
    378           *
    379           * @brief   Write a string followed by a value to the LCD
    380           *
    381           * @param   title  - Title that will be displayed before the value
    382           *          value  - value
    383           *          format - redix
    384           *          line   - line number
    385           *
    386           * @return  None
    387           **************************************************************************************************/

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    388          void HalLcdWriteStringValue( char *title, uint16 value, uint8 format, uint8 line )
   \                     HalLcdWriteStringValue:
    389          {
   \   000000   74EC         MOV     A,#-0x14
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 20
   \   000005                ; Auto size: 25
   \   000005   74E7         MOV     A,#-0x19
   \   000007   12....       LCALL   ?ALLOC_XSTACK8
   \   00000A   EA           MOV     A,R2
   \   00000B   FE           MOV     R6,A
   \   00000C   EB           MOV     A,R3
   \   00000D   FF           MOV     R7,A
   \   00000E   8C..         MOV     ?V0 + 0,R4
   \   000010   8D..         MOV     ?V0 + 1,R5
   \   000012   89..         MOV     ?V0 + 2,R1
   \   000014   742D         MOV     A,#0x2d
   \   000016   12....       LCALL   ?XSTACK_DISP0_8
   \   000019   E0           MOVX    A,@DPTR
   \   00001A   F5..         MOV     ?V0 + 3,A
    390          #if (HAL_LCD == TRUE)
    391            uint8 tmpLen;
    392            uint8 buf[HAL_LCD_MAX_BUFF];
    393            uint32 err;
    394          
    395            tmpLen = (uint8)osal_strlen( (char*)title );
   \   00001C                ; Setup parameters for call to function osal_strlen
   \   00001C   EE           MOV     A,R6
   \   00001D   FA           MOV     R2,A
   \   00001E   EF           MOV     A,R7
   \   00001F   FB           MOV     R3,A
   \   000020   12....       LCALL   ??osal_strlen?relay
   \   000023   EA           MOV     A,R2
   \   000024   F5..         MOV     ?V0 + 7,A
    396            osal_memcpy( buf, title, tmpLen );
   \   000026                ; Setup parameters for call to function osal_memcpy
   \   000026   8E..         MOV     ?V0 + 4,R6
   \   000028   8F..         MOV     ?V0 + 5,R7
   \   00002A   75..00       MOV     ?V0 + 6,#0x0
   \   00002D   78..         MOV     R0,#?V0 + 4
   \   00002F   12....       LCALL   ?PUSH_XSTACK_I_THREE
   \   000032   85....       MOV     ?V0 + 4,?V0 + 7
   \   000035   75..00       MOV     ?V0 + 5,#0x0
   \   000038   AC..         MOV     R4,?V0 + 4
   \   00003A   AD..         MOV     R5,?V0 + 5
   \   00003C   7403         MOV     A,#0x3
   \   00003E   12....       LCALL   ?XSTACK_DISP0_8
   \   000041   AA82         MOV     R2,DPL
   \   000043   AB83         MOV     R3,DPH
   \   000045   12....       LCALL   ??osal_memcpy?relay
   \   000048   7403         MOV     A,#0x3
   \   00004A   12....       LCALL   ?DEALLOC_XSTACK8
    397            buf[tmpLen] = ' ';
   \   00004D   85....       MOV     ?V0 + 4,?V0 + 7
   \   000050   75..00       MOV     ?V0 + 5,#0x0
   \   000053   85..82       MOV     DPL,?XSP + 0
   \   000056   85..83       MOV     DPH,?XSP + 1
   \   000059   E582         MOV     A,DPL
   \   00005B   25..         ADD     A,?V0 + 4
   \   00005D   F582         MOV     DPL,A
   \   00005F   E583         MOV     A,DPH
   \   000061   35..         ADDC    A,?V0 + 5
   \   000063   F583         MOV     DPH,A
   \   000065   7420         MOV     A,#0x20
   \   000067   F0           MOVX    @DPTR,A
    398            err = (uint32)(value);
   \   000068   85....       MOV     ?V0 + 8,?V0 + 0
   \   00006B   85....       MOV     ?V0 + 9,?V0 + 1
   \   00006E   E4           CLR     A
   \   00006F   F5..         MOV     ?V0 + 10,A
   \   000071   F5..         MOV     ?V0 + 11,A
    399            _ltoa( err, &buf[tmpLen+1], format );
   \   000073                ; Setup parameters for call to function _ltoa
   \   000073   85....       MOV     ?V0 + 0,?V0 + 7
   \   000076   75..00       MOV     ?V0 + 1,#0x0
   \   000079   85..82       MOV     DPL,?XSP + 0
   \   00007C   85..83       MOV     DPH,?XSP + 1
   \   00007F   E582         MOV     A,DPL
   \   000081   25..         ADD     A,?V0 + 0
   \   000083   F582         MOV     DPL,A
   \   000085   E583         MOV     A,DPH
   \   000087   35..         ADDC    A,?V0 + 1
   \   000089   F583         MOV     DPH,A
   \   00008B   A3           INC     DPTR
   \   00008C   8582..       MOV     ?V0 + 0,DPL
   \   00008F   8583..       MOV     ?V0 + 1,DPH
   \   000092   78..         MOV     R0,#?V0 + 0
   \   000094   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000097   A9..         MOV     R1,?V0 + 2
   \   000099   AA..         MOV     R2,?V0 + 8
   \   00009B   AB..         MOV     R3,?V0 + 9
   \   00009D   AC..         MOV     R4,?V0 + 10
   \   00009F   AD..         MOV     R5,?V0 + 11
   \   0000A1   12....       LCALL   ??_ltoa?relay
   \   0000A4   7402         MOV     A,#0x2
   \   0000A6   12....       LCALL   ?DEALLOC_XSTACK8
    400            HalLcdWriteString( (char*)buf, line );		
   \   0000A9                ; Setup parameters for call to function HalLcdWriteString
   \   0000A9   A9..         MOV     R1,?V0 + 3
   \   0000AB   85..82       MOV     DPL,?XSP + 0
   \   0000AE   85..83       MOV     DPH,?XSP + 1
   \   0000B1   AA82         MOV     R2,DPL
   \   0000B3   AB83         MOV     R3,DPH
   \   0000B5   12....       LCALL   ??HalLcdWriteString?relay
    401          #endif
    402          }
   \   0000B8   7419         MOV     A,#0x19
   \   0000BA   12....       LCALL   ?DEALLOC_XSTACK8
   \   0000BD   7F0C         MOV     R7,#0xc
   \   0000BF   02....       LJMP    ?BANKED_LEAVE_XDATA
    403          
    404          /**************************************************************************************************
    405           * @fn      HalLcdWriteStringValue
    406           *
    407           * @brief   Write a string followed by a value to the LCD
    408           *
    409           * @param   title   - Title that will be displayed before the value
    410           *          value1  - value #1
    411           *          format1 - redix of value #1
    412           *          value2  - value #2
    413           *          format2 - redix of value #2
    414           *          line    - line number
    415           *
    416           * @return  None
    417           **************************************************************************************************/

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    418          void HalLcdWriteStringValueValue( char *title, uint16 value1, uint8 format1,
   \                     HalLcdWriteStringValueValue:
    419                                            uint16 value2, uint8 format2, uint8 line )
    420          {
   \   000000   74EB         MOV     A,#-0x15
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 21
   \   000005                ; Auto size: 25
   \   000005   74E7         MOV     A,#-0x19
   \   000007   12....       LCALL   ?ALLOC_XSTACK8
   \   00000A   EA           MOV     A,R2
   \   00000B   FE           MOV     R6,A
   \   00000C   EB           MOV     A,R3
   \   00000D   FF           MOV     R7,A
   \   00000E   8C..         MOV     ?V0 + 4,R4
   \   000010   8D..         MOV     ?V0 + 5,R5
   \   000012   89..         MOV     ?V0 + 11,R1
   \   000014   742E         MOV     A,#0x2e
   \   000016   12....       LCALL   ?XSTACK_DISP0_8
   \   000019   E0           MOVX    A,@DPTR
   \   00001A   F5..         MOV     ?V0 + 0,A
   \   00001C   A3           INC     DPTR
   \   00001D   E0           MOVX    A,@DPTR
   \   00001E   F5..         MOV     ?V0 + 1,A
   \   000020   7430         MOV     A,#0x30
   \   000022   12....       LCALL   ?XSTACK_DISP0_8
   \   000025   E0           MOVX    A,@DPTR
   \   000026   F5..         MOV     ?V0 + 12,A
   \   000028   7431         MOV     A,#0x31
   \   00002A   12....       LCALL   ?XSTACK_DISP0_8
   \   00002D   E0           MOVX    A,@DPTR
   \   00002E   F5..         MOV     ?V0 + 3,A
    421          
    422          #if (HAL_LCD == TRUE)
    423          
    424            uint8 tmpLen;
    425            uint8 buf[HAL_LCD_MAX_BUFF];
    426            uint32 err;
    427          
    428            tmpLen = (uint8)osal_strlen( (char*)title );
   \   000030                ; Setup parameters for call to function osal_strlen
   \   000030   EE           MOV     A,R6
   \   000031   FA           MOV     R2,A
   \   000032   EF           MOV     A,R7
   \   000033   FB           MOV     R3,A
   \   000034   12....       LCALL   ??osal_strlen?relay
   \   000037   EA           MOV     A,R2
   \   000038   F5..         MOV     ?V0 + 2,A
    429            if ( tmpLen )
   \   00003A   E5..         MOV     A,?V0 + 2
   \   00003C   6044         JZ      ??HalLcdWriteStringValueValue_0
    430            {
    431              osal_memcpy( buf, title, tmpLen );
   \   00003E                ; Setup parameters for call to function osal_memcpy
   \   00003E   8E..         MOV     ?V0 + 8,R6
   \   000040   8F..         MOV     ?V0 + 9,R7
   \   000042   75..00       MOV     ?V0 + 10,#0x0
   \   000045   78..         MOV     R0,#?V0 + 8
   \   000047   12....       LCALL   ?PUSH_XSTACK_I_THREE
   \   00004A   85....       MOV     ?V0 + 6,?V0 + 2
   \   00004D   75..00       MOV     ?V0 + 7,#0x0
   \   000050   AC..         MOV     R4,?V0 + 6
   \   000052   AD..         MOV     R5,?V0 + 7
   \   000054   7403         MOV     A,#0x3
   \   000056   12....       LCALL   ?XSTACK_DISP0_8
   \   000059   AA82         MOV     R2,DPL
   \   00005B   AB83         MOV     R3,DPH
   \   00005D   12....       LCALL   ??osal_memcpy?relay
   \   000060   7403         MOV     A,#0x3
   \   000062   12....       LCALL   ?DEALLOC_XSTACK8
    432              buf[tmpLen++] = ' ';
   \   000065   85....       MOV     ?V0 + 6,?V0 + 2
   \   000068   75..00       MOV     ?V0 + 7,#0x0
   \   00006B   85..82       MOV     DPL,?XSP + 0
   \   00006E   85..83       MOV     DPH,?XSP + 1
   \   000071   E582         MOV     A,DPL
   \   000073   25..         ADD     A,?V0 + 6
   \   000075   F582         MOV     DPL,A
   \   000077   E583         MOV     A,DPH
   \   000079   35..         ADDC    A,?V0 + 7
   \   00007B   F583         MOV     DPH,A
   \   00007D   7420         MOV     A,#0x20
   \   00007F   F0           MOVX    @DPTR,A
   \   000080   05..         INC     ?V0 + 2
    433            }
    434          
    435            err = (uint32)(value1);
   \                     ??HalLcdWriteStringValueValue_0:
   \   000082   E4           CLR     A
   \   000083   F5..         MOV     ?V0 + 6,A
   \   000085   F5..         MOV     ?V0 + 7,A
    436            _ltoa( err, &buf[tmpLen], format1 );
   \   000087                ; Setup parameters for call to function _ltoa
   \   000087   85....       MOV     ?V0 + 8,?V0 + 2
   \   00008A   75..00       MOV     ?V0 + 9,#0x0
   \   00008D   85..82       MOV     DPL,?XSP + 0
   \   000090   85..83       MOV     DPH,?XSP + 1
   \   000093   E582         MOV     A,DPL
   \   000095   25..         ADD     A,?V0 + 8
   \   000097   F5..         MOV     ?V0 + 8,A
   \   000099   E583         MOV     A,DPH
   \   00009B   35..         ADDC    A,?V0 + 9
   \   00009D   F5..         MOV     ?V0 + 9,A
   \   00009F   78..         MOV     R0,#?V0 + 8
   \   0000A1   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   0000A4   A9..         MOV     R1,?V0 + 11
   \   0000A6   AA..         MOV     R2,?V0 + 4
   \   0000A8   AB..         MOV     R3,?V0 + 5
   \   0000AA   AC..         MOV     R4,?V0 + 6
   \   0000AC   AD..         MOV     R5,?V0 + 7
   \   0000AE   12....       LCALL   ??_ltoa?relay
   \   0000B1   7402         MOV     A,#0x2
   \   0000B3   12....       LCALL   ?DEALLOC_XSTACK8
    437            tmpLen = (uint8)osal_strlen( (char*)buf );
   \   0000B6                ; Setup parameters for call to function osal_strlen
   \   0000B6   85..82       MOV     DPL,?XSP + 0
   \   0000B9   85..83       MOV     DPH,?XSP + 1
   \   0000BC   AA82         MOV     R2,DPL
   \   0000BE   AB83         MOV     R3,DPH
   \   0000C0   12....       LCALL   ??osal_strlen?relay
   \   0000C3   EA           MOV     A,R2
   \   0000C4   F5..         MOV     ?V0 + 2,A
    438          
    439            buf[tmpLen++] = ',';
   \   0000C6   85....       MOV     ?V0 + 4,?V0 + 2
   \   0000C9   75..00       MOV     ?V0 + 5,#0x0
   \   0000CC   85..82       MOV     DPL,?XSP + 0
   \   0000CF   85..83       MOV     DPH,?XSP + 1
   \   0000D2   E582         MOV     A,DPL
   \   0000D4   25..         ADD     A,?V0 + 4
   \   0000D6   F582         MOV     DPL,A
   \   0000D8   E583         MOV     A,DPH
   \   0000DA   35..         ADDC    A,?V0 + 5
   \   0000DC   F583         MOV     DPH,A
   \   0000DE   742C         MOV     A,#0x2c
   \   0000E0   F0           MOVX    @DPTR,A
   \   0000E1   05..         INC     ?V0 + 2
    440            buf[tmpLen++] = ' ';
   \   0000E3   85....       MOV     ?V0 + 4,?V0 + 2
   \   0000E6   75..00       MOV     ?V0 + 5,#0x0
   \   0000E9   85..82       MOV     DPL,?XSP + 0
   \   0000EC   85..83       MOV     DPH,?XSP + 1
   \   0000EF   E582         MOV     A,DPL
   \   0000F1   25..         ADD     A,?V0 + 4
   \   0000F3   F582         MOV     DPL,A
   \   0000F5   E583         MOV     A,DPH
   \   0000F7   35..         ADDC    A,?V0 + 5
   \   0000F9   F583         MOV     DPH,A
   \   0000FB   7420         MOV     A,#0x20
   \   0000FD   F0           MOVX    @DPTR,A
   \   0000FE   05..         INC     ?V0 + 2
    441            err = (uint32)(value2);
   \   000100   85....       MOV     ?V0 + 4,?V0 + 0
   \   000103   85....       MOV     ?V0 + 5,?V0 + 1
   \   000106   E4           CLR     A
   \   000107   F5..         MOV     ?V0 + 6,A
   \   000109   F5..         MOV     ?V0 + 7,A
    442            _ltoa( err, &buf[tmpLen], format2 );
   \   00010B                ; Setup parameters for call to function _ltoa
   \   00010B   85....       MOV     ?V0 + 0,?V0 + 2
   \   00010E   75..00       MOV     ?V0 + 1,#0x0
   \   000111   85..82       MOV     DPL,?XSP + 0
   \   000114   85..83       MOV     DPH,?XSP + 1
   \   000117   E582         MOV     A,DPL
   \   000119   25..         ADD     A,?V0 + 0
   \   00011B   F5..         MOV     ?V0 + 0,A
   \   00011D   E583         MOV     A,DPH
   \   00011F   35..         ADDC    A,?V0 + 1
   \   000121   F5..         MOV     ?V0 + 1,A
   \   000123   78..         MOV     R0,#?V0 + 0
   \   000125   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000128   A9..         MOV     R1,?V0 + 12
   \   00012A   AA..         MOV     R2,?V0 + 4
   \   00012C   AB..         MOV     R3,?V0 + 5
   \   00012E   AC..         MOV     R4,?V0 + 6
   \   000130   AD..         MOV     R5,?V0 + 7
   \   000132   12....       LCALL   ??_ltoa?relay
   \   000135   7402         MOV     A,#0x2
   \   000137   12....       LCALL   ?DEALLOC_XSTACK8
    443          
    444            HalLcdWriteString( (char *)buf, line );		
   \   00013A                ; Setup parameters for call to function HalLcdWriteString
   \   00013A   A9..         MOV     R1,?V0 + 3
   \   00013C   85..82       MOV     DPL,?XSP + 0
   \   00013F   85..83       MOV     DPH,?XSP + 1
   \   000142   AA82         MOV     R2,DPL
   \   000144   AB83         MOV     R3,DPH
   \   000146   12....       LCALL   ??HalLcdWriteString?relay
    445          
    446          #endif
    447          }
   \   000149   7419         MOV     A,#0x19
   \   00014B   12....       LCALL   ?DEALLOC_XSTACK8
   \   00014E   7F0D         MOV     R7,#0xd
   \   000150   02....       LJMP    ?BANKED_LEAVE_XDATA
    448          
    449          /**************************************************************************************************
    450           * @fn      HalLcdDisplayPercentBar
    451           *
    452           * @brief   Display percentage bar on the LCD
    453           *
    454           * @param   title   -
    455           *          value   -
    456           *
    457           * @return  None
    458           **************************************************************************************************/

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    459          void HalLcdDisplayPercentBar( char *title, uint8 value )
   \                     HalLcdDisplayPercentBar:
    460          {
   \   000000   74F0         MOV     A,#-0x10
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 16
   \   000005                ; Auto size: 17
   \   000005   74EF         MOV     A,#-0x11
   \   000007   12....       LCALL   ?ALLOC_XSTACK8
   \   00000A   E9           MOV     A,R1
   \   00000B   FE           MOV     R6,A
    461          #if (HAL_LCD == TRUE)
    462          
    463            uint8 percent;
    464            uint8 leftOver;
    465            uint8 buf[17];
    466            uint32 err;
    467            uint8 x;
    468          
    469            /* Write the title: */
    470            HalLcdWriteString( title, HAL_LCD_LINE_1 );
   \   00000C                ; Setup parameters for call to function HalLcdWriteString
   \   00000C   7901         MOV     R1,#0x1
   \   00000E   12....       LCALL   ??HalLcdWriteString?relay
    471          
    472            if ( value > 100 )
   \   000011   EE           MOV     A,R6
   \   000012   C3           CLR     C
   \   000013   9465         SUBB    A,#0x65
   \   000015   4002         JC      ??HalLcdDisplayPercentBar_0
    473              value = 100;
   \   000017   7E64         MOV     R6,#0x64
    474          
    475            /* convert to blocks */
    476            percent = (uint8)(value / 10);
   \                     ??HalLcdDisplayPercentBar_0:
   \   000019   75F00A       MOV     B,#0xa
   \   00001C   EE           MOV     A,R6
   \   00001D   84           DIV     AB
   \   00001E   FF           MOV     R7,A
    477            leftOver = (uint8)(value % 10);
   \   00001F   EE           MOV     A,R6
   \   000020   75F00A       MOV     B,#0xa
   \   000023   84           DIV     AB
   \   000024   E5F0         MOV     A,B
   \   000026   F5..         MOV     ?V0 + 3,A
    478          
    479            /* Make window */
    480            osal_memcpy( buf, "[          ]  ", 15 );
   \   000028                ; Setup parameters for call to function osal_memcpy
   \   000028   75....       MOV     ?V0 + 0,#`?<Constant "[          ]  ">` & 0xff
   \   00002B   75....       MOV     ?V0 + 1,#(`?<Constant "[          ]  ">` >> 8) & 0xff
   \   00002E   75..00       MOV     ?V0 + 2,#0x0
   \   000031   78..         MOV     R0,#?V0 + 0
   \   000033   12....       LCALL   ?PUSH_XSTACK_I_THREE
   \   000036   7C0F         MOV     R4,#0xf
   \   000038   7D00         MOV     R5,#0x0
   \   00003A   7403         MOV     A,#0x3
   \   00003C   12....       LCALL   ?XSTACK_DISP0_8
   \   00003F   AA82         MOV     R2,DPL
   \   000041   AB83         MOV     R3,DPH
   \   000043   12....       LCALL   ??osal_memcpy?relay
   \   000046   7403         MOV     A,#0x3
   \   000048   12....       LCALL   ?DEALLOC_XSTACK8
    481          
    482            for ( x = 0; x < percent; x ++ )
   \   00004B   75..00       MOV     ?V0 + 2,#0x0
   \   00004E   801E         SJMP    ??HalLcdDisplayPercentBar_1
    483            {
    484              buf[1+x] = '>';
   \                     ??HalLcdDisplayPercentBar_2:
   \   000050   85....       MOV     ?V0 + 0,?V0 + 2
   \   000053   75..00       MOV     ?V0 + 1,#0x0
   \   000056   85..82       MOV     DPL,?XSP + 0
   \   000059   85..83       MOV     DPH,?XSP + 1
   \   00005C   E582         MOV     A,DPL
   \   00005E   25..         ADD     A,?V0 + 0
   \   000060   F582         MOV     DPL,A
   \   000062   E583         MOV     A,DPH
   \   000064   35..         ADDC    A,?V0 + 1
   \   000066   F583         MOV     DPH,A
   \   000068   A3           INC     DPTR
   \   000069   743E         MOV     A,#0x3e
   \   00006B   F0           MOVX    @DPTR,A
    485            }
   \   00006C   05..         INC     ?V0 + 2
   \                     ??HalLcdDisplayPercentBar_1:
   \   00006E   E5..         MOV     A,?V0 + 2
   \   000070   C3           CLR     C
   \   000071   9F           SUBB    A,R7
   \   000072   40DC         JC      ??HalLcdDisplayPercentBar_2
    486          
    487            if ( leftOver >= 5 )
   \   000074   E5..         MOV     A,?V0 + 3
   \   000076   C3           CLR     C
   \   000077   9405         SUBB    A,#0x5
   \   000079   4019         JC      ??HalLcdDisplayPercentBar_3
    488              buf[1+x] = '+';
   \   00007B   75..00       MOV     ?V0 + 3,#0x0
   \   00007E   85..82       MOV     DPL,?XSP + 0
   \   000081   85..83       MOV     DPH,?XSP + 1
   \   000084   E582         MOV     A,DPL
   \   000086   25..         ADD     A,?V0 + 2
   \   000088   F582         MOV     DPL,A
   \   00008A   E583         MOV     A,DPH
   \   00008C   35..         ADDC    A,?V0 + 3
   \   00008E   F583         MOV     DPH,A
   \   000090   A3           INC     DPTR
   \   000091   742B         MOV     A,#0x2b
   \   000093   F0           MOVX    @DPTR,A
    489          
    490            err = (uint32)value;
   \                     ??HalLcdDisplayPercentBar_3:
   \   000094   EE           MOV     A,R6
   \   000095   F5..         MOV     ?V0 + 4,A
   \   000097   E4           CLR     A
   \   000098   F5..         MOV     ?V0 + 5,A
   \   00009A   F5..         MOV     ?V0 + 6,A
   \   00009C   F5..         MOV     ?V0 + 7,A
    491            _ltoa( err, (uint8*)&buf[13], 10 );
   \   00009E                ; Setup parameters for call to function _ltoa
   \   00009E   740D         MOV     A,#0xd
   \   0000A0   12....       LCALL   ?XSTACK_DISP0_8
   \   0000A3   8582..       MOV     ?V0 + 0,DPL
   \   0000A6   8583..       MOV     ?V0 + 1,DPH
   \   0000A9   78..         MOV     R0,#?V0 + 0
   \   0000AB   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   0000AE   790A         MOV     R1,#0xa
   \   0000B0   AA..         MOV     R2,?V0 + 4
   \   0000B2   AB..         MOV     R3,?V0 + 5
   \   0000B4   AC..         MOV     R4,?V0 + 6
   \   0000B6   AD..         MOV     R5,?V0 + 7
   \   0000B8   12....       LCALL   ??_ltoa?relay
   \   0000BB   7402         MOV     A,#0x2
   \   0000BD   12....       LCALL   ?DEALLOC_XSTACK8
    492          
    493            HalLcdWriteString( (char*)buf, HAL_LCD_LINE_2 );
   \   0000C0                ; Setup parameters for call to function HalLcdWriteString
   \   0000C0   7902         MOV     R1,#0x2
   \   0000C2   85..82       MOV     DPL,?XSP + 0
   \   0000C5   85..83       MOV     DPH,?XSP + 1
   \   0000C8   AA82         MOV     R2,DPL
   \   0000CA   AB83         MOV     R3,DPH
   \   0000CC   12....       LCALL   ??HalLcdWriteString?relay
    494          
    495          #endif
    496          
    497          }
   \   0000CF   7411         MOV     A,#0x11
   \   0000D1   12....       LCALL   ?DEALLOC_XSTACK8
   \   0000D4   7F08         MOV     R7,#0x8
   \   0000D6   02....       LJMP    ?BANKED_LEAVE_XDATA
    498          
    499          
    500          #if (HAL_LCD == TRUE)
    501          /**************************************************************************************************
    502           *                                    HARDWARE LCD
    503           **************************************************************************************************/
    504          
    505          /**************************************************************************************************
    506           * @fn      halLcd_ConfigIO
    507           *
    508           * @brief   Configure IO lines needed for LCD control.
    509           *
    510           * @param   None
    511           *
    512           * @return  None
    513           **************************************************************************************************/

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    514          static void halLcd_ConfigIO(void)
   \                     halLcd_ConfigIO:
    515          {
   \   000000                ; Saved register size: 0
   \   000000                ; Auto size: 0
    516            /* GPIO configuration */
    517            //我屏蔽的HAL_CONFIG_IO_OUTPUT(HAL_LCD_MODE_PORT,  HAL_LCD_MODE_PIN,  1);
    518            //我屏蔽的HAL_CONFIG_IO_OUTPUT(HAL_LCD_RESET_PORT, HAL_LCD_RESET_PIN, 1);
    519            //我屏蔽的HAL_CONFIG_IO_OUTPUT(HAL_LCD_CS_PORT,    HAL_LCD_CS_PIN,    1);
    520            //一下几行是我添加的
    521              #define cs1    P1_5	
    522              #define rs     P1_6	
    523              #define sclk   P1_2     
    524              #define sid    P0_0
    525                  P0SEL &= 0xFE;           //让P00为普通IO口，
   \   000000   53F3FE       ANL     0xf3,#0xfe
    526                  P0DIR |= 0x01;           //让P00为输出
   \   000003   43FD01       ORL     0xfd,#0x1
    527                  P1SEL &= 0x9b;           //让P12，P15，P16为普通IO口
   \   000006   53F49B       ANL     0xf4,#0x9b
    528                  P1DIR |= 0x6C;           //把P12，P15，P16 设置为输出
   \   000009   43FE6C       ORL     0xfe,#0x6c
    529          }
   \   00000C   02....       LJMP    ?BRET
   \   00000F                REQUIRE P0SEL
   \   00000F                REQUIRE P0DIR
   \   00000F                REQUIRE P1SEL
   \   00000F                REQUIRE P1DIR
    530          
    531          /**************************************************************************************************
    532           * @fn      halLcd_ConfigSPI
    533           *
    534           * @brief   Configure SPI lines needed for talking to LCD.
    535           *
    536           * @param   None
    537           *
    538           * @return  None
    539           **************************************************************************************************/
    540          //屏蔽掉这个函数
    541          //static void halLcd_ConfigSPI(void)
    542          //{
    543            /* UART/SPI Peripheral configuration */
    544          
    545          //   uint8 baud_exponent;
    546          //   uint8 baud_mantissa;
    547          
    548            /* Set SPI on UART 1 alternative 2 */
    549          //  PERCFG |= 0x02;
    550          
    551            /* Configure clk, master out and master in lines */
    552          //  HAL_CONFIG_IO_PERIPHERAL(HAL_LCD_CLK_PORT,  HAL_LCD_CLK_PIN);
    553          //  HAL_CONFIG_IO_PERIPHERAL(HAL_LCD_MOSI_PORT, HAL_LCD_MOSI_PIN);
    554          //  HAL_CONFIG_IO_PERIPHERAL(HAL_LCD_MISO_PORT, HAL_LCD_MISO_PIN);
    555          
    556          
    557            /* Set SPI speed to 1 MHz (the values assume system clk of 32MHz)
    558             * Confirm on board that this results in 1MHz spi clk.
    559             */
    560          //  baud_exponent = 15;
    561          //  baud_mantissa =  0;
    562          
    563            /* Configure SPI */
    564          //  U1UCR  = 0x80;      /* Flush and goto IDLE state. 8-N-1. */
    565          //  U1CSR  = 0x00;      /* SPI mode, master. */
    566          //  U1GCR  = HAL_SPI_TRANSFER_MSB_FIRST | HAL_SPI_CLOCK_PHA_0 | HAL_SPI_CLOCK_POL_LO | baud_exponent;
    567          //  U1BAUD = baud_mantissa;
    568          //}
    569          
    570          /**************************************************************************************************
    571           * @fn      HalLcd_HW_Control
    572           *
    573           * @brief   Write 1 command to the LCD
    574           *
    575           * @param   uint8 cmd - command to be written to the LCD
    576           *
    577           * @return  None
    578           **************************************************************************************************/

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    579          void HalLcd_HW_Control(uint8 cmd)
   \                     HalLcd_HW_Control:
    580          {
   \   000000   74F7         MOV     A,#-0x9
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 9
   \   000005                ; Auto size: 0
   \   000005   E9           MOV     A,R1
   \   000006   FF           MOV     R7,A
    581            //我屏蔽的LCD_SPI_BEGIN();
    582            //我屏蔽的LCD_DO_CONTROL();
    583            //我屏蔽的LCD_SPI_TX(cmd);
    584            //我屏蔽的LCD_SPI_WAIT_RXRDY();
    585            //我屏蔽的LCD_SPI_END();
    586            
    587            //以下是我加的
    588            	unsigned char j;
    589          
    590          	cs1 = 0;
   \   000007   C295         CLR     0x90.5
    591                  rs = 0;
   \   000009   C296         CLR     0x90.6
    592          	
    593          	for (j = 0; j < 8; j++)
   \   00000B   7E00         MOV     R6,#0x0
   \   00000D   8017         SJMP    ??HalLcd_HW_Control_0
    594          	      {
    595          		sclk=0;
    596                            if(cmd&0x80)  sid = 1;
    597                          else sid = 0;
   \                     ??HalLcd_HW_Control_1:
   \   00000F   C280         CLR     0x80.0
    598                          HalLcd_HW_WaitUs(1);
   \                     ??HalLcd_HW_Control_2:
   \   000011                ; Setup parameters for call to function HalLcd_HW_WaitUs
   \   000011   7A01         MOV     R2,#0x1
   \   000013   7B00         MOV     R3,#0x0
   \   000015   12....       LCALL   ??HalLcd_HW_WaitUs?relay
    599          		sclk = 1;
   \   000018   D292         SETB    0x90.2
    600          		HalLcd_HW_WaitUs(1);
   \   00001A                ; Setup parameters for call to function HalLcd_HW_WaitUs
   \   00001A   7A01         MOV     R2,#0x1
   \   00001C   7B00         MOV     R3,#0x0
   \   00001E   12....       LCALL   ??HalLcd_HW_WaitUs?relay
    601          		cmd = cmd << 1;
   \   000021   EF           MOV     A,R7
   \   000022   C3           CLR     C
   \   000023   33           RLC     A
   \   000024   FF           MOV     R7,A
   \   000025   0E           INC     R6
   \                     ??HalLcd_HW_Control_0:
   \   000026   EE           MOV     A,R6
   \   000027   C3           CLR     C
   \   000028   9408         SUBB    A,#0x8
   \   00002A   500B         JNC     ??HalLcd_HW_Control_3
   \   00002C   C292         CLR     0x90.2
   \   00002E   EF           MOV     A,R7
   \   00002F   A2E7         MOV     C,0xE0 /* A   */.7
   \   000031   50DC         JNC     ??HalLcd_HW_Control_1
   \   000033   D280         SETB    0x80.0
   \   000035   80DA         SJMP    ??HalLcd_HW_Control_2
    602          	      }
    603          }
   \                     ??HalLcd_HW_Control_3:
   \   000037   7F01         MOV     R7,#0x1
   \   000039   02....       LJMP    ?BANKED_LEAVE_XDATA
   \   00003C                REQUIRE _A_P1
   \   00003C                REQUIRE _A_P0
    604          
    605          /**************************************************************************************************
    606           * @fn      HalLcd_HW_Write
    607           *
    608           * @brief   Write 1 byte to the LCD
    609           *
    610           * @param   uint8 data - data to be written to the LCD
    611           *
    612           * @return  None
    613           **************************************************************************************************/

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    614          void HalLcd_HW_Write(uint8 data)
   \                     HalLcd_HW_Write:
    615          {
   \   000000                ; Saved register size: 0
   \   000000                ; Auto size: 0
    616            //我屏蔽的LCD_SPI_BEGIN();
    617            //我屏蔽的LCD_DO_WRITE();
    618            //我屏蔽的LCD_SPI_TX(data);
    619            //我屏蔽的LCD_SPI_WAIT_RXRDY();
    620            //我屏蔽的LCD_SPI_END();
    621            
    622            //以下是我加的
    623            	char j;
    624          
    625          	cs1 = 0;
   \   000000   C295         CLR     0x90.5
    626          	rs = 1;
   \   000002   D296         SETB    0x90.6
    627          	
    628          	for (j = 0; j < 8; j++)
   \   000004   7800         MOV     R0,#0x0
   \   000006   8009         SJMP    ??HalLcd_HW_Write_0
    629          	{
    630          		sclk = 0;
    631                            if(data&0x80)  sid = 1;
    632                          else sid = 0;
   \                     ??HalLcd_HW_Write_1:
   \   000008   C280         CLR     0x80.0
    633          		sclk = 1;
   \                     ??HalLcd_HW_Write_2:
   \   00000A   D292         SETB    0x90.2
    634          		data = data << 1;
   \   00000C   E9           MOV     A,R1
   \   00000D   C3           CLR     C
   \   00000E   33           RLC     A
   \   00000F   F9           MOV     R1,A
   \   000010   08           INC     R0
   \                     ??HalLcd_HW_Write_0:
   \   000011   E8           MOV     A,R0
   \   000012   C3           CLR     C
   \   000013   9408         SUBB    A,#0x8
   \   000015   500B         JNC     ??HalLcd_HW_Write_3
   \   000017   C292         CLR     0x90.2
   \   000019   E9           MOV     A,R1
   \   00001A   A2E7         MOV     C,0xE0 /* A   */.7
   \   00001C   50EA         JNC     ??HalLcd_HW_Write_1
   \   00001E   D280         SETB    0x80.0
   \   000020   80E8         SJMP    ??HalLcd_HW_Write_2
    635          	}
    636          }
   \                     ??HalLcd_HW_Write_3:
   \   000022   02....       LJMP    ?BRET
   \   000025                REQUIRE _A_P1
   \   000025                REQUIRE _A_P0
    637          
    638          /**************************************************************************************************
    639           * @fn          HalLcd_HW_SetContrast
    640           *
    641           * @brief       Set display contrast
    642           *
    643           * @param       uint8 value - contrast value
    644           *
    645           * @return      none
    646           **************************************************************************************************/
    647          //屏蔽掉这个函数
    648          /*void HalLcd_HW_SetContrast(uint8 value)
    649          {
    650            SET_ICONRAM_ADDR(CONTRAST_CTRL_REGISTER);
    651            HalLcd_HW_Write(value);
    652          }*/
    653          
    654          /**************************************************************************************************
    655           * @fn      HalLcd_HW_Clear
    656           *
    657           * @brief   Clear the HW LCD
    658           *
    659           * @param   None
    660           *
    661           * @return  None
    662           **************************************************************************************************/

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    663          void HalLcd_HW_Clear(void)
   \                     HalLcd_HW_Clear:
    664          {
   \   000000   74F6         MOV     A,#-0xa
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 10
   \   000005                ; Auto size: 0
    665             //我屏蔽的uint8 n;
    666          
    667             //我屏蔽的SET_DDRAM_ADDR(0x00);
    668             //我屏蔽的or (n = 0; n < (LCD_MAX_LINE_COUNT * HAL_LCD_MAX_CHARS); n++)
    669             //我屏蔽的{
    670               //我屏蔽的HalLcd_HW_Write(' ');
    671             //我屏蔽的}
    672            
    673            //以下是我加的
    674              	int i,j;
    675          	for (i = 0; i < 9; i++)
   \   000005   7E00         MOV     R6,#0x0
   \   000007   7F00         MOV     R7,#0x0
   \   000009   8029         SJMP    ??HalLcd_HW_Clear_0
    676          	{
    677                    cs1 = 0;
    678          		HalLcd_HW_Control(0xb0+i);
    679          		HalLcd_HW_Control(0x10);
    680          		HalLcd_HW_Control(0x00);
    681          		for (j = 0; j < 132; j++)
    682          		{
    683          			HalLcd_HW_Write(0x00);
   \                     ??HalLcd_HW_Clear_1:
   \   00000B                ; Setup parameters for call to function HalLcd_HW_Write
   \   00000B   7900         MOV     R1,#0x0
   \   00000D   12....       LCALL   ??HalLcd_HW_Write?relay
    684          		}
   \   000010   E5..         MOV     A,?V0 + 0
   \   000012   2401         ADD     A,#0x1
   \   000014   F5..         MOV     ?V0 + 0,A
   \   000016   E5..         MOV     A,?V0 + 1
   \   000018   3400         ADDC    A,#0x0
   \   00001A   F5..         MOV     ?V0 + 1,A
   \                     ??HalLcd_HW_Clear_2:
   \   00001C   C3           CLR     C
   \   00001D   E5..         MOV     A,?V0 + 0
   \   00001F   9484         SUBB    A,#-0x7c
   \   000021   E5..         MOV     A,?V0 + 1
   \   000023   9400         SUBB    A,#0x0
   \   000025   A2D2         MOV     C,0xD0 /* PSW */.2
   \   000027   65D0         XRL     A,PSW
   \   000029   33           RLC     A
   \   00002A   40DF         JC      ??HalLcd_HW_Clear_1
   \   00002C   EE           MOV     A,R6
   \   00002D   2401         ADD     A,#0x1
   \   00002F   FE           MOV     R6,A
   \   000030   EF           MOV     A,R7
   \   000031   3400         ADDC    A,#0x0
   \   000033   FF           MOV     R7,A
   \                     ??HalLcd_HW_Clear_0:
   \   000034   C3           CLR     C
   \   000035   EE           MOV     A,R6
   \   000036   9409         SUBB    A,#0x9
   \   000038   EF           MOV     A,R7
   \   000039   9400         SUBB    A,#0x0
   \   00003B   A2D2         MOV     C,0xD0 /* PSW */.2
   \   00003D   65D0         XRL     A,PSW
   \   00003F   33           RLC     A
   \   000040   501B         JNC     ??HalLcd_HW_Clear_3
   \   000042   C295         CLR     0x90.5
   \   000044                ; Setup parameters for call to function HalLcd_HW_Control
   \   000044   EE           MOV     A,R6
   \   000045   24B0         ADD     A,#-0x50
   \   000047   F9           MOV     R1,A
   \   000048   12....       LCALL   ??HalLcd_HW_Control?relay
   \   00004B                ; Setup parameters for call to function HalLcd_HW_Control
   \   00004B   7910         MOV     R1,#0x10
   \   00004D   12....       LCALL   ??HalLcd_HW_Control?relay
   \   000050                ; Setup parameters for call to function HalLcd_HW_Control
   \   000050   7900         MOV     R1,#0x0
   \   000052   12....       LCALL   ??HalLcd_HW_Control?relay
   \   000055   75..00       MOV     ?V0 + 0,#0x0
   \   000058   75..00       MOV     ?V0 + 1,#0x0
   \   00005B   80BF         SJMP    ??HalLcd_HW_Clear_2
    685          	}
    686          }
   \                     ??HalLcd_HW_Clear_3:
   \   00005D   7F02         MOV     R7,#0x2
   \   00005F   02....       LJMP    ?BANKED_LEAVE_XDATA
   \   000062                REQUIRE _A_P1
    687          
    688          /**************************************************************************************************
    689           * @fn      HalLcd_HW_Init
    690           *
    691           * @brief   Initilize HW LCD Driver.
    692           *
    693           * @param   None
    694           *
    695           * @return  None
    696           **************************************************************************************************/

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    697          void HalLcd_HW_Init(void)
   \                     HalLcd_HW_Init:
    698          {
   \   000000   C082         PUSH    DPL
   \   000002   C083         PUSH    DPH
   \   000004                ; Saved register size: 2
   \   000004                ; Auto size: 0
    699            //把这个函数体屏蔽
    700            /* Initialize LCD IO lines */
    701            //我屏蔽的halLcd_ConfigIO();
    702          
    703            /* Initialize SPI */
    704            //我屏蔽的halLcd_ConfigSPI();
    705          
    706            /* Perform reset */
    707            //我屏蔽的LCD_ACTIVATE_RESET();
    708            //我屏蔽的HalLcd_HW_WaitUs(15000); // 15 ms
    709            //我屏蔽的LCD_RELEASE_RESET();
    710            //我屏蔽的HalLcd_HW_WaitUs(15); // 15 us
    711          
    712            /* Perform the initialization sequence */
    713            //我屏蔽的FUNCTION_SET(CGRAM | COM_FORWARD | THREE_LINE);
    714          
    715            /* Set contrast */
    716            //我屏蔽的HalLcd_HW_SetContrast(15);
    717          
    718            /* Set power */
    719            //我屏蔽的SET_POWER_SAVE_MODE(OSC_OFF | POWER_SAVE_ON);
    720            //我屏蔽的SET_POWER_CTRL(VOLTAGE_DIVIDER_ON | CONVERTER_AND_REG_ON);
    721            //我屏蔽的SET_BIAS_CTRL(BIAS_1_5);
    722            //我屏蔽的HalLcd_HW_WaitUs(21000);// 21 ms
    723          
    724            /* Clear the display */
    725            //我屏蔽的HalLcd_HW_Clear();
    726            //我屏蔽的HalLcd_HW_ClearAllSpecChars();
    727            //我屏蔽的SET_DISPLAY_CTRL(DISPLAY_CTRL_ON | DISPLAY_CTRL_BLINK_OFF | DISPLAY_CTRL_CURSOR_OFF);
    728          //以下是我加的
    729          
    730                    
    731              HalLcd_HW_WaitUs(20);
   \   000004                ; Setup parameters for call to function HalLcd_HW_WaitUs
   \   000004   7A14         MOV     R2,#0x14
   \   000006   7B00         MOV     R3,#0x0
   \   000008   12....       LCALL   ??HalLcd_HW_WaitUs?relay
    732              halLcd_ConfigIO();
   \   00000B                ; Setup parameters for call to function halLcd_ConfigIO
   \   00000B   12....       LCALL   ??halLcd_ConfigIO?relay
    733                  
    734          	HalLcd_HW_Control(0xe2);          //软复位
   \   00000E                ; Setup parameters for call to function HalLcd_HW_Control
   \   00000E   79E2         MOV     R1,#-0x1e
   \   000010   12....       LCALL   ??HalLcd_HW_Control?relay
    735              HalLcd_HW_WaitUs(15);
   \   000013                ; Setup parameters for call to function HalLcd_HW_WaitUs
   \   000013   7A0F         MOV     R2,#0xf
   \   000015   7B00         MOV     R3,#0x0
   \   000017   12....       LCALL   ??HalLcd_HW_WaitUs?relay
    736                  HalLcd_HW_Control(0x2c);          //升压步聚1
   \   00001A                ; Setup parameters for call to function HalLcd_HW_Control
   \   00001A   792C         MOV     R1,#0x2c
   \   00001C   12....       LCALL   ??HalLcd_HW_Control?relay
    737              HalLcd_HW_WaitUs(15);
   \   00001F                ; Setup parameters for call to function HalLcd_HW_WaitUs
   \   00001F   7A0F         MOV     R2,#0xf
   \   000021   7B00         MOV     R3,#0x0
   \   000023   12....       LCALL   ??HalLcd_HW_WaitUs?relay
    738          	HalLcd_HW_Control(0x2e);          //升压步聚2
   \   000026                ; Setup parameters for call to function HalLcd_HW_Control
   \   000026   792E         MOV     R1,#0x2e
   \   000028   12....       LCALL   ??HalLcd_HW_Control?relay
    739              HalLcd_HW_WaitUs(15);
   \   00002B                ; Setup parameters for call to function HalLcd_HW_WaitUs
   \   00002B   7A0F         MOV     R2,#0xf
   \   00002D   7B00         MOV     R3,#0x0
   \   00002F   12....       LCALL   ??HalLcd_HW_WaitUs?relay
    740          	HalLcd_HW_Control(0x2f);          //升压步聚
   \   000032                ; Setup parameters for call to function HalLcd_HW_Control
   \   000032   792F         MOV     R1,#0x2f
   \   000034   12....       LCALL   ??HalLcd_HW_Control?relay
    741              HalLcd_HW_WaitUs(15);
   \   000037                ; Setup parameters for call to function HalLcd_HW_WaitUs
   \   000037   7A0F         MOV     R2,#0xf
   \   000039   7B00         MOV     R3,#0x0
   \   00003B   12....       LCALL   ??HalLcd_HW_WaitUs?relay
    742          	HalLcd_HW_Control(0x23);          //粗调对比度，可设置范围20～27
   \   00003E                ; Setup parameters for call to function HalLcd_HW_Control
   \   00003E   7923         MOV     R1,#0x23
   \   000040   12....       LCALL   ??HalLcd_HW_Control?relay
    743              HalLcd_HW_WaitUs(15);
   \   000043                ; Setup parameters for call to function HalLcd_HW_WaitUs
   \   000043   7A0F         MOV     R2,#0xf
   \   000045   7B00         MOV     R3,#0x0
   \   000047   12....       LCALL   ??HalLcd_HW_WaitUs?relay
    744                  HalLcd_HW_Control(0x81);          //微调对比度
   \   00004A                ; Setup parameters for call to function HalLcd_HW_Control
   \   00004A   7981         MOV     R1,#-0x7f
   \   00004C   12....       LCALL   ??HalLcd_HW_Control?relay
    745              HalLcd_HW_WaitUs(15);
   \   00004F                ; Setup parameters for call to function HalLcd_HW_WaitUs
   \   00004F   7A0F         MOV     R2,#0xf
   \   000051   7B00         MOV     R3,#0x0
   \   000053   12....       LCALL   ??HalLcd_HW_WaitUs?relay
    746                  HalLcd_HW_Control(0x1f); 
   \   000056                ; Setup parameters for call to function HalLcd_HW_Control
   \   000056   791F         MOV     R1,#0x1f
   \   000058   12....       LCALL   ??HalLcd_HW_Control?relay
    747              HalLcd_HW_WaitUs(15);
   \   00005B                ; Setup parameters for call to function HalLcd_HW_WaitUs
   \   00005B   7A0F         MOV     R2,#0xf
   \   00005D   7B00         MOV     R3,#0x0
   \   00005F   12....       LCALL   ??HalLcd_HW_WaitUs?relay
    748                  HalLcd_HW_Control(0xa1);
   \   000062                ; Setup parameters for call to function HalLcd_HW_Control
   \   000062   79A1         MOV     R1,#-0x5f
   \   000064   12....       LCALL   ??HalLcd_HW_Control?relay
    749              HalLcd_HW_WaitUs(15);
   \   000067                ; Setup parameters for call to function HalLcd_HW_WaitUs
   \   000067   7A0F         MOV     R2,#0xf
   \   000069   7B00         MOV     R3,#0x0
   \   00006B   12....       LCALL   ??HalLcd_HW_WaitUs?relay
    750                  HalLcd_HW_Control(0xc8);
   \   00006E                ; Setup parameters for call to function HalLcd_HW_Control
   \   00006E   79C8         MOV     R1,#-0x38
   \   000070   12....       LCALL   ??HalLcd_HW_Control?relay
    751              HalLcd_HW_WaitUs(15);
   \   000073                ; Setup parameters for call to function HalLcd_HW_WaitUs
   \   000073   7A0F         MOV     R2,#0xf
   \   000075   7B00         MOV     R3,#0x0
   \   000077   12....       LCALL   ??HalLcd_HW_WaitUs?relay
    752          	HalLcd_HW_Control(0xa0);          //行扫描顺序：从上到下
   \   00007A                ; Setup parameters for call to function HalLcd_HW_Control
   \   00007A   79A0         MOV     R1,#-0x60
   \   00007C   12....       LCALL   ??HalLcd_HW_Control?relay
    753              HalLcd_HW_WaitUs(15);
   \   00007F                ; Setup parameters for call to function HalLcd_HW_WaitUs
   \   00007F   7A0F         MOV     R2,#0xf
   \   000081   7B00         MOV     R3,#0x0
   \   000083   12....       LCALL   ??HalLcd_HW_WaitUs?relay
    754                  HalLcd_HW_Control(0x40);          //升压电路设置指令代码
   \   000086                ; Setup parameters for call to function HalLcd_HW_Control
   \   000086   7940         MOV     R1,#0x40
   \   000088   12....       LCALL   ??HalLcd_HW_Control?relay
    755              HalLcd_HW_WaitUs(15);
   \   00008B                ; Setup parameters for call to function HalLcd_HW_WaitUs
   \   00008B   7A0F         MOV     R2,#0xf
   \   00008D   7B00         MOV     R3,#0x0
   \   00008F   12....       LCALL   ??HalLcd_HW_WaitUs?relay
    756                  HalLcd_HW_Control(0xaf);          //开显示 
   \   000092                ; Setup parameters for call to function HalLcd_HW_Control
   \   000092   79AF         MOV     R1,#-0x51
   \   000094   12....       LCALL   ??HalLcd_HW_Control?relay
    757                  HalLcd_HW_Clear(); 
   \   000097                ; Setup parameters for call to function HalLcd_HW_Clear
   \   000097   12....       LCALL   ??HalLcd_HW_Clear?relay
    758          }
   \   00009A   D083         POP     DPH
   \   00009C   D082         POP     DPL
   \   00009E   02....       LJMP    ?BRET
    759          
    760          /**************************************************************************************************
    761           * @fn      HalLcd_HW_ClearAllSpecChars
    762           *
    763           * @brief   Clear all special chars
    764           *
    765           * @param   None
    766           *
    767           * @return  None
    768           **************************************************************************************************/
    769          //屏蔽掉这个函数
    770          /*void HalLcd_HW_ClearAllSpecChars(void)
    771          {
    772            uint8 n = 0;
    773          
    774            SET_GCRAM_CHAR(0);
    775            for (n = 0; n < (8 * 8); n++)
    776            {
    777              HalLcd_HW_Write(0x00);
    778            }
    779          }*/
    780          
    781          
    782          /*      这个函数是我加的
    783          作用    设置LCD 文本显示的其实行和列
    784          参数1   line,范围:0~7,即能够显示的行为1~8行，也就是lcd手册里提到的page
    785          参数2   col,范围:0~127,即lcd的总列数，显示的起始位置可以设置到每一列
    786          */

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    787          void set_ddram_line_col(uint8 line,uint8 col)
   \                     set_ddram_line_col:
    788          {
   \   000000   74F4         MOV     A,#-0xc
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 12
   \   000005                ; Auto size: 0
   \   000005   E9           MOV     A,R1
   \   000006   FF           MOV     R7,A
   \   000007   8A..         MOV     ?V0 + 0,R2
    789          
    790            uint8 page,coll,coll_l,coll_h;
    791            page = line;
   \   000009   8F..         MOV     ?V0 + 1,R7
    792            coll = col;
   \   00000B   85....       MOV     ?V0 + 2,?V0 + 0
    793            coll_h = coll>>4;
   \   00000E   E5..         MOV     A,?V0 + 2
   \   000010   C4           SWAP    A
   \   000011   540F         ANL     A,#0xf
   \   000013   F5..         MOV     ?V0 + 3,A
    794            coll_l = coll&0x0f;
   \   000015   740F         MOV     A,#0xf
   \   000017   55..         ANL     A,?V0 + 2
   \   000019   FE           MOV     R6,A
    795            HalLcd_HW_Control(0xB0+page);
   \   00001A                ; Setup parameters for call to function HalLcd_HW_Control
   \   00001A   74B0         MOV     A,#-0x50
   \   00001C   25..         ADD     A,?V0 + 1
   \   00001E   F9           MOV     R1,A
   \   00001F   12....       LCALL   ??HalLcd_HW_Control?relay
    796            HalLcd_HW_WaitUs(15); // 15 us
   \   000022                ; Setup parameters for call to function HalLcd_HW_WaitUs
   \   000022   7A0F         MOV     R2,#0xf
   \   000024   7B00         MOV     R3,#0x0
   \   000026   12....       LCALL   ??HalLcd_HW_WaitUs?relay
    797            HalLcd_HW_Control(0x10+coll_h);
   \   000029                ; Setup parameters for call to function HalLcd_HW_Control
   \   000029   7410         MOV     A,#0x10
   \   00002B   25..         ADD     A,?V0 + 3
   \   00002D   F9           MOV     R1,A
   \   00002E   12....       LCALL   ??HalLcd_HW_Control?relay
    798            HalLcd_HW_WaitUs(15); // 15 us
   \   000031                ; Setup parameters for call to function HalLcd_HW_WaitUs
   \   000031   7A0F         MOV     R2,#0xf
   \   000033   7B00         MOV     R3,#0x0
   \   000035   12....       LCALL   ??HalLcd_HW_WaitUs?relay
    799            HalLcd_HW_Control(0x00+coll_l);
   \   000038                ; Setup parameters for call to function HalLcd_HW_Control
   \   000038   EE           MOV     A,R6
   \   000039   F9           MOV     R1,A
   \   00003A   12....       LCALL   ??HalLcd_HW_Control?relay
    800            HalLcd_HW_WaitUs(15); // 15 us
   \   00003D                ; Setup parameters for call to function HalLcd_HW_WaitUs
   \   00003D   7A0F         MOV     R2,#0xf
   \   00003F   7B00         MOV     R3,#0x0
   \   000041   12....       LCALL   ??HalLcd_HW_WaitUs?relay
    801          }
   \   000044   7F04         MOV     R7,#0x4
   \   000046   02....       LJMP    ?BANKED_LEAVE_XDATA
    802          
    803          /*       这个函数是我加的
    804          作用     显示一个字节的字符，该字符大小为宽5个点，高7个点
    805          参数1    page,范围0~7,共8行
    806          参数2    column,范围0~127
    807          参数3    text,要显示的字符，该值为ascii码
    808          */

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    809          void DisplayByte_5x7(uint8 page,uint8 column,char text)
   \                     DisplayByte_5x7:
    810          {
   \   000000   74F3         MOV     A,#-0xd
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 13
   \   000005                ; Auto size: 0
   \   000005   89..         MOV     ?V0 + 1,R1
   \   000007   8A..         MOV     ?V0 + 0,R2
   \   000009   8B..         MOV     ?V0 + 4,R3
    811          	int j,k;
    812          
    813          	if((text>=0x20)&&(text<0x7e)){/*需要显示的文字*/
   \   00000B   E5..         MOV     A,?V0 + 4
   \   00000D   C3           CLR     C
   \   00000E   9420         SUBB    A,#0x20
   \   000010   C3           CLR     C
   \   000011   945E         SUBB    A,#0x5e
   \   000013   5072         JNC     ??DisplayByte_5x7_0
    814          		j=text-0x20;/*寻址，通过字符的ascii码找到点阵库中的改字符的位置*/
   \   000015   85....       MOV     ?V0 + 2,?V0 + 4
   \   000018   75..00       MOV     ?V0 + 3,#0x0
   \   00001B   E5..         MOV     A,?V0 + 2
   \   00001D   24E0         ADD     A,#-0x20
   \   00001F   F5..         MOV     ?V0 + 2,A
   \   000021   E5..         MOV     A,?V0 + 3
   \   000023   34FF         ADDC    A,#-0x1
   \   000025   F5..         MOV     ?V0 + 3,A
    815          		set_ddram_line_col(page,column);
   \   000027                ; Setup parameters for call to function set_ddram_line_col
   \   000027   AA..         MOV     R2,?V0 + 0
   \   000029   A9..         MOV     R1,?V0 + 1
   \   00002B   12....       LCALL   ??set_ddram_line_col?relay
    816          		for(k=0;k<5;k++)
   \   00002E   7E00         MOV     R6,#0x0
   \   000030   7F00         MOV     R7,#0x0
   \   000032   8038         SJMP    ??DisplayByte_5x7_1
    817          		{
    818          			HalLcd_HW_Write(ascii_table_5x7[j][k]);/*显示5x7的ASCII字到LCD上，y为页地址，x为列地址，最后为数据*/
   \                     ??DisplayByte_5x7_2:
   \   000034                ; Setup parameters for call to function HalLcd_HW_Write
   \   000034   A8..         MOV     R0,?V0 + 2
   \   000036   A9..         MOV     R1,?V0 + 3
   \   000038   E8           MOV     A,R0
   \   000039   75F005       MOV     B,#0x5
   \   00003C   A4           MUL     AB
   \   00003D   C8           XCH     A,R0
   \   00003E   AAF0         MOV     R2,B
   \   000040   75F000       MOV     B,#0x0
   \   000043   A4           MUL     AB
   \   000044   2A           ADD     A,R2
   \   000045   FA           MOV     R2,A
   \   000046   75F005       MOV     B,#0x5
   \   000049   E5..         MOV     A,?V0 + 3
   \   00004B   A4           MUL     AB
   \   00004C   2A           ADD     A,R2
   \   00004D   F9           MOV     R1,A
   \   00004E   74..         MOV     A,#ascii_table_5x7 & 0xff
   \   000050   28           ADD     A,R0
   \   000051   F8           MOV     R0,A
   \   000052   74..         MOV     A,#(ascii_table_5x7 >> 8) & 0xff
   \   000054   39           ADDC    A,R1
   \   000055   F9           MOV     R1,A
   \   000056   E8           MOV     A,R0
   \   000057   2E           ADD     A,R6
   \   000058   F582         MOV     DPL,A
   \   00005A   E9           MOV     A,R1
   \   00005B   3F           ADDC    A,R7
   \   00005C   F583         MOV     DPH,A
   \   00005E   E4           CLR     A
   \   00005F   93           MOVC    A,@A+DPTR
   \   000060   F9           MOV     R1,A
   \   000061   12....       LCALL   ??HalLcd_HW_Write?relay
    819          		}
   \   000064   EE           MOV     A,R6
   \   000065   2401         ADD     A,#0x1
   \   000067   FE           MOV     R6,A
   \   000068   EF           MOV     A,R7
   \   000069   3400         ADDC    A,#0x0
   \   00006B   FF           MOV     R7,A
   \                     ??DisplayByte_5x7_1:
   \   00006C   C3           CLR     C
   \   00006D   EE           MOV     A,R6
   \   00006E   9405         SUBB    A,#0x5
   \   000070   EF           MOV     A,R7
   \   000071   9400         SUBB    A,#0x0
   \   000073   A2D2         MOV     C,0xD0 /* PSW */.2
   \   000075   65D0         XRL     A,PSW
   \   000077   33           RLC     A
   \   000078   40BA         JC      ??DisplayByte_5x7_2
    820          		//第六列写入0，即清除上一次留下来的数据
    821          		HalLcd_HW_Write(0x00);
   \   00007A                ; Setup parameters for call to function HalLcd_HW_Write
   \   00007A   7900         MOV     R1,#0x0
   \   00007C   12....       LCALL   ??HalLcd_HW_Write?relay
    822          		column+=6;
   \   00007F   7406         MOV     A,#0x6
   \   000081   25..         ADD     A,?V0 + 0
   \   000083   F5..         MOV     ?V0 + 0,A
   \   000085   802C         SJMP    ??DisplayByte_5x7_3
    823          	}else if(text==0x00){/*不需要显示，清空指定位置*/
   \                     ??DisplayByte_5x7_0:
   \   000087   E5..         MOV     A,?V0 + 4
   \   000089   7028         JNZ     ??DisplayByte_5x7_3
    824          		set_ddram_line_col(page,column);
   \   00008B                ; Setup parameters for call to function set_ddram_line_col
   \   00008B   AA..         MOV     R2,?V0 + 0
   \   00008D   A9..         MOV     R1,?V0 + 1
   \   00008F   12....       LCALL   ??set_ddram_line_col?relay
    825          		for(k=0;k<5;k++){
   \   000092   7E00         MOV     R6,#0x0
   \   000094   7F00         MOV     R7,#0x0
   \   000096   800D         SJMP    ??DisplayByte_5x7_4
    826          			HalLcd_HW_Write(0x00); //清空指定的字符位置
   \                     ??DisplayByte_5x7_5:
   \   000098                ; Setup parameters for call to function HalLcd_HW_Write
   \   000098   7900         MOV     R1,#0x0
   \   00009A   12....       LCALL   ??HalLcd_HW_Write?relay
    827          		}
   \   00009D   EE           MOV     A,R6
   \   00009E   2401         ADD     A,#0x1
   \   0000A0   FE           MOV     R6,A
   \   0000A1   EF           MOV     A,R7
   \   0000A2   3400         ADDC    A,#0x0
   \   0000A4   FF           MOV     R7,A
   \                     ??DisplayByte_5x7_4:
   \   0000A5   C3           CLR     C
   \   0000A6   EE           MOV     A,R6
   \   0000A7   9405         SUBB    A,#0x5
   \   0000A9   EF           MOV     A,R7
   \   0000AA   9400         SUBB    A,#0x0
   \   0000AC   A2D2         MOV     C,0xD0 /* PSW */.2
   \   0000AE   65D0         XRL     A,PSW
   \   0000B0   33           RLC     A
   \   0000B1   40E5         JC      ??DisplayByte_5x7_5
    828          	}
    829          
    830          }
   \                     ??DisplayByte_5x7_3:
   \   0000B3   7F05         MOV     R7,#0x5
   \   0000B5   02....       LJMP    ?BANKED_LEAVE_XDATA
    831          
    832          /**************************************************************************************************
    833           * @fn      HalLcd_HW_WriteChar
    834           *
    835           * @brief   Write one char to the display
    836           *
    837           * @param   uint8 line - line number that the char will be displayed
    838           *          uint8 col - colum where the char will be displayed
    839           *
    840           * @return  None
    841           **************************************************************************************************/

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    842          void HalLcd_HW_WriteChar(uint8 line, uint8 col, char text)
   \                     HalLcd_HW_WriteChar:
    843          {
   \   000000   74F7         MOV     A,#-0x9
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 9
   \   000005                ; Auto size: 0
   \   000005   E9           MOV     A,R1
   \   000006   FF           MOV     R7,A
   \   000007   8A..         MOV     ?V0 + 0,R2
   \   000009   EB           MOV     A,R3
   \   00000A   FE           MOV     R6,A
    844            //吧这个函数内容屏蔽掉，添加自己的
    845            /*if (col < HAL_LCD_MAX_CHARS)
    846            {
    847              SET_DDRAM_ADDR((line - 1) * HAL_LCD_MAX_CHARS + col);
    848              HalLcd_HW_Write(text);
    849            }
    850            else
    851            {
    852              return;
    853            }*/
    854            
    855            //以下是我加的
    856            	uint8 column = 1+col*6;
   \   00000B   75F006       MOV     B,#0x6
   \   00000E   E5..         MOV     A,?V0 + 0
   \   000010   A4           MUL     AB
   \   000011   2401         ADD     A,#0x1
   \   000013   FA           MOV     R2,A
    857          	uint8 page = line-1;
   \   000014   74FF         MOV     A,#-0x1
   \   000016   2F           ADD     A,R7
   \   000017   F9           MOV     R1,A
    858          	if(col > 21)/*超出部分不显示*/
   \   000018   E5..         MOV     A,?V0 + 0
   \   00001A   C3           CLR     C
   \   00001B   9416         SUBB    A,#0x16
   \   00001D   5005         JNC     ??HalLcd_HW_WriteChar_0
    859          		return;
    860          	DisplayByte_5x7(page,column,text);
   \   00001F                ; Setup parameters for call to function DisplayByte_5x7
   \   00001F   EE           MOV     A,R6
   \   000020   FB           MOV     R3,A
   \   000021   12....       LCALL   ??DisplayByte_5x7?relay
    861          }
   \                     ??HalLcd_HW_WriteChar_0:
   \   000024   7F01         MOV     R7,#0x1
   \   000026   02....       LJMP    ?BANKED_LEAVE_XDATA
    862          
    863          /**************************************************************************************************
    864           * @fn          halLcdWriteLine
    865           *
    866           * @brief       Write one line on display
    867           *
    868           * @param       uint8 line - display line
    869           *              char *pText - text buffer to write
    870           *
    871           * @return      none
    872           **************************************************************************************************/

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    873          void HalLcd_HW_WriteLine(uint8 line, const char *pText)
   \                     HalLcd_HW_WriteLine:
    874          {
   \   000000   74F5         MOV     A,#-0xb
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 11
   \   000005                ; Auto size: 0
   \   000005   89..         MOV     ?V0 + 1,R1
   \   000007   EA           MOV     A,R2
   \   000008   FE           MOV     R6,A
   \   000009   EB           MOV     A,R3
   \   00000A   FF           MOV     R7,A
    875            //吧这个函数内容屏蔽掉
    876            //我屏蔽的uint8 count;
    877            //我屏蔽的uint8 totalLength = (uint8)osal_strlen( (char *)pText );
    878          
    879            /* Write the content first */
    880            //我屏蔽的for (count=0; count<totalLength; count++)
    881            //我屏蔽的{
    882              //我屏蔽的HalLcd_HW_WriteChar(line, count, (*(pText++)));
    883            //我屏蔽的}
    884          
    885            /* Write blank spaces to rest of the line */
    886            //我屏蔽的for(count=totalLength; count<HAL_LCD_MAX_CHARS;count++)
    887            //我屏蔽的{
    888            //我屏蔽的  HalLcd_HW_WriteChar(line, count, ' ');
    889            //我屏蔽的}
    890            
    891            //以下是我加的
    892               uint8 count; 
    893               uint8 totalLength = (uint8)osal_strlen( (char *)pText );
   \   00000B                ; Setup parameters for call to function osal_strlen
   \   00000B   EE           MOV     A,R6
   \   00000C   FA           MOV     R2,A
   \   00000D   EF           MOV     A,R7
   \   00000E   FB           MOV     R3,A
   \   00000F   12....       LCALL   ??osal_strlen?relay
   \   000012   EA           MOV     A,R2
   \   000013   F5..         MOV     ?V0 + 2,A
    894               for (count=0; count<totalLength; count++)
   \   000015   75..00       MOV     ?V0 + 0,#0x0
   \   000018   8018         SJMP    ??HalLcd_HW_WriteLine_0
    895               {
    896                  HalLcd_HW_WriteChar(line,count,*pText);
   \                     ??HalLcd_HW_WriteLine_1:
   \   00001A                ; Setup parameters for call to function HalLcd_HW_WriteChar
   \   00001A   8E82         MOV     DPL,R6
   \   00001C   8F83         MOV     DPH,R7
   \   00001E   E0           MOVX    A,@DPTR
   \   00001F   FB           MOV     R3,A
   \   000020   AA..         MOV     R2,?V0 + 0
   \   000022   A9..         MOV     R1,?V0 + 1
   \   000024   12....       LCALL   ??HalLcd_HW_WriteChar?relay
    897                  pText++;
   \   000027   8E82         MOV     DPL,R6
   \   000029   8F83         MOV     DPH,R7
   \   00002B   A3           INC     DPTR
   \   00002C   AE82         MOV     R6,DPL
   \   00002E   AF83         MOV     R7,DPH
    898               }  
   \   000030   05..         INC     ?V0 + 0
   \                     ??HalLcd_HW_WriteLine_0:
   \   000032   E5..         MOV     A,?V0 + 0
   \   000034   C3           CLR     C
   \   000035   95..         SUBB    A,?V0 + 2
   \   000037   40E1         JC      ??HalLcd_HW_WriteLine_1
    899               /* Write blank spaces to rest of the line 这行中超出字符串范围的区域清屏
    900               以免上次这行中超出这次字符长度的字符还存在*/  
    901               for(count=totalLength; count<21;count++)
   \   000039   85....       MOV     ?V0 + 0,?V0 + 2
   \   00003C   800B         SJMP    ??HalLcd_HW_WriteLine_2
    902            {
    903              HalLcd_HW_WriteChar(line, count, 0x00);
   \                     ??HalLcd_HW_WriteLine_3:
   \   00003E                ; Setup parameters for call to function HalLcd_HW_WriteChar
   \   00003E   7B00         MOV     R3,#0x0
   \   000040   AA..         MOV     R2,?V0 + 0
   \   000042   A9..         MOV     R1,?V0 + 1
   \   000044   12....       LCALL   ??HalLcd_HW_WriteChar?relay
    904            }
   \   000047   05..         INC     ?V0 + 0
   \                     ??HalLcd_HW_WriteLine_2:
   \   000049   E5..         MOV     A,?V0 + 0
   \   00004B   C3           CLR     C
   \   00004C   9415         SUBB    A,#0x15
   \   00004E   40EE         JC      ??HalLcd_HW_WriteLine_3
    905          }
   \   000050   7F03         MOV     R7,#0x3
   \   000052   02....       LJMP    ?BANKED_LEAVE_XDATA
    906          
    907          /**************************************************************************************************
    908           * @fn      HalLcd_HW_WaitUs
    909           *
    910           * @brief   wait for x us. @ 32MHz MCU clock it takes 32 "nop"s for 1 us delay.
    911           *
    912           * @param   x us. range[0-65536]
    913           *
    914           * @return  None
    915           **************************************************************************************************/

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    916          void HalLcd_HW_WaitUs(uint16 microSecs)
   \                     HalLcd_HW_WaitUs:
    917          {
   \   000000                ; Saved register size: 0
   \   000000                ; Auto size: 0
   \   000000   8020         SJMP    ??HalLcd_HW_WaitUs_0
    918            while(microSecs--)
    919            {
    920              /* 32 NOPs == 1 usecs */
    921              asm("nop"); asm("nop"); asm("nop"); asm("nop"); asm("nop");
   \                     ??HalLcd_HW_WaitUs_1:
   \   000002   00           nop
   \   000003   00           nop
   \   000004   00           nop
   \   000005   00           nop
   \   000006   00           nop
    922              asm("nop"); asm("nop"); asm("nop"); asm("nop"); asm("nop");
   \   000007   00           nop
   \   000008   00           nop
   \   000009   00           nop
   \   00000A   00           nop
   \   00000B   00           nop
    923              asm("nop"); asm("nop"); asm("nop"); asm("nop"); asm("nop");
   \   00000C   00           nop
   \   00000D   00           nop
   \   00000E   00           nop
   \   00000F   00           nop
   \   000010   00           nop
    924              asm("nop"); asm("nop"); asm("nop"); asm("nop"); asm("nop");
   \   000011   00           nop
   \   000012   00           nop
   \   000013   00           nop
   \   000014   00           nop
   \   000015   00           nop
    925              asm("nop"); asm("nop"); asm("nop"); asm("nop"); asm("nop");
   \   000016   00           nop
   \   000017   00           nop
   \   000018   00           nop
   \   000019   00           nop
   \   00001A   00           nop
    926              asm("nop"); asm("nop"); asm("nop"); asm("nop"); asm("nop");
   \   00001B   00           nop
   \   00001C   00           nop
   \   00001D   00           nop
   \   00001E   00           nop
   \   00001F   00           nop
    927              asm("nop"); asm("nop");
   \   000020   00           nop
   \   000021   00           nop
    928            }
   \                     ??HalLcd_HW_WaitUs_0:
   \   000022   EA           MOV     A,R2
   \   000023   F8           MOV     R0,A
   \   000024   EB           MOV     A,R3
   \   000025   F9           MOV     R1,A
   \   000026   E8           MOV     A,R0
   \   000027   24FF         ADD     A,#-0x1
   \   000029   FA           MOV     R2,A
   \   00002A   E9           MOV     A,R1
   \   00002B   34FF         ADDC    A,#-0x1
   \   00002D   FB           MOV     R3,A
   \   00002E   E8           MOV     A,R0
   \   00002F   49           ORL     A,R1
   \   000030   70D0         JNZ     ??HalLcd_HW_WaitUs_1
    929          }
   \   000032   02....       LJMP    ?BRET
    930          

   \                                 In  segment CODE_C, align 1
    931          __code const uint8 ascii_table_5x7[][5] = {
   \                     ascii_table_5x7:
   \   000000   00           DB 0
   \   000001   00           DB 0
   \   000002   00           DB 0
   \   000003   00           DB 0
   \   000004   00           DB 0
   \   000005   00           DB 0
   \   000006   00           DB 0
   \   000007   4F           DB 79
   \   000008   00           DB 0
   \   000009   00           DB 0
   \   00000A   00           DB 0
   \   00000B   07           DB 7
   \   00000C   00           DB 0
   \   00000D   07           DB 7
   \   00000E   00           DB 0
   \   00000F   14           DB 20
   \   000010   7F           DB 127
   \   000011   14           DB 20
   \   000012   7F           DB 127
   \   000013   14           DB 20
   \   000014   24           DB 36
   \   000015   2A           DB 42
   \   000016   7F           DB 127
   \   000017   2A           DB 42
   \   000018   12           DB 18
   \   000019   23           DB 35
   \   00001A   13           DB 19
   \   00001B   08           DB 8
   \   00001C   64           DB 100
   \   00001D   62           DB 98
   \   00001E   36           DB 54
   \   00001F   49           DB 73
   \   000020   55           DB 85
   \   000021   22           DB 34
   \   000022   50           DB 80
   \   000023   00           DB 0
   \   000024   05           DB 5
   \   000025   07           DB 7
   \   000026   00           DB 0
   \   000027   00           DB 0
   \   000028   00           DB 0
   \   000029   1C           DB 28
   \   00002A   22           DB 34
   \   00002B   41           DB 65
   \   00002C   00           DB 0
   \   00002D   00           DB 0
   \   00002E   41           DB 65
   \   00002F   22           DB 34
   \   000030   1C           DB 28
   \   000031   00           DB 0
   \   000032   14           DB 20
   \   000033   08           DB 8
   \   000034   3E           DB 62
   \   000035   08           DB 8
   \   000036   14           DB 20
   \   000037   08           DB 8
   \   000038   08           DB 8
   \   000039   3E           DB 62
   \   00003A   08           DB 8
   \   00003B   08           DB 8
   \   00003C   00           DB 0
   \   00003D   50           DB 80
   \   00003E   30           DB 48
   \   00003F   00           DB 0
   \   000040   00           DB 0
   \   000041   08           DB 8
   \   000042   08           DB 8
   \   000043   08           DB 8
   \   000044   08           DB 8
   \   000045   08           DB 8
   \   000046   00           DB 0
   \   000047   60           DB 96
   \   000048   60           DB 96
   \   000049   00           DB 0
   \   00004A   00           DB 0
   \   00004B   20           DB 32
   \   00004C   10           DB 16
   \   00004D   08           DB 8
   \   00004E   04           DB 4
   \   00004F   02           DB 2
   \   000050   3E           DB 62
   \   000051   51           DB 81
   \   000052   49           DB 73
   \   000053   45           DB 69
   \   000054   3E           DB 62
   \   000055   00           DB 0
   \   000056   42           DB 66
   \   000057   7F           DB 127
   \   000058   40           DB 64
   \   000059   00           DB 0
   \   00005A   42           DB 66
   \   00005B   61           DB 97
   \   00005C   51           DB 81
   \   00005D   49           DB 73
   \   00005E   46           DB 70
   \   00005F   21           DB 33
   \   000060   41           DB 65
   \   000061   45           DB 69
   \   000062   4B           DB 75
   \   000063   31           DB 49
   \   000064   18           DB 24
   \   000065   14           DB 20
   \   000066   12           DB 18
   \   000067   7F           DB 127
   \   000068   10           DB 16
   \   000069   27           DB 39
   \   00006A   45           DB 69
   \   00006B   45           DB 69
   \   00006C   45           DB 69
   \   00006D   39           DB 57
   \   00006E   3C           DB 60
   \   00006F   4A           DB 74
   \   000070   49           DB 73
   \   000071   49           DB 73
   \   000072   30           DB 48
   \   000073   01           DB 1
   \   000074   71           DB 113
   \   000075   09           DB 9
   \   000076   05           DB 5
   \   000077   03           DB 3
   \   000078   36           DB 54
   \   000079   49           DB 73
   \   00007A   49           DB 73
   \   00007B   49           DB 73
   \   00007C   36           DB 54
   \   00007D   06           DB 6
   \   00007E   49           DB 73
   \   00007F   49           DB 73
   \   000080   29           DB 41
   \   000081   1E           DB 30
   \   000082   00           DB 0
   \   000083   36           DB 54
   \   000084   36           DB 54
   \   000085   00           DB 0
   \   000086   00           DB 0
   \   000087   00           DB 0
   \   000088   56           DB 86
   \   000089   36           DB 54
   \   00008A   00           DB 0
   \   00008B   00           DB 0
   \   00008C   08           DB 8
   \   00008D   14           DB 20
   \   00008E   22           DB 34
   \   00008F   41           DB 65
   \   000090   00           DB 0
   \   000091   14           DB 20
   \   000092   14           DB 20
   \   000093   14           DB 20
   \   000094   14           DB 20
   \   000095   14           DB 20
   \   000096   00           DB 0
   \   000097   41           DB 65
   \   000098   22           DB 34
   \   000099   14           DB 20
   \   00009A   08           DB 8
   \   00009B   02           DB 2
   \   00009C   01           DB 1
   \   00009D   51           DB 81
   \   00009E   09           DB 9
   \   00009F   06           DB 6
   \   0000A0   32           DB 50
   \   0000A1   49           DB 73
   \   0000A2   79           DB 121
   \   0000A3   41           DB 65
   \   0000A4   3E           DB 62
   \   0000A5   7E           DB 126
   \   0000A6   11           DB 17
   \   0000A7   11           DB 17
   \   0000A8   11           DB 17
   \   0000A9   7E           DB 126
   \   0000AA   7F           DB 127
   \   0000AB   49           DB 73
   \   0000AC   49           DB 73
   \   0000AD   49           DB 73
   \   0000AE   36           DB 54
   \   0000AF   3E           DB 62
   \   0000B0   41           DB 65
   \   0000B1   41           DB 65
   \   0000B2   41           DB 65
   \   0000B3   22           DB 34
   \   0000B4   7F           DB 127
   \   0000B5   41           DB 65
   \   0000B6   41           DB 65
   \   0000B7   22           DB 34
   \   0000B8   1C           DB 28
   \   0000B9   7F           DB 127
   \   0000BA   49           DB 73
   \   0000BB   49           DB 73
   \   0000BC   49           DB 73
   \   0000BD   41           DB 65
   \   0000BE   7F           DB 127
   \   0000BF   09           DB 9
   \   0000C0   09           DB 9
   \   0000C1   09           DB 9
   \   0000C2   01           DB 1
   \   0000C3   3E           DB 62
   \   0000C4   41           DB 65
   \   0000C5   49           DB 73
   \   0000C6   49           DB 73
   \   0000C7   7A           DB 122
   \   0000C8   7F           DB 127
   \   0000C9   08           DB 8
   \   0000CA   08           DB 8
   \   0000CB   08           DB 8
   \   0000CC   7F           DB 127
   \   0000CD   00           DB 0
   \   0000CE   41           DB 65
   \   0000CF   7F           DB 127
   \   0000D0   41           DB 65
   \   0000D1   00           DB 0
   \   0000D2   20           DB 32
   \   0000D3   40           DB 64
   \   0000D4   41           DB 65
   \   0000D5   3F           DB 63
   \   0000D6   01           DB 1
   \   0000D7   7F           DB 127
   \   0000D8   08           DB 8
   \   0000D9   14           DB 20
   \   0000DA   22           DB 34
   \   0000DB   41           DB 65
   \   0000DC   7F           DB 127
   \   0000DD   40           DB 64
   \   0000DE   40           DB 64
   \   0000DF   40           DB 64
   \   0000E0   40           DB 64
   \   0000E1   7F           DB 127
   \   0000E2   02           DB 2
   \   0000E3   0C           DB 12
   \   0000E4   02           DB 2
   \   0000E5   7F           DB 127
   \   0000E6   7F           DB 127
   \   0000E7   04           DB 4
   \   0000E8   08           DB 8
   \   0000E9   10           DB 16
   \   0000EA   7F           DB 127
   \   0000EB   3E           DB 62
   \   0000EC   41           DB 65
   \   0000ED   41           DB 65
   \   0000EE   41           DB 65
   \   0000EF   3E           DB 62
   \   0000F0   7F           DB 127
   \   0000F1   09           DB 9
   \   0000F2   09           DB 9
   \   0000F3   09           DB 9
   \   0000F4   06           DB 6
   \   0000F5   3E           DB 62
   \   0000F6   41           DB 65
   \   0000F7   51           DB 81
   \   0000F8   21           DB 33
   \   0000F9   5E           DB 94
   \   0000FA   7F           DB 127
   \   0000FB   09           DB 9
   \   0000FC   19           DB 25
   \   0000FD   29           DB 41
   \   0000FE   46           DB 70
   \   0000FF   46           DB 70
   \   000100   49           DB 73
   \   000101   49           DB 73
   \   000102   49           DB 73
   \   000103   31           DB 49
   \   000104   01           DB 1
   \   000105   01           DB 1
   \   000106   7F           DB 127
   \   000107   01           DB 1
   \   000108   01           DB 1
   \   000109   3F           DB 63
   \   00010A   40           DB 64
   \   00010B   40           DB 64
   \   00010C   40           DB 64
   \   00010D   3F           DB 63
   \   00010E   1F           DB 31
   \   00010F   20           DB 32
   \   000110   40           DB 64
   \   000111   20           DB 32
   \   000112   1F           DB 31
   \   000113   3F           DB 63
   \   000114   40           DB 64
   \   000115   38           DB 56
   \   000116   40           DB 64
   \   000117   3F           DB 63
   \   000118   63           DB 99
   \   000119   14           DB 20
   \   00011A   08           DB 8
   \   00011B   14           DB 20
   \   00011C   63           DB 99
   \   00011D   07           DB 7
   \   00011E   08           DB 8
   \   00011F   70           DB 112
   \   000120   08           DB 8
   \   000121   07           DB 7
   \   000122   61           DB 97
   \   000123   51           DB 81
   \   000124   49           DB 73
   \   000125   45           DB 69
   \   000126   43           DB 67
   \   000127   00           DB 0
   \   000128   7F           DB 127
   \   000129   41           DB 65
   \   00012A   41           DB 65
   \   00012B   00           DB 0
   \   00012C   02           DB 2
   \   00012D   04           DB 4
   \   00012E   08           DB 8
   \   00012F   10           DB 16
   \   000130   20           DB 32
   \   000131   00           DB 0
   \   000132   41           DB 65
   \   000133   41           DB 65
   \   000134   7F           DB 127
   \   000135   00           DB 0
   \   000136   04           DB 4
   \   000137   02           DB 2
   \   000138   01           DB 1
   \   000139   02           DB 2
   \   00013A   04           DB 4
   \   00013B   40           DB 64
   \   00013C   40           DB 64
   \   00013D   40           DB 64
   \   00013E   40           DB 64
   \   00013F   40           DB 64
   \   000140   01           DB 1
   \   000141   02           DB 2
   \   000142   04           DB 4
   \   000143   00           DB 0
   \   000144   00           DB 0
   \   000145   20           DB 32
   \   000146   54           DB 84
   \   000147   54           DB 84
   \   000148   54           DB 84
   \   000149   78           DB 120
   \   00014A   7F           DB 127
   \   00014B   48           DB 72
   \   00014C   48           DB 72
   \   00014D   48           DB 72
   \   00014E   30           DB 48
   \   00014F   38           DB 56
   \   000150   44           DB 68
   \   000151   44           DB 68
   \   000152   44           DB 68
   \   000153   44           DB 68
   \   000154   30           DB 48
   \   000155   48           DB 72
   \   000156   48           DB 72
   \   000157   48           DB 72
   \   000158   7F           DB 127
   \   000159   38           DB 56
   \   00015A   54           DB 84
   \   00015B   54           DB 84
   \   00015C   54           DB 84
   \   00015D   58           DB 88
   \   00015E   00           DB 0
   \   00015F   08           DB 8
   \   000160   7E           DB 126
   \   000161   09           DB 9
   \   000162   02           DB 2
   \   000163   48           DB 72
   \   000164   54           DB 84
   \   000165   54           DB 84
   \   000166   54           DB 84
   \   000167   3C           DB 60
   \   000168   7F           DB 127
   \   000169   08           DB 8
   \   00016A   08           DB 8
   \   00016B   08           DB 8
   \   00016C   70           DB 112
   \   00016D   00           DB 0
   \   00016E   00           DB 0
   \   00016F   7A           DB 122
   \   000170   00           DB 0
   \   000171   00           DB 0
   \   000172   20           DB 32
   \   000173   40           DB 64
   \   000174   40           DB 64
   \   000175   3D           DB 61
   \   000176   00           DB 0
   \   000177   7F           DB 127
   \   000178   20           DB 32
   \   000179   28           DB 40
   \   00017A   44           DB 68
   \   00017B   00           DB 0
   \   00017C   00           DB 0
   \   00017D   41           DB 65
   \   00017E   7F           DB 127
   \   00017F   40           DB 64
   \   000180   00           DB 0
   \   000181   7C           DB 124
   \   000182   04           DB 4
   \   000183   38           DB 56
   \   000184   04           DB 4
   \   000185   7C           DB 124
   \   000186   7C           DB 124
   \   000187   08           DB 8
   \   000188   04           DB 4
   \   000189   04           DB 4
   \   00018A   78           DB 120
   \   00018B   38           DB 56
   \   00018C   44           DB 68
   \   00018D   44           DB 68
   \   00018E   44           DB 68
   \   00018F   38           DB 56
   \   000190   7C           DB 124
   \   000191   14           DB 20
   \   000192   14           DB 20
   \   000193   14           DB 20
   \   000194   08           DB 8
   \   000195   08           DB 8
   \   000196   14           DB 20
   \   000197   14           DB 20
   \   000198   14           DB 20
   \   000199   7C           DB 124
   \   00019A   7C           DB 124
   \   00019B   08           DB 8
   \   00019C   04           DB 4
   \   00019D   04           DB 4
   \   00019E   08           DB 8
   \   00019F   48           DB 72
   \   0001A0   54           DB 84
   \   0001A1   54           DB 84
   \   0001A2   54           DB 84
   \   0001A3   24           DB 36
   \   0001A4   04           DB 4
   \   0001A5   04           DB 4
   \   0001A6   3F           DB 63
   \   0001A7   44           DB 68
   \   0001A8   24           DB 36
   \   0001A9   3C           DB 60
   \   0001AA   40           DB 64
   \   0001AB   40           DB 64
   \   0001AC   40           DB 64
   \   0001AD   3C           DB 60
   \   0001AE   1C           DB 28
   \   0001AF   20           DB 32
   \   0001B0   40           DB 64
   \   0001B1   20           DB 32
   \   0001B2   1C           DB 28
   \   0001B3   3C           DB 60
   \   0001B4   40           DB 64
   \   0001B5   30           DB 48
   \   0001B6   40           DB 64
   \   0001B7   3C           DB 60
   \   0001B8   44           DB 68
   \   0001B9   28           DB 40
   \   0001BA   10           DB 16
   \   0001BB   28           DB 40
   \   0001BC   44           DB 68
   \   0001BD   04           DB 4
   \   0001BE   48           DB 72
   \   0001BF   30           DB 48
   \   0001C0   08           DB 8
   \   0001C1   04           DB 4
   \   0001C2   44           DB 68
   \   0001C3   64           DB 100
   \   0001C4   54           DB 84
   \   0001C5   4C           DB 76
   \   0001C6   44           DB 68
   \   0001C7   08           DB 8
   \   0001C8   36           DB 54
   \   0001C9   41           DB 65
   \   0001CA   41           DB 65
   \   0001CB   00           DB 0
   \   0001CC   00           DB 0
   \   0001CD   00           DB 0
   \   0001CE   77           DB 119
   \   0001CF   00           DB 0
   \   0001D0   00           DB 0
   \   0001D1   00           DB 0
   \   0001D2   41           DB 65
   \   0001D3   41           DB 65
   \   0001D4   36           DB 54
   \   0001D5   08           DB 8
   \   0001D6   04           DB 4
   \   0001D7   02           DB 2
   \   0001D8   02           DB 2
   \   0001D9   02           DB 2
   \   0001DA   01           DB 1

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??HalLcdInit?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    HalLcdInit

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??HalLcdWriteString?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    HalLcdWriteString

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??HalLcdWriteValue?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    HalLcdWriteValue

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??HalLcdWriteScreen?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    HalLcdWriteScreen

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??HalLcdWriteStringValue?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    HalLcdWriteStringValue

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??HalLcdWriteStringValueValue?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    HalLcdWriteStringValueValue

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??HalLcdDisplayPercentBar?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    HalLcdDisplayPercentBar

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??halLcd_ConfigIO?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    halLcd_ConfigIO

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??HalLcd_HW_Control?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    HalLcd_HW_Control

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??HalLcd_HW_Write?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    HalLcd_HW_Write

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??HalLcd_HW_Clear?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    HalLcd_HW_Clear

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??HalLcd_HW_Init?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    HalLcd_HW_Init

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??set_ddram_line_col?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    set_ddram_line_col

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??DisplayByte_5x7?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    DisplayByte_5x7

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??HalLcd_HW_WriteChar?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    HalLcd_HW_WriteChar

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??HalLcd_HW_WriteLine?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    HalLcd_HW_WriteLine

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??HalLcd_HW_WaitUs?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    HalLcd_HW_WaitUs

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "Texas Instruments">`:
   \   000000   54657861     DB "Texas Instruments"
   \            7320496E
   \            73747275
   \            6D656E74
   \            7300    

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "[          ]  ">`:
   \   000000   5B202020     DB "[          ]  "
   \            20202020
   \            2020205D
   \            202000  
    932            {0x00,0x00,0x00,0x00,0x00},//space
    933            {0x00,0x00,0x4f,0x00,0x00},//!
    934            {0x00,0x07,0x00,0x07,0x00},//"
    935            {0x14,0x7f,0x14,0x7f,0x14},//#
    936            {0x24,0x2a,0x7f,0x2a,0x12},//$
    937            {0x23,0x13,0x08,0x64,0x62},//%
    938            {0x36,0x49,0x55,0x22,0x50},//&
    939            {0x00,0x05,0x07,0x00,0x00},//]
    940            {0x00,0x1c,0x22,0x41,0x00},//(
    941            {0x00,0x41,0x22,0x1c,0x00},//)
    942            {0x14,0x08,0x3e,0x08,0x14},//*
    943            {0x08,0x08,0x3e,0x08,0x08},//+
    944            {0x00,0x50,0x30,0x00,0x00},//,
    945            {0x08,0x08,0x08,0x08,0x08},//-
    946            {0x00,0x60,0x60,0x00,0x00},//.
    947            {0x20,0x10,0x08,0x04,0x02},///
    948            {0x3e,0x51,0x49,0x45,0x3e},//0
    949            {0x00,0x42,0x7f,0x40,0x00},//1
    950            {0x42,0x61,0x51,0x49,0x46},//2
    951            {0x21,0x41,0x45,0x4b,0x31},//3
    952            {0x18,0x14,0x12,0x7f,0x10},//4
    953            {0x27,0x45,0x45,0x45,0x39},//5
    954            {0x3c,0x4a,0x49,0x49,0x30},//6
    955            {0x01,0x71,0x09,0x05,0x03},//7
    956            {0x36,0x49,0x49,0x49,0x36},//8
    957            {0x06,0x49,0x49,0x29,0x1e},//9
    958            {0x00,0x36,0x36,0x00,0x00},//:
    959            {0x00,0x56,0x36,0x00,0x00},//;
    960            {0x08,0x14,0x22,0x41,0x00},//<
    961            {0x14,0x14,0x14,0x14,0x14},//=
    962            {0x00,0x41,0x22,0x14,0x08},//>
    963            {0x02,0x01,0x51,0x09,0x06},//?
    964            {0x32,0x49,0x79,0x41,0x3e},//@
    965            {0x7e,0x11,0x11,0x11,0x7e},//A
    966            {0x7f,0x49,0x49,0x49,0x36},//B
    967            {0x3e,0x41,0x41,0x41,0x22},//C
    968            {0x7f,0x41,0x41,0x22,0x1c},//D
    969            {0x7f,0x49,0x49,0x49,0x41},//E
    970            {0x7f,0x09,0x09,0x09,0x01},//F
    971            {0x3e,0x41,0x49,0x49,0x7a},//G
    972            {0x7f,0x08,0x08,0x08,0x7f},//H
    973            {0x00,0x41,0x7f,0x41,0x00},//I
    974            {0x20,0x40,0x41,0x3f,0x01},//J
    975            {0x7f,0x08,0x14,0x22,0x41},//K
    976            {0x7f,0x40,0x40,0x40,0x40},//L
    977            {0x7f,0x02,0x0c,0x02,0x7f},//M
    978            {0x7f,0x04,0x08,0x10,0x7f},//N
    979            {0x3e,0x41,0x41,0x41,0x3e},//O
    980            {0x7f,0x09,0x09,0x09,0x06},//P
    981            {0x3e,0x41,0x51,0x21,0x5e},//Q
    982            {0x7f,0x09,0x19,0x29,0x46},//R
    983            {0x46,0x49,0x49,0x49,0x31},//S
    984            {0x01,0x01,0x7f,0x01,0x01},//T
    985            {0x3f,0x40,0x40,0x40,0x3f},//U
    986            {0x1f,0x20,0x40,0x20,0x1f},//V
    987            {0x3f,0x40,0x38,0x40,0x3f},//W
    988            {0x63,0x14,0x08,0x14,0x63},//X
    989            {0x07,0x08,0x70,0x08,0x07},//Y
    990            {0x61,0x51,0x49,0x45,0x43},//Z
    991            {0x00,0x7f,0x41,0x41,0x00},//[
    992            {0x02,0x04,0x08,0x10,0x20},// 斜杠
    993            {0x00,0x41,0x41,0x7f,0x00},//]
    994            {0x04,0x02,0x01,0x02,0x04},//^
    995            {0x40,0x40,0x40,0x40,0x40},//_
    996            {0x01,0x02,0x04,0x00,0x00},//`
    997            {0x20,0x54,0x54,0x54,0x78},//a
    998            {0x7f,0x48,0x48,0x48,0x30},//b
    999            {0x38,0x44,0x44,0x44,0x44},//c
   1000            {0x30,0x48,0x48,0x48,0x7f},//d
   1001            {0x38,0x54,0x54,0x54,0x58},//e
   1002            {0x00,0x08,0x7e,0x09,0x02},//f
   1003            {0x48,0x54,0x54,0x54,0x3c},//g
   1004            {0x7f,0x08,0x08,0x08,0x70},//h
   1005            {0x00,0x00,0x7a,0x00,0x00},//i
   1006            {0x20,0x40,0x40,0x3d,0x00},//j
   1007            {0x7f,0x20,0x28,0x44,0x00},//k
   1008            {0x00,0x41,0x7f,0x40,0x00},//l
   1009            {0x7c,0x04,0x38,0x04,0x7c},//m
   1010            {0x7c,0x08,0x04,0x04,0x78},//n
   1011            {0x38,0x44,0x44,0x44,0x38},//o
   1012            {0x7c,0x14,0x14,0x14,0x08},//p
   1013            {0x08,0x14,0x14,0x14,0x7c},//q
   1014            {0x7c,0x08,0x04,0x04,0x08},//r
   1015            {0x48,0x54,0x54,0x54,0x24},//s
   1016            {0x04,0x04,0x3f,0x44,0x24},//t
   1017            {0x3c,0x40,0x40,0x40,0x3c},//u
   1018            {0x1c,0x20,0x40,0x20,0x1c},//v
   1019            {0x3c,0x40,0x30,0x40,0x3c},//w
   1020            {0x44,0x28,0x10,0x28,0x44},//x
   1021            {0x04,0x48,0x30,0x08,0x04},//y
   1022            {0x44,0x64,0x54,0x4c,0x44},//z
   1023            {0x08,0x36,0x41,0x41,0x00},//{
   1024            {0x00,0x00,0x77,0x00,0x00},//|
   1025            {0x00,0x41,0x41,0x36,0x08},//}
   1026            {0x04,0x02,0x02,0x02,0x01},//~
   1027          };
   1028          
   1029          #endif
   1030          
   1031          
   1032          /**************************************************************************************************
   1033          **************************************************************************************************/
   1034          
   1035          
   1036          

   Maximum stack usage in bytes:

     Function                    ISTACK PSTACK XSTACK
     --------                    ------ ------ ------
     DisplayByte_5x7                 0      0     22
       -> set_ddram_line_col         0      0     26
       -> HalLcd_HW_Write            0      0     26
       -> HalLcd_HW_Write            0      0     26
       -> set_ddram_line_col         0      0     26
       -> HalLcd_HW_Write            0      0     26
     HalLcdDisplayPercentBar         0      0     36
       -> HalLcdWriteString          0      0     66
       -> osal_memcpy                0      0     72
       -> _ltoa                      0      0     70
       -> HalLcdWriteString          0      0     66
     HalLcdInit                      2      0      0
       -> HalLcd_HW_Init             4      0      0
     HalLcdWriteScreen               0      0      9
       -> HalLcdWriteString          0      0     18
       -> HalLcdWriteString          0      0     18
     HalLcdWriteString               0      0     67
       -> osal_mem_alloc             0      0     36
       -> HalLcdWriteString          0      0     36
       -> osal_strlen                0      0     36
       -> osal_memcpy                0      0     42
       -> osal_strlen                0      0     36
       -> osal_mem_alloc             0      0     36
       -> osal_memcpy                0      0     42
       -> osal_memcpy                0      0     42
       -> debug_str                  0      0     36
       -> osal_mem_free              0      0     36
       -> HalLcd_HW_WriteLine        0      0     36
     HalLcdWriteStringValue          0      0     49
       -> osal_strlen                0      0     90
       -> osal_memcpy                0      0     96
       -> _ltoa                      0      0     94
       -> HalLcdWriteString          0      0     90
     HalLcdWriteStringValueValue     0      0     53
       -> osal_strlen                0      0     92
       -> osal_memcpy                0      0     98
       -> _ltoa                      0      0     96
       -> osal_strlen                0      0     92
       -> _ltoa                      0      0     96
       -> HalLcdWriteString          0      0     92
     HalLcdWriteValue                0      0     44
       -> _ltoa                      0      0     86
       -> HalLcdWriteString          0      0     82
     HalLcd_HW_Clear                 0      0     10
       -> HalLcd_HW_Write            0      0     20
       -> HalLcd_HW_Control          0      0     20
       -> HalLcd_HW_Control          0      0     20
       -> HalLcd_HW_Control          0      0     20
     HalLcd_HW_Control               0      0     21
       -> HalLcd_HW_WaitUs           0      0     18
       -> HalLcd_HW_WaitUs           0      0     18
     HalLcd_HW_Init                  2      0      0
       -> HalLcd_HW_WaitUs           4      0      0
       -> halLcd_ConfigIO            4      0      0
       -> HalLcd_HW_Control          4      0      0
       -> HalLcd_HW_WaitUs           4      0      0
       -> HalLcd_HW_Control          4      0      0
       -> HalLcd_HW_WaitUs           4      0      0
       -> HalLcd_HW_Control          4      0      0
       -> HalLcd_HW_WaitUs           4      0      0
       -> HalLcd_HW_Control          4      0      0
       -> HalLcd_HW_WaitUs           4      0      0
       -> HalLcd_HW_Control          4      0      0
       -> HalLcd_HW_WaitUs           4      0      0
       -> HalLcd_HW_Control          4      0      0
       -> HalLcd_HW_WaitUs           4      0      0
       -> HalLcd_HW_Control          4      0      0
       -> HalLcd_HW_WaitUs           4      0      0
       -> HalLcd_HW_Control          4      0      0
       -> HalLcd_HW_WaitUs           4      0      0
       -> HalLcd_HW_Control          4      0      0
       -> HalLcd_HW_WaitUs           4      0      0
       -> HalLcd_HW_Control          4      0      0
       -> HalLcd_HW_WaitUs           4      0      0
       -> HalLcd_HW_Control          4      0      0
       -> HalLcd_HW_WaitUs           4      0      0
       -> HalLcd_HW_Control          4      0      0
       -> HalLcd_HW_Clear            4      0      0
     HalLcd_HW_WaitUs                0      0     12
     HalLcd_HW_Write                 0      0     13
     HalLcd_HW_WriteChar             0      0     20
       -> DisplayByte_5x7            0      0     18
     HalLcd_HW_WriteLine             0      0     29
       -> osal_strlen                0      0     22
       -> HalLcd_HW_WriteChar        0      0     22
       -> HalLcd_HW_WriteChar        0      0     22
     halLcd_ConfigIO                 0      0      0
     set_ddram_line_col              0      0     25
       -> HalLcd_HW_Control          0      0     24
       -> HalLcd_HW_WaitUs           0      0     24
       -> HalLcd_HW_Control          0      0     24
       -> HalLcd_HW_WaitUs           0      0     24
       -> HalLcd_HW_Control          0      0     24
       -> HalLcd_HW_WaitUs           0      0     24


   Segment part sizes:

     Function/Label                      Bytes
     --------------                      -----
     _A_P0                                  1
     _A_P1                                  1
     P0SEL                                  1
     P1SEL                                  1
     P0DIR                                  1
     P1DIR                                  1
     Lcd_Line1                              2
     HalLcdInit                            24
     HalLcdWriteString                    362
     HalLcdWriteValue                      87
     HalLcdWriteScreen                     28
     HalLcdWriteStringValue               194
     HalLcdWriteStringValueValue          339
     HalLcdDisplayPercentBar              217
     halLcd_ConfigIO                       15
     HalLcd_HW_Control                     60
     HalLcd_HW_Write                       37
     HalLcd_HW_Clear                       98
     HalLcd_HW_Init                       161
     set_ddram_line_col                    73
     DisplayByte_5x7                      184
     HalLcd_HW_WriteChar                   41
     HalLcd_HW_WriteLine                   85
     HalLcd_HW_WaitUs                      53
     ascii_table_5x7                      475
     ??HalLcdInit?relay                     6
     ??HalLcdWriteString?relay              6
     ??HalLcdWriteValue?relay               6
     ??HalLcdWriteScreen?relay              6
     ??HalLcdWriteStringValue?relay         6
     ??HalLcdWriteStringValueValue?relay    6
     ??HalLcdDisplayPercentBar?relay        6
     ??halLcd_ConfigIO?relay                6
     ??HalLcd_HW_Control?relay              6
     ??HalLcd_HW_Write?relay                6
     ??HalLcd_HW_Clear?relay                6
     ??HalLcd_HW_Init?relay                 6
     ??set_ddram_line_col?relay             6
     ??DisplayByte_5x7?relay                6
     ??HalLcd_HW_WriteChar?relay            6
     ??HalLcd_HW_WriteLine?relay            6
     ??HalLcd_HW_WaitUs?relay               6
     ?<Constant "Texas Instruments">       18
     ?<Constant "[          ]  ">          15

 
 2 058 bytes in segment BANKED_CODE
   102 bytes in segment BANK_RELAYS
   475 bytes in segment CODE_C
     6 bytes in segment SFR_AN
    33 bytes in segment XDATA_ROM_C
     2 bytes in segment XDATA_Z
 
 2 635 bytes of CODE  memory
    33 bytes of CONST memory
     0 bytes of DATA  memory (+ 6 bytes shared)
     2 bytes of XDATA memory

Errors: none
Warnings: none
